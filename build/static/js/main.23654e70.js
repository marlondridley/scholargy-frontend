/*! For license information please see main.23654e70.js.LICENSE.txt */
(()=>{var e={34:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(416));t.default=class{constructor(e,t){let{headers:n={},schema:s,fetch:r}=t;this.url=e,this.headers=n,this.schema=s,this.fetch=r}select(e){let{head:t=!1,count:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=t?"HEAD":"GET";let i=!1;const a=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e)).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new r.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),n||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new r.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=[`resolution=${n?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new r.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new r.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new r.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},42:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(34)),i=s(n(416)),a=n(401);class o{constructor(e){let{headers:t={},schema:n,fetch:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=Object.assign(Object.assign({},a.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new r.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new o(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:s=!1,get:r=!1,count:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=new URL(`${this.url}/rpc/${e}`);let l;s||r?(t=s?"HEAD":"GET",Object.entries(n).filter(e=>{let[t,n]=e;return void 0!==n}).map(e=>{let[t,n]=e;return[t,Array.isArray(n)?`{${n.join(",")}}`:`${n}`]}).forEach(e=>{let[t,n]=e;o.searchParams.append(t,n)})):(t="POST",l=n);const c=Object.assign({},this.headers);return a&&(c.Prefer=`count=${a}`),new i.default({method:t,url:o,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}}t.default=o},72:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="0.0.0-automated"},226:(e,t)=>{"use strict";var n=Symbol.for("react.element"),s=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function b(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var x=y.prototype=new b;x.constructor=y,g(x,v.prototype),x.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function j(e,t,s){var r,i={},a=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,r)&&!S.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=s;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:n,type:e,key:a,ref:o,props:i,_owner:k.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(e,t,r,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case s:l=!0}}if(l)return a=a(l=e),e=""===i?"."+T(l,0):i,w(a)?(r="",null!=e&&(r=e.replace(C,"$&/")+"/"),E(a,t,r,"",function(e){return e})):null!=a&&(N(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var u=i+T(o=e[c],c);l+=E(o,t,r,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=E(o=o.value,t,r,u=i+T(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var s=[],r=0;return E(e,s,"","",function(e){return t.call(n,e,r++)}),s}function O(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},M={transition:null},I={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:M,ReactCurrentOwner:k};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=a,t.PureComponent=y,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.act=R,t.cloneElement=function(e,t,s){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=g({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=k.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!S.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=s;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:r,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=j,t.createFactory=function(e){var t=j.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.3.1"},241:(e,t,n)=>{"use strict";var s=n(643),r=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var s,i={},c=null,u=null;for(s in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,s)&&!l.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===i[s]&&(i[s]=t[s]);return{$$typeof:r,type:e,key:c,ref:u,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},261:(e,t,n)=>{"use strict";e.exports=n(498)},306:(e,t,n)=>{"use strict";var s=n(643),r=n(261);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,s,r,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function y(e,t,n,s){var r=m.hasOwnProperty(t)?m[t]:null;(null!==r?0!==r.type:s||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,s){if(null===t||"undefined"===typeof t||function(e,t,n,s){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!s&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,s))return!0;if(s)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,s)&&(n=null),s||null===r?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,s=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,b);m[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,b);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,b);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),C=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var L,D=Object.assign;function z(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var $=!1;function F(e,t){if(!e||$)return"";$=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var s=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){s=c}e.call(t.prototype)}else{try{throw Error()}catch(c){s=c}e()}}catch(c){if(c&&s&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),i=s.stack.split("\n"),a=r.length-1,o=i.length-1;1<=a&&0<=o&&r[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||r[a]!==i[o]){var l="\n"+r[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{$=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function U(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case _:return"Portal";case j:return"Profiler";case S:return"StrictMode";case E:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){s=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(e){s=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=V(e)?e.checked?"true":"false":e.value),(e=s)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return D({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,s=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function X(e,t){Q(e,t);var n=H(t.value),s=t.type;if(null!=n)"number"===s?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===s||"reset"===s)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!("submit"!==s&&"reset"!==s||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,s){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&s&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(s&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return D({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ie(e,t){var n=H(t.value),s=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=s&&(e.defaultValue=""+s)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,s){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var s=0===n.indexOf("--"),r=ge(n,t[n],s);"float"===n&&(n="cssFloat"),s?e.setProperty(n,r):e[n]=r}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,ke=null,Se=null;function je(e){if(e=yr(e)){if("function"!==typeof _e)throw Error(i(280));var t=e.stateNode;t&&(t=wr(t),_e(e.stateNode,e.type,t))}}function Ne(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Ce(){if(ke){var e=ke,t=Se;if(Se=ke=null,je(e),t)for(e=0;e<t.length;e++)je(t[e])}}function Te(e,t){return e(t)}function Ee(){}var Pe=!1;function Oe(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Te(e,t,n)}finally{Pe=!1,(null!==ke||null!==Se)&&(Ee(),Ce())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var s=wr(n);if(null===s)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Me=!1;if(u)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(ue){Me=!1}function Re(e,t,n,s,r,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,De=null,ze=!1,$e=null,Fe={onError:function(e){Le=!0,De=e}};function Ue(e,t,n,s,r,i,a,o,l){Le=!1,De=null,Re.apply(Fe,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Be(e)!==e)throw Error(i(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,s=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(s=r.return)){n=s;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return He(r),e;if(a===s)return He(r),t;a=a.sibling}throw Error(i(188))}if(n.return!==s.return)n=r,s=a;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,s=a;break}if(l===s){o=!0,s=r,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,s=r;break}if(l===s){o=!0,s=a,n=r;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==s)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ke=r.unstable_scheduleCallback,Ge=r.unstable_cancelCallback,Ye=r.unstable_shouldYield,Je=r.unstable_requestPaint,Qe=r.unstable_now,Xe=r.unstable_getCurrentPriorityLevel,Ze=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,st=r.unstable_IdlePriority,rt=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var s=0,r=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~r;0!==o?s=dt(o):0!==(i&=a)&&(s=dt(i))}else 0!==(a=n&~r)?s=dt(a):0!==i&&(s=dt(i));if(0===s)return 0;if(0!==t&&t!==s&&0===(t&r)&&((r=s&-s)>=(i=t&-t)||16===r&&0!==(4194240&i)))return t;if(0!==(4&s)&&(s|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=s;0<t;)r=1<<(n=31-at(t)),s|=e[n],t&=~r;return s}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-at(n),r=1<<s;r&t|e[s]&t&&(e[s]|=t),n&=~r}}var yt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,kt,St,jt,Nt=!1,Ct=[],Tt=null,Et=null,Pt=null,Ot=new Map,At=new Map,Mt=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Lt(e,t,n,s,r,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},null!==t&&(null!==(t=yr(t))&&_t(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Dt(e){var t=br(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void jt(e.priority,function(){kt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yr(n))&&_t(t),e.blockedOn=n,!1;var s=new(n=e.nativeEvent).constructor(n.type,n);xe=s,n.target.dispatchEvent(s),xe=null,t.shift()}return!0}function $t(e,t,n){zt(e)&&n.delete(t)}function Ft(){Nt=!1,null!==Tt&&zt(Tt)&&(Tt=null),null!==Et&&zt(Et)&&(Et=null),null!==Pt&&zt(Pt)&&(Pt=null),Ot.forEach($t),At.forEach($t)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ft)))}function Bt(e){function t(t){return Ut(t,e)}if(0<Ct.length){Ut(Ct[0],e);for(var n=1;n<Ct.length;n++){var s=Ct[n];s.blockedOn===e&&(s.blockedOn=null)}}for(null!==Tt&&Ut(Tt,e),null!==Et&&Ut(Et,e),null!==Pt&&Ut(Pt,e),Ot.forEach(t),At.forEach(t),n=0;n<Mt.length;n++)(s=Mt[n]).blockedOn===e&&(s.blockedOn=null);for(;0<Mt.length&&null===(n=Mt[0]).blockedOn;)Dt(n),null===n.blockedOn&&Mt.shift()}var Wt=x.ReactCurrentBatchConfig,Ht=!0;function Vt(e,t,n,s){var r=yt,i=Wt.transition;Wt.transition=null;try{yt=1,Kt(e,t,n,s)}finally{yt=r,Wt.transition=i}}function qt(e,t,n,s){var r=yt,i=Wt.transition;Wt.transition=null;try{yt=4,Kt(e,t,n,s)}finally{yt=r,Wt.transition=i}}function Kt(e,t,n,s){if(Ht){var r=Yt(e,t,n,s);if(null===r)Hs(e,t,s,Gt,n),Rt(e,s);else if(function(e,t,n,s,r){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,s,r),!0;case"dragenter":return Et=Lt(Et,e,t,n,s,r),!0;case"mouseover":return Pt=Lt(Pt,e,t,n,s,r),!0;case"pointerover":var i=r.pointerId;return Ot.set(i,Lt(Ot.get(i)||null,e,t,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,At.set(i,Lt(At.get(i)||null,e,t,n,s,r)),!0}return!1}(r,e,t,n,s))s.stopPropagation();else if(Rt(e,s),4&t&&-1<It.indexOf(e)){for(;null!==r;){var i=yr(r);if(null!==i&&wt(i),null===(i=Yt(e,t,n,s))&&Hs(e,t,s,Gt,n),i===r)break;r=i}null!==r&&s.stopPropagation()}else Hs(e,t,s,null,n)}}var Gt=null;function Yt(e,t,n,s){if(Gt=null,null!==(e=br(e=we(s))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case st:return 536870912;default:return 16}default:return 16}}var Qt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,s=n.length,r="value"in Qt?Qt.value:Qt.textContent,i=r.length;for(e=0;e<s&&n[e]===r[e];e++);var a=s-e;for(t=1;t<=a&&n[s-t]===r[i-t];t++);return Zt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function sn(){return!1}function rn(e){function t(t,n,s,r,i){for(var a in this._reactName=t,this._targetInst=s,this.type=n,this.nativeEvent=r,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:sn,this.isPropagationStopped=sn,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=rn(cn),dn=D({},cn,{view:0,detail:0}),hn=rn(dn),fn=D({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=rn(fn),gn=rn(D({},fn,{dataTransfer:0})),mn=rn(D({},dn,{relatedTarget:0})),vn=rn(D({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=D({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=rn(bn),xn=rn(D({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function jn(){return Sn}var Nn=D({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=rn(Nn),Tn=rn(D({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=rn(D({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jn})),Pn=rn(D({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=D({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=rn(On),Mn=[9,13,27,32],In=u&&"CompositionEvent"in window,Rn=null;u&&"documentMode"in document&&(Rn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Rn,Dn=u&&(!In||Rn&&8<Rn&&11>=Rn),zn=String.fromCharCode(32),$n=!1;function Fn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Vn(e,t,n,s){Ne(s),0<(t=qs(t,"onChange")).length&&(n=new un("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var qn=null,Kn=null;function Gn(e){zs(e,0)}function Yn(e){if(K(xr(e)))return e}function Jn(e,t){if("change"===e)return t}var Qn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var es=document.createElement("div");es.setAttribute("oninput","return;"),Zn="function"===typeof es.oninput}Xn=Zn}else Xn=!1;Qn=Xn&&(!document.documentMode||9<document.documentMode)}function ts(){qn&&(qn.detachEvent("onpropertychange",ns),Kn=qn=null)}function ns(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Vn(t,Kn,e,we(e)),Oe(Gn,t)}}function ss(e,t,n){"focusin"===e?(ts(),Kn=n,(qn=t).attachEvent("onpropertychange",ns)):"focusout"===e&&ts()}function rs(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function is(e,t){if("click"===e)return Yn(t)}function as(e,t){if("input"===e||"change"===e)return Yn(t)}var os="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ls(e,t){if(os(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!d.call(t,r)||!os(e[r],t[r]))return!1}return!0}function cs(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function us(e,t){var n,s=cs(e);for(e=0;s;){if(3===s.nodeType){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=cs(s)}}function ds(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ds(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hs(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(s){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ps(e){var t=hs(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ds(n.ownerDocument.documentElement,n)){if(null!==s&&fs(n))if(t=s.start,void 0===(e=s.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=void 0===s.end?i:Math.min(s.end,r),!e.extend&&i>s&&(r=s,s=i,i=r),r=us(n,i);var a=us(n,s);r&&a&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gs=u&&"documentMode"in document&&11>=document.documentMode,ms=null,vs=null,bs=null,ys=!1;function xs(e,t,n){var s=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ys||null==ms||ms!==G(s)||("selectionStart"in(s=ms)&&fs(s)?s={start:s.selectionStart,end:s.selectionEnd}:s={anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},bs&&ls(bs,s)||(bs=s,0<(s=qs(vs,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=ms)))}function ws(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _s={animationend:ws("Animation","AnimationEnd"),animationiteration:ws("Animation","AnimationIteration"),animationstart:ws("Animation","AnimationStart"),transitionend:ws("Transition","TransitionEnd")},ks={},Ss={};function js(e){if(ks[e])return ks[e];if(!_s[e])return e;var t,n=_s[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ss)return ks[e]=n[t];return e}u&&(Ss=document.createElement("div").style,"AnimationEvent"in window||(delete _s.animationend.animation,delete _s.animationiteration.animation,delete _s.animationstart.animation),"TransitionEvent"in window||delete _s.transitionend.transition);var Ns=js("animationend"),Cs=js("animationiteration"),Ts=js("animationstart"),Es=js("transitionend"),Ps=new Map,Os="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function As(e,t){Ps.set(e,t),l(t,[e])}for(var Ms=0;Ms<Os.length;Ms++){var Is=Os[Ms];As(Is.toLowerCase(),"on"+(Is[0].toUpperCase()+Is.slice(1)))}As(Ns,"onAnimationEnd"),As(Cs,"onAnimationIteration"),As(Ts,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(Es,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ls=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rs));function Ds(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,s,r,a,o,l,c){if(Ue.apply(this,arguments),Le){if(!Le)throw Error(i(198));var u=De;Le=!1,De=null,ze||(ze=!0,$e=u)}}(s,t,void 0,e),e.currentTarget=null}function zs(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var s=e[n],r=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var a=s.length-1;0<=a;a--){var o=s[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&r.isPropagationStopped())break e;Ds(r,o,c),i=l}else for(a=0;a<s.length;a++){if(l=(o=s[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&r.isPropagationStopped())break e;Ds(r,o,c),i=l}}}if(ze)throw e=$e,ze=!1,$e=null,e}function $s(e,t){var n=t[gr];void 0===n&&(n=t[gr]=new Set);var s=e+"__bubble";n.has(s)||(Ws(t,e,2,!1),n.add(s))}function Fs(e,t,n){var s=0;t&&(s|=4),Ws(n,e,s,t)}var Us="_reactListening"+Math.random().toString(36).slice(2);function Bs(e){if(!e[Us]){e[Us]=!0,a.forEach(function(t){"selectionchange"!==t&&(Ls.has(t)||Fs(t,!1,e),Fs(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Us]||(t[Us]=!0,Fs("selectionchange",!1,t))}}function Ws(e,t,n,s){switch(Jt(t)){case 1:var r=Vt;break;case 4:r=qt;break;default:r=Kt}n=r.bind(null,t,n,e),r=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),s?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Hs(e,t,n,s,r){var i=s;if(0===(1&t)&&0===(2&t)&&null!==s)e:for(;;){if(null===s)return;var a=s.tag;if(3===a||4===a){var o=s.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===a)for(a=s.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;a=a.return}for(;null!==o;){if(null===(a=br(o)))return;if(5===(l=a.tag)||6===l){s=i=a;continue e}o=o.parentNode}}s=s.return}Oe(function(){var s=i,r=we(n),a=[];e:{var o=Ps.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=En;break;case Ns:case Cs:case Ts:l=vn;break;case Es:l=Pn;break;case"scroll":l=hn;break;case"wheel":l=An;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=s;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=Ae(p,h))&&u.push(Vs(p,g,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,r),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!br(c)&&!c[pr])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=s,null!==(c=(c=n.relatedTarget||n.toElement)?br(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=s),l!==c)){if(u=pn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:xr(l),f=null==c?o:xr(c),(o=new u(g,p+"leave",l,n,r)).target=d,o.relatedTarget=f,g=null,br(r)===s&&((u=new u(h,p+"enter",c,n,r)).target=f,u.relatedTarget=d,g=u),d=g,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Ks(f))p++;for(f=0,g=h;g;g=Ks(g))f++;for(;0<p-f;)u=Ks(u),p--;for(;0<f-p;)h=Ks(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Ks(u),h=Ks(h)}u=null}else u=null;null!==l&&Gs(a,o,l,u,!1),null!==c&&null!==d&&Gs(a,d,c,u,!0)}if("select"===(l=(o=s?xr(s):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=Jn;else if(Hn(o))if(Qn)m=as;else{m=rs;var v=ss}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=is);switch(m&&(m=m(e,s))?Vn(a,m,n,r):(v&&v(e,o,s),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=s?xr(s):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(ms=v,vs=s,bs=null);break;case"focusout":bs=vs=ms=null;break;case"mousedown":ys=!0;break;case"contextmenu":case"mouseup":case"dragend":ys=!1,xs(a,n,r);break;case"selectionchange":if(gs)break;case"keydown":case"keyup":xs(a,n,r)}var b;if(In)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Bn?Fn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Dn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Bn&&(b=en()):(Xt="value"in(Qt=r)?Qt.value:Qt.textContent,Bn=!0)),0<(v=qs(s,y)).length&&(y=new xn(y,e,null,n,r),a.push({event:y,listeners:v}),b?y.data=b:null!==(b=Un(n))&&(y.data=b))),(b=Ln?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:($n=!0,zn);case"textInput":return(e=t.data)===zn&&$n?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!In&&Fn(e,t)?(e=en(),Zt=Xt=Qt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(s=qs(s,"onBeforeInput")).length&&(r=new xn("onBeforeInput","beforeinput",null,n,r),a.push({event:r,listeners:s}),r.data=b))}zs(a,t)})}function Vs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qs(e,t){for(var n=t+"Capture",s=[];null!==e;){var r=e,i=r.stateNode;5===r.tag&&null!==i&&(r=i,null!=(i=Ae(e,n))&&s.unshift(Vs(e,i,r)),null!=(i=Ae(e,t))&&s.push(Vs(e,i,r))),e=e.return}return s}function Ks(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gs(e,t,n,s,r){for(var i=t._reactName,a=[];null!==n&&n!==s;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===s)break;5===o.tag&&null!==c&&(o=c,r?null!=(l=Ae(n,i))&&a.unshift(Vs(n,l,o)):r||null!=(l=Ae(n,i))&&a.push(Vs(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Ys=/\r\n?/g,Js=/\u0000|\uFFFD/g;function Qs(e){return("string"===typeof e?e:""+e).replace(Ys,"\n").replace(Js,"")}function Xs(e,t,n){if(t=Qs(t),Qs(e)!==t&&n)throw Error(i(425))}function Zs(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sr="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,ir="function"===typeof Promise?Promise:void 0,ar="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ir?function(e){return ir.resolve(null).then(e).catch(or)}:sr;function or(e){setTimeout(function(){throw e})}function lr(e,t){var n=t,s=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===s)return e.removeChild(r),void Bt(t);s--}else"$"!==n&&"$?"!==n&&"$!"!==n||s++;n=r}while(n);Bt(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var dr=Math.random().toString(36).slice(2),hr="__reactFiber$"+dr,fr="__reactProps$"+dr,pr="__reactContainer$"+dr,gr="__reactEvents$"+dr,mr="__reactListeners$"+dr,vr="__reactHandles$"+dr;function br(e){var t=e[hr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pr]||n[hr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[hr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function yr(e){return!(e=e[hr]||e[pr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function wr(e){return e[fr]||null}var _r=[],kr=-1;function Sr(e){return{current:e}}function jr(e){0>kr||(e.current=_r[kr],_r[kr]=null,kr--)}function Nr(e,t){kr++,_r[kr]=e.current,e.current=t}var Cr={},Tr=Sr(Cr),Er=Sr(!1),Pr=Cr;function Or(e,t){var n=e.type.contextTypes;if(!n)return Cr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var r,i={};for(r in n)i[r]=t[r];return s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ar(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Mr(){jr(Er),jr(Tr)}function Ir(e,t,n){if(Tr.current!==Cr)throw Error(i(168));Nr(Tr,t),Nr(Er,n)}function Rr(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,"function"!==typeof s.getChildContext)return n;for(var r in s=s.getChildContext())if(!(r in t))throw Error(i(108,W(e)||"Unknown",r));return D({},n,s)}function Lr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cr,Pr=Tr.current,Nr(Tr,e),Nr(Er,Er.current),!0}function Dr(e,t,n){var s=e.stateNode;if(!s)throw Error(i(169));n?(e=Rr(e,t,Pr),s.__reactInternalMemoizedMergedChildContext=e,jr(Er),jr(Tr),Nr(Tr,e)):jr(Er),Nr(Er,n)}var zr=null,$r=!1,Fr=!1;function Ur(e){null===zr?zr=[e]:zr.push(e)}function Br(){if(!Fr&&null!==zr){Fr=!0;var e=0,t=yt;try{var n=zr;for(yt=1;e<n.length;e++){var s=n[e];do{s=s(!0)}while(null!==s)}zr=null,$r=!1}catch(r){throw null!==zr&&(zr=zr.slice(e+1)),Ke(Ze,Br),r}finally{yt=t,Fr=!1}}return null}var Wr=[],Hr=0,Vr=null,qr=0,Kr=[],Gr=0,Yr=null,Jr=1,Qr="";function Xr(e,t){Wr[Hr++]=qr,Wr[Hr++]=Vr,Vr=e,qr=t}function Zr(e,t,n){Kr[Gr++]=Jr,Kr[Gr++]=Qr,Kr[Gr++]=Yr,Yr=e;var s=Jr;e=Qr;var r=32-at(s)-1;s&=~(1<<r),n+=1;var i=32-at(t)+r;if(30<i){var a=r-r%5;i=(s&(1<<a)-1).toString(32),s>>=a,r-=a,Jr=1<<32-at(t)+r|n<<r|s,Qr=i+e}else Jr=1<<i|n<<r|s,Qr=e}function ei(e){null!==e.return&&(Xr(e,1),Zr(e,1,0))}function ti(e){for(;e===Vr;)Vr=Wr[--Hr],Wr[Hr]=null,qr=Wr[--Hr],Wr[Hr]=null;for(;e===Yr;)Yr=Kr[--Gr],Kr[Gr]=null,Qr=Kr[--Gr],Kr[Gr]=null,Jr=Kr[--Gr],Kr[Gr]=null}var ni=null,si=null,ri=!1,ii=null;function ai(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,si=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,si=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yr?{id:Jr,overflow:Qr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,si=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(ri){var t=si;if(t){var n=t;if(!oi(e,t)){if(li(e))throw Error(i(418));t=cr(n.nextSibling);var s=ni;t&&oi(e,t)?ai(s,n):(e.flags=-4097&e.flags|2,ri=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,ri=!1,ni=e}}}function ui(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function di(e){if(e!==ni)return!1;if(!ri)return ui(e),ri=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=si)){if(li(e))throw hi(),Error(i(418));for(;t;)ai(e,t),t=cr(t.nextSibling)}if(ui(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){si=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}si=null}}else si=ni?cr(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=si;e;)e=cr(e.nextSibling)}function fi(){si=ni=null,ri=!1}function pi(e){null===ii?ii=[e]:ii.push(e)}var gi=x.ReactCurrentBatchConfig;function mi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var s=n.stateNode}if(!s)throw Error(i(147,e));var r=s,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function vi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bi(e){return(0,e._init)(e._payload)}function yi(e){function t(t,n){if(e){var s=t.deletions;null===s?(t.deletions=[n],t.flags|=16):s.push(n)}}function n(n,s){if(!e)return null;for(;null!==s;)t(n,s),s=s.sibling;return null}function s(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function a(t,n,s){return t.index=s,e?null!==(s=t.alternate)?(s=s.index)<n?(t.flags|=2,n):s:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,s){return null===t||6!==t.tag?((t=Dc(n,e.mode,s)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,s){var i=n.type;return i===k?d(e,t,n.props.children,s,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===A&&bi(i)===t.type)?((s=r(t,n.props)).ref=mi(e,t,n),s.return=e,s):((s=Ic(n.type,n.key,n.props,null,e.mode,s)).ref=mi(e,t,n),s.return=e,s)}function u(e,t,n,s){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,s)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,s,i){return null===t||7!==t.tag?((t=Rc(n,e.mode,s,i)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Dc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Ic(t.type,t.key,t.props,null,e.mode,n)).ref=mi(e,null,t),n.return=e,n;case _:return(t=zc(t,e.mode,n)).return=e,t;case A:return h(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Rc(t,e.mode,n,null)).return=e,t;vi(e,t)}return null}function f(e,t,n,s){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,s);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===r?c(e,t,n,s):null;case _:return n.key===r?u(e,t,n,s):null;case A:return f(e,t,(r=n._init)(n._payload),s)}if(te(n)||R(n))return null!==r?null:d(e,t,n,s,null);vi(e,n)}return null}function p(e,t,n,s,r){if("string"===typeof s&&""!==s||"number"===typeof s)return l(t,e=e.get(n)||null,""+s,r);if("object"===typeof s&&null!==s){switch(s.$$typeof){case w:return c(t,e=e.get(null===s.key?n:s.key)||null,s,r);case _:return u(t,e=e.get(null===s.key?n:s.key)||null,s,r);case A:return p(e,t,n,(0,s._init)(s._payload),r)}if(te(s)||R(s))return d(t,e=e.get(n)||null,s,r,null);vi(t,s)}return null}function g(r,i,o,l){for(var c=null,u=null,d=i,g=i=0,m=null;null!==d&&g<o.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var v=f(r,d,o[g],l);if(null===v){null===d&&(d=m);break}e&&d&&null===v.alternate&&t(r,d),i=a(v,i,g),null===u?c=v:u.sibling=v,u=v,d=m}if(g===o.length)return n(r,d),ri&&Xr(r,g),c;if(null===d){for(;g<o.length;g++)null!==(d=h(r,o[g],l))&&(i=a(d,i,g),null===u?c=d:u.sibling=d,u=d);return ri&&Xr(r,g),c}for(d=s(r,d);g<o.length;g++)null!==(m=p(d,r,g,o[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),i=a(m,i,g),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(r,e)}),ri&&Xr(r,g),c}function m(r,o,l,c){var u=R(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,g=o,m=o=0,v=null,b=l.next();null!==g&&!b.done;m++,b=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var y=f(r,g,b.value,c);if(null===y){null===g&&(g=v);break}e&&g&&null===y.alternate&&t(r,g),o=a(y,o,m),null===d?u=y:d.sibling=y,d=y,g=v}if(b.done)return n(r,g),ri&&Xr(r,m),u;if(null===g){for(;!b.done;m++,b=l.next())null!==(b=h(r,b.value,c))&&(o=a(b,o,m),null===d?u=b:d.sibling=b,d=b);return ri&&Xr(r,m),u}for(g=s(r,g);!b.done;m++,b=l.next())null!==(b=p(g,r,m,b.value,c))&&(e&&null!==b.alternate&&g.delete(null===b.key?m:b.key),o=a(b,o,m),null===d?u=b:d.sibling=b,d=b);return e&&g.forEach(function(e){return t(r,e)}),ri&&Xr(r,m),u}return function e(s,i,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===k){if(7===u.tag){n(s,u.sibling),(i=r(u,a.props.children)).return=s,s=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&bi(c)===u.type){n(s,u.sibling),(i=r(u,a.props)).ref=mi(s,u,a),i.return=s,s=i;break e}n(s,u);break}t(s,u),u=u.sibling}a.type===k?((i=Rc(a.props.children,s.mode,l,a.key)).return=s,s=i):((l=Ic(a.type,a.key,a.props,null,s.mode,l)).ref=mi(s,i,a),l.return=s,s=l)}return o(s);case _:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(s,i.sibling),(i=r(i,a.children||[])).return=s,s=i;break e}n(s,i);break}t(s,i),i=i.sibling}(i=zc(a,s.mode,l)).return=s,s=i}return o(s);case A:return e(s,i,(u=a._init)(a._payload),l)}if(te(a))return g(s,i,a,l);if(R(a))return m(s,i,a,l);vi(s,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(s,i.sibling),(i=r(i,a)).return=s,s=i):(n(s,i),(i=Dc(a,s.mode,l)).return=s,s=i),o(s)):n(s,i)}}var xi=yi(!0),wi=yi(!1),_i=Sr(null),ki=null,Si=null,ji=null;function Ni(){ji=Si=ki=null}function Ci(e){var t=_i.current;jr(_i),e._currentValue=t}function Ti(e,t,n){for(;null!==e;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==s&&(s.childLanes|=t)):null!==s&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Ei(e,t){ki=e,ji=Si=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yo=!0),e.firstContext=null)}function Pi(e){var t=e._currentValue;if(ji!==e)if(e={context:e,memoizedValue:t,next:null},null===Si){if(null===ki)throw Error(i(308));Si=e,ki.dependencies={lanes:0,firstContext:e}}else Si=Si.next=e;return t}var Oi=null;function Ai(e){null===Oi?Oi=[e]:Oi.push(e)}function Mi(e,t,n,s){var r=t.interleaved;return null===r?(n.next=n,Ai(t)):(n.next=r.next,r.next=n),t.interleaved=n,Ii(e,s)}function Ii(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ri=!1;function Li(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Di(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $i(e,t,n){var s=e.updateQueue;if(null===s)return null;if(s=s.shared,0!==(2&Tl)){var r=s.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),s.pending=t,Ii(e,n)}return null===(r=s.interleaved)?(t.next=t,Ai(s)):(t.next=r.next,r.next=t),s.interleaved=t,Ii(e,n)}function Fi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,bt(e,n)}}function Ui(e,t){var n=e.updateQueue,s=e.alternate;if(null!==s&&n===(s=s.updateQueue)){var r=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?r=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?r=i=t:i=i.next=t}else r=i=t;return n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bi(e,t,n,s){var r=e.updateQueue;Ri=!1;var i=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=r.baseState;for(a=0,u=c=l=null,o=i;;){var h=o.lane,f=o.eventTime;if((s&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,g=o;switch(h=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(f,d,h):p)||void 0===h)break e;d=D({},d,h);break e;case 2:Ri=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(h=o).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===u&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{a|=r.lane,r=r.next}while(r!==t)}else null===i&&(r.shared.lanes=0);Ll|=a,e.lanes=a,e.memoizedState=d}}function Wi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var s=e[t],r=s.callback;if(null!==r){if(s.callback=null,s=n,"function"!==typeof r)throw Error(i(191,r));r.call(s)}}}var Hi={},Vi=Sr(Hi),qi=Sr(Hi),Ki=Sr(Hi);function Gi(e){if(e===Hi)throw Error(i(174));return e}function Yi(e,t){switch(Nr(Ki,t),Nr(qi,e),Nr(Vi,Hi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}jr(Vi),Nr(Vi,t)}function Ji(){jr(Vi),jr(qi),jr(Ki)}function Qi(e){Gi(Ki.current);var t=Gi(Vi.current),n=le(t,e.type);t!==n&&(Nr(qi,e),Nr(Vi,n))}function Xi(e){qi.current===e&&(jr(Vi),jr(qi))}var Zi=Sr(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var sa=x.ReactCurrentDispatcher,ra=x.ReactCurrentBatchConfig,ia=0,aa=null,oa=null,la=null,ca=!1,ua=!1,da=0,ha=0;function fa(){throw Error(i(321))}function pa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!os(e[n],t[n]))return!1;return!0}function ga(e,t,n,s,r,a){if(ia=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,sa.current=null===e||null===e.memoizedState?Xa:Za,e=n(s,r),ua){a=0;do{if(ua=!1,da=0,25<=a)throw Error(i(301));a+=1,la=oa=null,t.updateQueue=null,sa.current=eo,e=n(s,r)}while(ua)}if(sa.current=Qa,t=null!==oa&&null!==oa.next,ia=0,la=oa=aa=null,ca=!1,t)throw Error(i(300));return e}function ma(){var e=0!==da;return da=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function ba(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(i(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function ya(e,t){return"function"===typeof t?t(e):t}function xa(e){var t=ba(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var s=oa,r=s.baseQueue,a=n.pending;if(null!==a){if(null!==r){var o=r.next;r.next=a.next,a.next=o}s.baseQueue=r=a,n.pending=null}if(null!==r){a=r.next,s=s.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((ia&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=s):c=c.next=h,aa.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==a);null===c?o=s:c.next=l,os(s,t.memoizedState)||(yo=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,n.lastRenderedState=s}if(null!==(e=n.interleaved)){r=e;do{a=r.lane,aa.lanes|=a,Ll|=a,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=ba(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var s=n.dispatch,r=n.pending,a=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{a=e(a,o.action),o=o.next}while(o!==r);os(a,t.memoizedState)||(yo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,s]}function _a(){}function ka(e,t){var n=aa,s=ba(),r=t(),a=!os(s.memoizedState,r);if(a&&(s.memoizedState=r,yo=!0),s=s.queue,Ra(Na.bind(null,n,s,e),[e]),s.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Pa(9,ja.bind(null,n,s,r,t),void 0,null),null===El)throw Error(i(349));0!==(30&ia)||Sa(n,t,r)}return r}function Sa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ja(e,t,n,s){t.value=n,t.getSnapshot=s,Ca(t)&&Ta(e)}function Na(e,t,n){return n(function(){Ca(t)&&Ta(e)})}function Ca(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!os(e,n)}catch(s){return!0}}function Ta(e){var t=Ii(e,1);null!==t&&nc(t,e,1,-1)}function Ea(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:e},t.queue=e,e=e.dispatch=Ka.bind(null,aa,e),[t.memoizedState,e]}function Pa(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e),e}function Oa(){return ba().memoizedState}function Aa(e,t,n,s){var r=va();aa.flags|=e,r.memoizedState=Pa(1|t,n,void 0,void 0===s?null:s)}function Ma(e,t,n,s){var r=ba();s=void 0===s?null:s;var i=void 0;if(null!==oa){var a=oa.memoizedState;if(i=a.destroy,null!==s&&pa(s,a.deps))return void(r.memoizedState=Pa(t,n,i,s))}aa.flags|=e,r.memoizedState=Pa(1|t,n,i,s)}function Ia(e,t){return Aa(8390656,8,e,t)}function Ra(e,t){return Ma(2048,8,e,t)}function La(e,t){return Ma(4,2,e,t)}function Da(e,t){return Ma(4,4,e,t)}function za(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function $a(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ma(4,4,za.bind(null,t,e),n)}function Fa(){}function Ua(e,t){var n=ba();t=void 0===t?null:t;var s=n.memoizedState;return null!==s&&null!==t&&pa(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Ba(e,t){var n=ba();t=void 0===t?null:t;var s=n.memoizedState;return null!==s&&null!==t&&pa(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function Wa(e,t,n){return 0===(21&ia)?(e.baseState&&(e.baseState=!1,yo=!0),e.memoizedState=n):(os(n,t)||(n=gt(),aa.lanes|=n,Ll|=n,e.baseState=!0),t)}function Ha(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var s=ra.transition;ra.transition={};try{e(!1),t()}finally{yt=n,ra.transition=s}}function Va(){return ba().memoizedState}function qa(e,t,n){var s=tc(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Ga(e))Ya(t,n);else if(null!==(n=Mi(e,t,n,s))){nc(n,e,s,ec()),Ja(n,t,s)}}function Ka(e,t,n){var s=tc(e),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ga(e))Ya(t,r);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(r.hasEagerState=!0,r.eagerState=o,os(o,a)){var l=t.interleaved;return null===l?(r.next=r,Ai(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=Mi(e,t,r,s))&&(nc(n,e,s,r=ec()),Ja(n,t,s))}}function Ga(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Ya(e,t){ua=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ja(e,t,n){if(0!==(4194240&n)){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,bt(e,n)}}var Qa={readContext:Pi,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Xa={readContext:Pi,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Pi,useEffect:Ia,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Aa(4194308,4,za.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Aa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Aa(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=va();return t=void 0!==n?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=qa.bind(null,aa,e),[s.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Ea,useDebugValue:Fa,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Ea(!1),t=e[0];return e=Ha.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=aa,r=va();if(ri){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===El)throw Error(i(349));0!==(30&ia)||Sa(s,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,Ia(Na.bind(null,s,a,e),[e]),s.flags|=2048,Pa(9,ja.bind(null,s,a,n,t),void 0,null),n},useId:function(){var e=va(),t=El.identifierPrefix;if(ri){var n=Qr;t=":"+t+"R"+(n=(Jr&~(1<<32-at(Jr)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Pi,useCallback:Ua,useContext:Pi,useEffect:Ra,useImperativeHandle:$a,useInsertionEffect:La,useLayoutEffect:Da,useMemo:Ba,useReducer:xa,useRef:Oa,useState:function(){return xa(ya)},useDebugValue:Fa,useDeferredValue:function(e){return Wa(ba(),oa.memoizedState,e)},useTransition:function(){return[xa(ya)[0],ba().memoizedState]},useMutableSource:_a,useSyncExternalStore:ka,useId:Va,unstable_isNewReconciler:!1},eo={readContext:Pi,useCallback:Ua,useContext:Pi,useEffect:Ra,useImperativeHandle:$a,useInsertionEffect:La,useLayoutEffect:Da,useMemo:Ba,useReducer:wa,useRef:Oa,useState:function(){return wa(ya)},useDebugValue:Fa,useDeferredValue:function(e){var t=ba();return null===oa?t.memoizedState=e:Wa(t,oa.memoizedState,e)},useTransition:function(){return[wa(ya)[0],ba().memoizedState]},useMutableSource:_a,useSyncExternalStore:ka,useId:Va,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=D({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,s){n=null===(n=n(s,t=e.memoizedState))||void 0===n?t:D({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var so={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=ec(),r=tc(e),i=zi(s,r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=$i(e,i,r))&&(nc(t,e,r,s),Fi(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=ec(),r=tc(e),i=zi(s,r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=$i(e,i,r))&&(nc(t,e,r,s),Fi(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),s=tc(e),r=zi(n,s);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=$i(e,r,s))&&(nc(t,e,s,n),Fi(t,e,s))}};function ro(e,t,n,s,r,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(s,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!ls(n,s)||!ls(r,i))}function io(e,t,n){var s=!1,r=Cr,i=t.contextType;return"object"===typeof i&&null!==i?i=Pi(i):(r=Ar(t)?Pr:Tr.current,i=(s=null!==(s=t.contextTypes)&&void 0!==s)?Or(e,r):Cr),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=so,e.stateNode=t,t._reactInternals=e,s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=i),t}function ao(e,t,n,s){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,s),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,s){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Li(e);var i=t.contextType;"object"===typeof i&&null!==i?r.context=Pi(i):(i=Ar(t)?Pr:Tr.current,r.context=Or(e,i)),r.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(no(e,t,i,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&so.enqueueReplaceState(r,r.state,null),Bi(e,n,r,s),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",s=t;do{n+=U(s),s=s.return}while(s);var r=n}catch(i){r="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:r,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=zi(-1,n)).tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Hl||(Hl=!0,Vl=s),uo(0,t)},n}function po(e,t,n){(n=zi(-1,n)).tag=3;var s=e.type.getDerivedStateFromError;if("function"===typeof s){var r=t.value;n.payload=function(){return s(r)},n.callback=function(){uo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof s&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function go(e,t,n){var s=e.pingCache;if(null===s){s=e.pingCache=new ho;var r=new Set;s.set(t,r)}else void 0===(r=s.get(t))&&(r=new Set,s.set(t,r));r.has(n)||(r.add(n),e=jc.bind(null,e,t,n),t.then(e,e))}function mo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,s,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=zi(-1,1)).tag=2,$i(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var bo=x.ReactCurrentOwner,yo=!1;function xo(e,t,n,s){t.child=null===e?wi(t,null,n,s):xi(t,e.child,n,s)}function wo(e,t,n,s,r){n=n.render;var i=t.ref;return Ei(t,r),s=ga(e,t,n,s,i,r),n=ma(),null===e||yo?(ri&&n&&ei(t),t.flags|=1,xo(e,t,s,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ho(e,t,r))}function _o(e,t,n,s,r){if(null===e){var i=n.type;return"function"!==typeof i||Ac(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ic(n.type,null,s,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,ko(e,t,i,s,r))}if(i=e.child,0===(e.lanes&r)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:ls)(a,s)&&e.ref===t.ref)return Ho(e,t,r)}return t.flags|=1,(e=Mc(i,s)).ref=t.ref,e.return=t,t.child=e}function ko(e,t,n,s,r){if(null!==e){var i=e.memoizedProps;if(ls(i,s)&&e.ref===t.ref){if(yo=!1,t.pendingProps=s=i,0===(e.lanes&r))return t.lanes=e.lanes,Ho(e,t,r);0!==(131072&e.flags)&&(yo=!0)}}return No(e,t,n,s,r)}function So(e,t,n){var s=t.pendingProps,r=s.children,i=null!==e?e.memoizedState:null;if("hidden"===s.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Nr(Ml,Al),Al|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Nr(Ml,Al),Al|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=null!==i?i.baseLanes:n,Nr(Ml,Al),Al|=s}else null!==i?(s=i.baseLanes|n,t.memoizedState=null):s=n,Nr(Ml,Al),Al|=s;return xo(e,t,r,n),t.child}function jo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function No(e,t,n,s,r){var i=Ar(n)?Pr:Tr.current;return i=Or(t,i),Ei(t,r),n=ga(e,t,n,s,i,r),s=ma(),null===e||yo?(ri&&s&&ei(t),t.flags|=1,xo(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ho(e,t,r))}function Co(e,t,n,s,r){if(Ar(n)){var i=!0;Lr(t)}else i=!1;if(Ei(t,r),null===t.stateNode)Wo(e,t),io(t,n,s),oo(t,n,s,r),s=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Pi(c):c=Or(t,c=Ar(n)?Pr:Tr.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==s||l!==c)&&ao(t,a,s,c),Ri=!1;var h=t.memoizedState;a.state=h,Bi(t,s,a,r),l=t.memoizedState,o!==s||h!==l||Er.current||Ri?("function"===typeof u&&(no(t,n,u,s),l=t.memoizedState),(o=Ri||ro(t,n,o,s,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=l),a.props=s,a.state=l,a.context=c,s=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),s=!1)}else{a=t.stateNode,Di(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Pi(l):l=Or(t,l=Ar(n)?Pr:Tr.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&ao(t,a,s,l),Ri=!1,h=t.memoizedState,a.state=h,Bi(t,s,a,r);var p=t.memoizedState;o!==d||h!==p||Er.current||Ri?("function"===typeof f&&(no(t,n,f,s),p=t.memoizedState),(c=Ri||ro(t,n,c,s,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(s,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(s,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=p),a.props=s,a.state=p,a.context=l,s=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return To(e,t,n,s,i,r)}function To(e,t,n,s,r,i){jo(e,t);var a=0!==(128&t.flags);if(!s&&!a)return r&&Dr(t,n,!1),Ho(e,t,i);s=t.stateNode,bo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:s.render();return t.flags|=1,null!==e&&a?(t.child=xi(t,e.child,null,i),t.child=xi(t,null,o,i)):xo(e,t,o,i),t.memoizedState=s.state,r&&Dr(t,n,!0),t.child}function Eo(e){var t=e.stateNode;t.pendingContext?Ir(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ir(0,t.context,!1),Yi(e,t.containerInfo)}function Po(e,t,n,s,r){return fi(),pi(r),t.flags|=256,xo(e,t,n,s),t.child}var Oo,Ao,Mo,Io,Ro={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Do(e,t,n){var s,r=t.pendingProps,a=Zi.current,o=!1,l=0!==(128&t.flags);if((s=l)||(s=(null===e||null!==e.memoizedState)&&0!==(2&a)),s?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Nr(Zi,1&a),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,r,0,null),e=Rc(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Ro,e):zo(t,l));if(null!==(a=e.memoizedState)&&null!==(s=a.dehydrated))return function(e,t,n,s,r,a,o){if(n)return 256&t.flags?(t.flags&=-257,$o(e,t,o,s=co(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=s.fallback,r=t.mode,s=Lc({mode:"visible",children:s.children},r,0,null),(a=Rc(a,r,o,null)).flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,0!==(1&t.mode)&&xi(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Ro,a);if(0===(1&t.mode))return $o(e,t,o,null);if("$!"===r.data){if(s=r.nextSibling&&r.nextSibling.dataset)var l=s.dgst;return s=l,$o(e,t,o,s=co(a=Error(i(419)),s,void 0))}if(l=0!==(o&e.childLanes),yo||l){if(null!==(s=El)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(s.suspendedLanes|o))?0:r)&&r!==a.retryLane&&(a.retryLane=r,Ii(e,r),nc(s,e,r,-1))}return gc(),$o(e,t,o,s=co(Error(i(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),r._reactRetry=t,null):(e=a.treeContext,si=cr(r.nextSibling),ni=t,ri=!0,ii=null,null!==e&&(Kr[Gr++]=Jr,Kr[Gr++]=Qr,Kr[Gr++]=Yr,Jr=e.id,Qr=e.overflow,Yr=t),t=zo(t,s.children),t.flags|=4096,t)}(e,t,l,r,s,a,n);if(o){o=r.fallback,l=t.mode,s=(a=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==a?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Mc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==s?o=Mc(s,o):(o=Rc(o,l,n,null)).flags|=2,o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Ro,r}return e=(o=e.child).sibling,r=Mc(o,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function zo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function $o(e,t,n,s){return null!==s&&pi(s),xi(t,e.child,null,n),(e=zo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fo(e,t,n){e.lanes|=t;var s=e.alternate;null!==s&&(s.lanes|=t),Ti(e.return,t,n)}function Uo(e,t,n,s,r){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function Bo(e,t,n){var s=t.pendingProps,r=s.revealOrder,i=s.tail;if(xo(e,t,s.children,n),0!==(2&(s=Zi.current)))s=1&s|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fo(e,n,t);else if(19===e.tag)Fo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Nr(Zi,s),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Uo(t,!1,r,n,i);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ea(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Uo(t,!0,n,null,i);break;case"together":Uo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Mc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vo(e,t){if(!ri)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;null!==n;)null!==n.alternate&&(s=n),n=n.sibling;null===s?t||null===e.tail?e.tail=null:e.tail.sibling=null:s.sibling=null}}function qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,s=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,s|=14680064&r.subtreeFlags,s|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function Ko(e,t,n){var s=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qo(t),null;case 1:case 17:return Ar(t.type)&&Mr(),qo(t),null;case 3:return s=t.stateNode,Ji(),jr(Er),jr(Tr),na(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==e&&null!==e.child||(di(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(ac(ii),ii=null))),Ao(e,t),qo(t),null;case 5:Xi(t);var r=Gi(Ki.current);if(n=t.type,null!==e&&null!=t.stateNode)Mo(e,t,n,s,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(null===t.stateNode)throw Error(i(166));return qo(t),null}if(e=Gi(Vi.current),di(t)){s=t.stateNode,n=t.type;var a=t.memoizedProps;switch(s[hr]=t,s[fr]=a,e=0!==(1&t.mode),n){case"dialog":$s("cancel",s),$s("close",s);break;case"iframe":case"object":case"embed":$s("load",s);break;case"video":case"audio":for(r=0;r<Rs.length;r++)$s(Rs[r],s);break;case"source":$s("error",s);break;case"img":case"image":case"link":$s("error",s),$s("load",s);break;case"details":$s("toggle",s);break;case"input":J(s,a),$s("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},$s("invalid",s);break;case"textarea":re(s,a),$s("invalid",s)}for(var l in be(n,a),r=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?s.textContent!==c&&(!0!==a.suppressHydrationWarning&&Xs(s.textContent,c,e),r=["children",c]):"number"===typeof c&&s.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Xs(s.textContent,c,e),r=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&$s("scroll",s)}switch(n){case"input":q(s),Z(s,a,!0);break;case"textarea":q(s),ae(s);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(s.onclick=Zs)}s=r,t.updateQueue=s,null!==s&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof s.is?e=l.createElement(n,{is:s.is}):(e=l.createElement(n),"select"===n&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,n),e[hr]=t,e[fr]=s,Oo(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,s),n){case"dialog":$s("cancel",e),$s("close",e),r=s;break;case"iframe":case"object":case"embed":$s("load",e),r=s;break;case"video":case"audio":for(r=0;r<Rs.length;r++)$s(Rs[r],e);r=s;break;case"source":$s("error",e),r=s;break;case"img":case"image":case"link":$s("error",e),$s("load",e),r=s;break;case"details":$s("toggle",e),r=s;break;case"input":J(e,s),r=Y(e,s),$s("invalid",e);break;case"option":default:r=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},r=D({},s,{value:void 0}),$s("invalid",e);break;case"textarea":re(e,s),r=se(e,s),$s("invalid",e)}for(a in be(n,r),c=r)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?me(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&$s("scroll",e):null!=u&&y(e,a,u,l))}switch(n){case"input":q(e),Z(e,s,!1);break;case"textarea":q(e),ae(e);break;case"option":null!=s.value&&e.setAttribute("value",""+H(s.value));break;case"select":e.multiple=!!s.multiple,null!=(a=s.value)?ne(e,!!s.multiple,a,!1):null!=s.defaultValue&&ne(e,!!s.multiple,s.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Zs)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qo(t),null;case 6:if(e&&null!=t.stateNode)Io(e,t,e.memoizedProps,s);else{if("string"!==typeof s&&null===t.stateNode)throw Error(i(166));if(n=Gi(Ki.current),Gi(Vi.current),di(t)){if(s=t.stateNode,n=t.memoizedProps,s[hr]=t,(a=s.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Xs(s.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xs(s.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(s=(9===n.nodeType?n:n.ownerDocument).createTextNode(s))[hr]=t,t.stateNode=s}return qo(t),null;case 13:if(jr(Zi),s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ri&&null!==si&&0!==(1&t.mode)&&0===(128&t.flags))hi(),fi(),t.flags|=98560,a=!1;else if(a=di(t),null!==s&&null!==s.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[hr]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qo(t),a=!1}else null!==ii&&(ac(ii),ii=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((s=null!==s)!==(null!==e&&null!==e.memoizedState)&&s&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zi.current)?0===Il&&(Il=3):gc())),null!==t.updateQueue&&(t.flags|=4),qo(t),null);case 4:return Ji(),Ao(e,t),null===e&&Bs(t.stateNode.containerInfo),qo(t),null;case 10:return Ci(t.type._context),qo(t),null;case 19:if(jr(Zi),null===(a=t.memoizedState))return qo(t),null;if(s=0!==(128&t.flags),null===(l=a.rendering))if(s)Vo(a,!1);else{if(0!==Il||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Vo(a,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;null!==n;)e=s,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Nr(Zi,1&Zi.current|2),t.child}e=e.sibling}null!==a.tail&&Qe()>Bl&&(t.flags|=128,s=!0,Vo(a,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=ea(l))){if(t.flags|=128,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ri)return qo(t),null}else 2*Qe()-a.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,s=!0,Vo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Qe(),t.sibling=null,n=Zi.current,Nr(Zi,s?1&n|2:1&n),t):(qo(t),null);case 22:case 23:return dc(),s=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==s&&(t.flags|=8192),s&&0!==(1&t.mode)?0!==(1073741824&Al)&&(qo(t),6&t.subtreeFlags&&(t.flags|=8192)):qo(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Go(e,t){switch(ti(t),t.tag){case 1:return Ar(t.type)&&Mr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ji(),jr(Er),jr(Tr),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xi(t),null;case 13:if(jr(Zi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return jr(Zi),null;case 4:return Ji(),null;case 10:return Ci(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Oo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ao=function(){},Mo=function(e,t,n,s){var r=e.memoizedProps;if(r!==s){e=t.stateNode,Gi(Vi.current);var i,a=null;switch(n){case"input":r=Y(e,r),s=Y(e,s),a=[];break;case"select":r=D({},r,{value:void 0}),s=D({},s,{value:void 0}),a=[];break;case"textarea":r=se(e,r),s=se(e,s),a=[];break;default:"function"!==typeof r.onClick&&"function"===typeof s.onClick&&(e.onclick=Zs)}for(u in be(n,s),n=null,r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in s){var c=s[u];if(l=null!=r?r[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&$s("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Io=function(e,t,n,s){n!==s&&(t.flags|=4)};var Yo=!1,Jo=!1,Qo="function"===typeof WeakSet?WeakSet:Set,Xo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(s){Sc(e,t,s)}else n.current=null}function el(e,t,n){try{n()}catch(s){Sc(e,t,s)}}var tl=!1;function nl(e,t,n){var s=t.updateQueue;if(null!==(s=null!==s?s.lastEffect:null)){var r=s=s.next;do{if((r.tag&e)===e){var i=r.destroy;r.destroy=void 0,void 0!==i&&el(t,n,i)}r=r.next}while(r!==s)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hr],delete t[fr],delete t[gr],delete t[mr],delete t[vr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zs));else if(4!==s&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==s&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(rt,n)}catch(o){}switch(n.tag){case 5:Jo||Zo(n,t);case 6:var s=ul,r=dl;ul=null,hl(e,t,n),dl=r,null!==(ul=s)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Bt(e)):lr(ul,n.stateNode));break;case 4:s=ul,r=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=s,dl=r;break;case 0:case 11:case 14:case 15:if(!Jo&&(null!==(s=n.updateQueue)&&null!==(s=s.lastEffect))){r=s=s.next;do{var i=r,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&el(n,t,a),r=r.next}while(r!==s)}hl(e,t,n);break;case 1:if(!Jo&&(Zo(n,t),"function"===typeof(s=n.stateNode).componentWillUnmount))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(o){Sc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Jo=(s=Jo)||null!==n.memoizedState,hl(e,t,n),Jo=s):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qo),t.forEach(function(t){var s=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(s,s))})}}function gl(e,t){var n=t.deletions;if(null!==n)for(var s=0;s<n.length;s++){var r=n[s];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(i(160));fl(a,o,r),ul=null,dl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Sc(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&s){try{nl(3,e,e.return),sl(3,e)}catch(m){Sc(e,e.return,m)}try{nl(5,e,e.return)}catch(m){Sc(e,e.return,m)}}break;case 1:gl(t,e),vl(e),512&s&&null!==n&&Zo(n,n.return);break;case 5:if(gl(t,e),vl(e),512&s&&null!==n&&Zo(n,n.return),32&e.flags){var r=e.stateNode;try{he(r,"")}catch(m){Sc(e,e.return,m)}}if(4&s&&null!=(r=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&Q(r,a),ye(l,o);var u=ye(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?me(r,h):"dangerouslySetInnerHTML"===d?de(r,h):"children"===d?he(r,h):y(r,d,h,u)}switch(l){case"input":X(r,a);break;case"textarea":ie(r,a);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(r,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(r,!!a.multiple,a.defaultValue,!0):ne(r,!!a.multiple,a.multiple?[]:"",!1))}r[fr]=a}catch(m){Sc(e,e.return,m)}}break;case 6:if(gl(t,e),vl(e),4&s){if(null===e.stateNode)throw Error(i(162));r=e.stateNode,a=e.memoizedProps;try{r.nodeValue=a}catch(m){Sc(e,e.return,m)}}break;case 3:if(gl(t,e),vl(e),4&s&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Sc(e,e.return,m)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(r=e.child).flags&&(a=null!==r.memoizedState,r.stateNode.isHidden=a,!a||null!==r.alternate&&null!==r.alternate.memoizedState||(Ul=Qe())),4&s&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Jo=(u=Jo)||d,gl(t,e),Jo=u):gl(t,e),vl(e),8192&s){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xo=e,d=e.child;null!==d;){for(h=Xo=d;null!==Xo;){switch(p=(f=Xo).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zo(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){s=f,n=f.return;try{t=s,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Sc(s,n,m)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==p?(p.return=f,Xo=p):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{r=h.stateNode,u?"function"===typeof(a=r.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",o))}catch(m){Sc(e,e.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){Sc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),vl(e),4&s&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var s=n;break e}n=n.return}throw Error(i(160))}switch(s.tag){case 5:var r=s.stateNode;32&s.flags&&(he(r,""),s.flags&=-33),cl(e,ol(e),r);break;case 3:case 4:var a=s.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(i(161))}}catch(o){Sc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Xo=e,yl(e,t,n)}function yl(e,t,n){for(var s=0!==(1&e.mode);null!==Xo;){var r=Xo,i=r.child;if(22===r.tag&&s){var a=null!==r.memoizedState||Yo;if(!a){var o=r.alternate,l=null!==o&&null!==o.memoizedState||Jo;o=Yo;var c=Jo;if(Yo=a,(Jo=l)&&!c)for(Xo=r;null!==Xo;)l=(a=Xo).child,22===a.tag&&null!==a.memoizedState?_l(r):null!==l?(l.return=a,Xo=l):_l(r);for(;null!==i;)Xo=i,yl(i,t,n),i=i.sibling;Xo=r,Yo=o,Jo=c}xl(e)}else 0!==(8772&r.subtreeFlags)&&null!==i?(i.return=r,Xo=i):xl(e)}}function xl(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Jo||sl(5,t);break;case 1:var s=t.stateNode;if(4&t.flags&&!Jo)if(null===n)s.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Wi(t,a,s);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Wi(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(i(163))}Jo||512&t.flags&&rl(t)}catch(f){Sc(t,t.return,f)}}if(t===e){Xo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xo=n;break}Xo=t.return}}function wl(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xo=n;break}Xo=t.return}}function _l(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sl(4,t)}catch(l){Sc(t,n,l)}break;case 1:var s=t.stateNode;if("function"===typeof s.componentDidMount){var r=t.return;try{s.componentDidMount()}catch(l){Sc(t,r,l)}}var i=t.return;try{rl(t)}catch(l){Sc(t,i,l)}break;case 5:var a=t.return;try{rl(t)}catch(l){Sc(t,a,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var kl,Sl=Math.ceil,jl=x.ReactCurrentDispatcher,Nl=x.ReactCurrentOwner,Cl=x.ReactCurrentBatchConfig,Tl=0,El=null,Pl=null,Ol=0,Al=0,Ml=Sr(0),Il=0,Rl=null,Ll=0,Dl=0,zl=0,$l=null,Fl=null,Ul=0,Bl=1/0,Wl=null,Hl=!1,Vl=null,ql=null,Kl=!1,Gl=null,Yl=0,Jl=0,Ql=null,Xl=-1,Zl=0;function ec(){return 0!==(6&Tl)?Qe():-1!==Xl?Xl:Xl=Qe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==Ol?Ol&-Ol:null!==gi.transition?(0===Zl&&(Zl=gt()),Zl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nc(e,t,n,s){if(50<Jl)throw Jl=0,Ql=null,Error(i(185));vt(e,n,s),0!==(2&Tl)&&e===El||(e===El&&(0===(2&Tl)&&(Dl|=n),4===Il&&oc(e,Ol)),sc(e,s),1===n&&0===Tl&&0===(1&t.mode)&&(Bl=Qe()+500,$r&&Br()))}function sc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),o=1<<a,l=r[a];-1===l?0!==(o&n)&&0===(o&s)||(r[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var s=ht(e,e===El?Ol:0);if(0===s)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){$r=!0,Ur(e)}(lc.bind(null,e)):Ur(lc.bind(null,e)),ar(function(){0===(6&Tl)&&Br()}),n=null;else{switch(xt(s)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=st}n=Ec(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Xl=-1,Zl=0,0!==(6&Tl))throw Error(i(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var s=ht(e,e===El?Ol:0);if(0===s)return null;if(0!==(30&s)||0!==(s&e.expiredLanes)||t)t=mc(e,s);else{t=s;var r=Tl;Tl|=2;var a=pc();for(El===e&&Ol===t||(Wl=null,Bl=Qe()+500,hc(e,t));;)try{bc();break}catch(l){fc(e,l)}Ni(),jl.current=a,Tl=r,null!==Pl?t=0:(El=null,Ol=0,t=Il)}if(0!==t){if(2===t&&(0!==(r=pt(e))&&(s=r,t=ic(e,r))),1===t)throw n=Rl,hc(e,0),oc(e,s),sc(e,Qe()),n;if(6===t)oc(e,s);else{if(r=e.current.alternate,0===(30&s)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!os(i(),r))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=mc(e,s))&&(0!==(a=pt(e))&&(s=a,t=ic(e,a))),1===t))throw n=Rl,hc(e,0),oc(e,s),sc(e,Qe()),n;switch(e.finishedWork=r,e.finishedLanes=s,t){case 0:case 1:throw Error(i(345));case 2:case 5:wc(e,Fl,Wl);break;case 3:if(oc(e,s),(130023424&s)===s&&10<(t=Ul+500-Qe())){if(0!==ht(e,0))break;if(((r=e.suspendedLanes)&s)!==s){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=sr(wc.bind(null,e,Fl,Wl),t);break}wc(e,Fl,Wl);break;case 4:if(oc(e,s),(4194240&s)===s)break;for(t=e.eventTimes,r=-1;0<s;){var o=31-at(s);a=1<<o,(o=t[o])>r&&(r=o),s&=~a}if(s=r,10<(s=(120>(s=Qe()-s)?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Sl(s/1960))-s)){e.timeoutHandle=sr(wc.bind(null,e,Fl,Wl),s);break}wc(e,Fl,Wl);break;default:throw Error(i(329))}}}return sc(e,Qe()),e.callbackNode===n?rc.bind(null,e):null}function ic(e,t){var n=$l;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Fl,Fl=n,null!==t&&ac(t)),e}function ac(e){null===Fl?Fl=e:Fl.push.apply(Fl,e)}function oc(e,t){for(t&=~zl,t&=~Dl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),s=1<<n;e[n]=-1,t&=~s}}function lc(e){if(0!==(6&Tl))throw Error(i(327));_c();var t=ht(e,0);if(0===(1&t))return sc(e,Qe()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var s=pt(e);0!==s&&(t=s,n=ic(e,s))}if(1===n)throw n=Rl,hc(e,0),oc(e,t),sc(e,Qe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Fl,Wl),sc(e,Qe()),null}function cc(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(Bl=Qe()+500,$r&&Br())}}function uc(e){null!==Gl&&0===Gl.tag&&0===(6&Tl)&&_c();var t=Tl;Tl|=1;var n=Cl.transition,s=yt;try{if(Cl.transition=null,yt=1,e)return e()}finally{yt=s,Cl.transition=n,0===(6&(Tl=t))&&Br()}}function dc(){Al=Ml.current,jr(Ml)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Pl)for(n=Pl.return;null!==n;){var s=n;switch(ti(s),s.tag){case 1:null!==(s=s.type.childContextTypes)&&void 0!==s&&Mr();break;case 3:Ji(),jr(Er),jr(Tr),na();break;case 5:Xi(s);break;case 4:Ji();break;case 13:case 19:jr(Zi);break;case 10:Ci(s.type._context);break;case 22:case 23:dc()}n=n.return}if(El=e,Pl=e=Mc(e.current,null),Ol=Al=t,Il=0,Rl=null,zl=Dl=Ll=0,Fl=$l=null,null!==Oi){for(t=0;t<Oi.length;t++)if(null!==(s=(n=Oi[t]).interleaved)){n.interleaved=null;var r=s.next,i=n.pending;if(null!==i){var a=i.next;i.next=r,s.next=a}n.pending=s}Oi=null}return e}function fc(e,t){for(;;){var n=Pl;try{if(Ni(),sa.current=Qa,ca){for(var s=aa.memoizedState;null!==s;){var r=s.queue;null!==r&&(r.pending=null),s=s.next}ca=!1}if(ia=0,la=oa=aa=null,ua=!1,da=0,Nl.current=null,null===n||null===n.return){Il=1,Rl=t,Pl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Ol,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=mo(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,t),1&p.mode&&go(a,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){go(a,u,t),gc();break e}c=Error(i(426))}else if(ri&&1&l.mode){var v=mo(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),pi(lo(c,l));break e}}a=c=lo(c,l),4!==Il&&(Il=2),null===$l?$l=[a]:$l.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Ui(a,fo(0,c,t));break e;case 1:l=c;var b=a.type,y=a.stateNode;if(0===(128&a.flags)&&("function"===typeof b.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===ql||!ql.has(y)))){a.flags|=65536,t&=-t,a.lanes|=t,Ui(a,po(a,l,t));break e}}a=a.return}while(null!==a)}xc(n)}catch(x){t=x,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function pc(){var e=jl.current;return jl.current=Qa,null===e?Qa:e}function gc(){0!==Il&&3!==Il&&2!==Il||(Il=4),null===El||0===(268435455&Ll)&&0===(268435455&Dl)||oc(El,Ol)}function mc(e,t){var n=Tl;Tl|=2;var s=pc();for(El===e&&Ol===t||(Wl=null,hc(e,t));;)try{vc();break}catch(r){fc(e,r)}if(Ni(),Tl=n,jl.current=s,null!==Pl)throw Error(i(261));return El=null,Ol=0,Il}function vc(){for(;null!==Pl;)yc(Pl)}function bc(){for(;null!==Pl&&!Ye();)yc(Pl)}function yc(e){var t=kl(e.alternate,e,Al);e.memoizedProps=e.pendingProps,null===t?xc(e):Pl=t,Nl.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ko(n,t,Al)))return void(Pl=n)}else{if(null!==(n=Go(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Il=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Il&&(Il=5)}function wc(e,t,n){var s=yt,r=Cl.transition;try{Cl.transition=null,yt=1,function(e,t,n,s){do{_c()}while(null!==Gl);if(0!==(6&Tl))throw Error(i(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-at(n),i=1<<r;t[r]=0,s[r]=-1,e[r]=-1,n&=~i}}(e,a),e===El&&(Pl=El=null,Ol=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Ec(tt,function(){return _c(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Cl.transition,Cl.transition=null;var o=yt;yt=1;var l=Tl;Tl|=4,Nl.current=null,function(e,t){if(er=Ht,fs(e=hs())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(s&&0!==s.rangeCount){n=s.anchorNode;var r=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==r&&3!==h.nodeType||(l=o+r),h!==a||0!==s&&3!==h.nodeType||(c=o+s),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===r&&(l=o),f===a&&++d===s&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Ht=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?m:to(t.type,m),v);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(i(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}g=tl,tl=!1}(e,n),ml(n,e),ps(tr),Ht=!!er,tr=er=null,e.current=n,bl(n,e,r),Je(),Tl=l,yt=o,Cl.transition=a}else e.current=n;if(Kl&&(Kl=!1,Gl=e,Yl=r),a=e.pendingLanes,0===a&&(ql=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),sc(e,Qe()),null!==t)for(s=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(Hl)throw Hl=!1,e=Vl,Vl=null,e;0!==(1&Yl)&&0!==e.tag&&_c(),a=e.pendingLanes,0!==(1&a)?e===Ql?Jl++:(Jl=0,Ql=e):Jl=0,Br()}(e,t,n,s)}finally{Cl.transition=r,yt=s}return null}function _c(){if(null!==Gl){var e=xt(Yl),t=Cl.transition,n=yt;try{if(Cl.transition=null,yt=16>e?16:e,null===Gl)var s=!1;else{if(e=Gl,Gl=null,Yl=0,0!==(6&Tl))throw Error(i(331));var r=Tl;for(Tl|=4,Xo=e.current;null!==Xo;){var a=Xo,o=a.child;if(0!==(16&Xo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xo=u;null!==Xo;){var d=Xo;switch(d.tag){case 0:case 11:case 15:nl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Xo=h;else for(;null!==Xo;){var f=(d=Xo).sibling,p=d.return;if(il(d),d===u){Xo=null;break}if(null!==f){f.return=p,Xo=f;break}Xo=p}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Xo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(a=Xo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var b=a.sibling;if(null!==b){b.return=a.return,Xo=b;break e}Xo=a.return}}var y=e.current;for(Xo=y;null!==Xo;){var x=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,Xo=x;else e:for(o=y;null!==Xo;){if(0!==(2048&(l=Xo).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(_){Sc(l,l.return,_)}if(l===o){Xo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Xo=w;break e}Xo=l.return}}if(Tl=r,Br(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(rt,e)}catch(_){}s=!0}return s}finally{yt=n,Cl.transition=t}}return!1}function kc(e,t,n){e=$i(e,t=fo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),sc(e,t))}function Sc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var s=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof s.componentDidCatch&&(null===ql||!ql.has(s))){t=$i(t,e=po(t,e=lo(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),sc(t,e));break}}t=t.return}}function jc(e,t,n){var s=e.pingCache;null!==s&&s.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,El===e&&(Ol&n)===n&&(4===Il||3===Il&&(130023424&Ol)===Ol&&500>Qe()-Ul?hc(e,0):zl|=n),sc(e,t)}function Nc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ii(e,t))&&(vt(e,t,n),sc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nc(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(i(314))}null!==s&&s.delete(t),Nc(e,n)}function Ec(e,t){return Ke(e,t)}function Pc(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,s){return new Pc(e,t,n,s)}function Ac(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ic(e,t,n,s,r,a){var o=2;if(s=e,"function"===typeof e)Ac(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Rc(n.children,r,a,t);case S:o=8,r|=8;break;case j:return(e=Oc(12,n,t,2|r)).elementType=j,e.lanes=a,e;case E:return(e=Oc(13,n,t,r)).elementType=E,e.lanes=a,e;case P:return(e=Oc(19,n,t,r)).elementType=P,e.lanes=a,e;case M:return Lc(n,r,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:o=10;break e;case C:o=9;break e;case T:o=11;break e;case O:o=14;break e;case A:o=16,s=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Oc(o,n,t,r)).elementType=e,t.type=s,t.lanes=a,t}function Rc(e,t,n,s){return(e=Oc(7,e,s,t)).lanes=n,e}function Lc(e,t,n,s){return(e=Oc(22,e,s,t)).elementType=M,e.lanes=n,e.stateNode={isHidden:!1},e}function Dc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $c(e,t,n,s,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Fc(e,t,n,s,r,i,a,o,l){return e=new $c(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Oc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Li(i),e}function Uc(e){if(!e)return Cr;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ar(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ar(n))return Rr(e,n,t)}return t}function Bc(e,t,n,s,r,i,a,o,l){return(e=Fc(n,s,!0,e,0,i,0,o,l)).context=Uc(null),n=e.current,(i=zi(s=ec(),r=tc(n))).callback=void 0!==t&&null!==t?t:null,$i(n,i,r),e.current.lanes=r,vt(e,r,s),sc(e,s),e}function Wc(e,t,n,s){var r=t.current,i=ec(),a=tc(r);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=zi(i,a)).payload={element:e},null!==(s=void 0===s?null:s)&&(t.callback=s),null!==(e=$i(r,t,a))&&(nc(e,r,a,i),Fi(e,r,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Er.current)yo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return yo=!1,function(e,t,n){switch(t.tag){case 3:Eo(t),fi();break;case 5:Qi(t);break;case 1:Ar(t.type)&&Lr(t);break;case 4:Yi(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,r=t.memoizedProps.value;Nr(_i,s._currentValue),s._currentValue=r;break;case 13:if(null!==(s=t.memoizedState))return null!==s.dehydrated?(Nr(Zi,1&Zi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Do(e,t,n):(Nr(Zi,1&Zi.current),null!==(e=Ho(e,t,n))?e.sibling:null);Nr(Zi,1&Zi.current);break;case 19:if(s=0!==(n&t.childLanes),0!==(128&e.flags)){if(s)return Bo(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Nr(Zi,Zi.current),s)break;return null;case 22:case 23:return t.lanes=0,So(e,t,n)}return Ho(e,t,n)}(e,t,n);yo=0!==(131072&e.flags)}else yo=!1,ri&&0!==(1048576&t.flags)&&Zr(t,qr,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Wo(e,t),e=t.pendingProps;var r=Or(t,Tr.current);Ei(t,n),r=ga(null,t,s,e,r,n);var a=ma();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ar(s)?(a=!0,Lr(t)):a=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Li(t),r.updater=so,t.stateNode=r,r._reactInternals=t,oo(t,s,e,n),t=To(null,t,s,!0,a,n)):(t.tag=0,ri&&a&&ei(t),xo(null,t,r,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Wo(e,t),e=t.pendingProps,s=(r=s._init)(s._payload),t.type=s,r=t.tag=function(e){if("function"===typeof e)return Ac(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===O)return 14}return 2}(s),e=to(s,e),r){case 0:t=No(null,t,s,e,n);break e;case 1:t=Co(null,t,s,e,n);break e;case 11:t=wo(null,t,s,e,n);break e;case 14:t=_o(null,t,s,to(s.type,e),n);break e}throw Error(i(306,s,""))}return t;case 0:return s=t.type,r=t.pendingProps,No(e,t,s,r=t.elementType===s?r:to(s,r),n);case 1:return s=t.type,r=t.pendingProps,Co(e,t,s,r=t.elementType===s?r:to(s,r),n);case 3:e:{if(Eo(t),null===e)throw Error(i(387));s=t.pendingProps,r=(a=t.memoizedState).element,Di(e,t),Bi(t,s,null,n);var o=t.memoizedState;if(s=o.element,a.isDehydrated){if(a={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Po(e,t,s,n,r=lo(Error(i(423)),t));break e}if(s!==r){t=Po(e,t,s,n,r=lo(Error(i(424)),t));break e}for(si=cr(t.stateNode.containerInfo.firstChild),ni=t,ri=!0,ii=null,n=wi(t,null,s,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),s===r){t=Ho(e,t,n);break e}xo(e,t,s,n)}t=t.child}return t;case 5:return Qi(t),null===e&&ci(t),s=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,o=r.children,nr(s,r)?o=null:null!==a&&nr(s,a)&&(t.flags|=32),jo(e,t),xo(e,t,o,n),t.child;case 6:return null===e&&ci(t),null;case 13:return Do(e,t,n);case 4:return Yi(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=xi(t,null,s,n):xo(e,t,s,n),t.child;case 11:return s=t.type,r=t.pendingProps,wo(e,t,s,r=t.elementType===s?r:to(s,r),n);case 7:return xo(e,t,t.pendingProps,n),t.child;case 8:case 12:return xo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,r=t.pendingProps,a=t.memoizedProps,o=r.value,Nr(_i,s._currentValue),s._currentValue=o,null!==a)if(os(a.value,o)){if(a.children===r.children&&!Er.current){t=Ho(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===s){if(1===a.tag){(c=zi(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ti(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ti(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}xo(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,s=t.pendingProps.children,Ei(t,n),s=s(r=Pi(r)),t.flags|=1,xo(e,t,s,n),t.child;case 14:return r=to(s=t.type,t.pendingProps),_o(e,t,s,r=to(s.type,r),n);case 15:return ko(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:to(s,r),Wo(e,t),t.tag=1,Ar(s)?(e=!0,Lr(t)):e=!1,Ei(t,n),io(t,s,r),oo(t,s,r,n),To(null,t,s,!0,e,n);case 19:return Bo(e,t,n);case 22:return So(e,t,n)}throw Error(i(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,s,r){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof r){var o=r;r=function(){var e=Hc(a);o.call(e)}}Wc(t,a,e,r)}else a=function(e,t,n,s,r){if(r){if("function"===typeof s){var i=s;s=function(){var e=Hc(a);i.call(e)}}var a=Bc(t,s,e,0,null,!1,0,"",Xc);return e._reactRootContainer=a,e[pr]=a.current,Bs(8===e.nodeType?e.parentNode:e),uc(),a}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof s){var o=s;s=function(){var e=Hc(l);o.call(e)}}var l=Fc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[pr]=l.current,Bs(8===e.nodeType?e.parentNode:e),uc(function(){Wc(t,l,n,s)}),l}(n,t,e,r,s);return Hc(a)}Yc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Wc(e,t,null,null)},Yc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Wc(null,e,null,null)}),t[pr]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mt.length&&0!==t&&t<Mt[n].priority;n++);Mt.splice(n,0,e),0===n&&Dt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(bt(t,1|n),sc(t,Qe()),0===(6&Tl)&&(Bl=Qe()+500,Br()))}break;case 13:uc(function(){var t=Ii(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),qc(e,1)}},_t=function(e){if(13===e.tag){var t=Ii(e,134217728);if(null!==t)nc(t,e,134217728,ec());qc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),n=Ii(e,t);if(null!==n)nc(n,e,t,ec());qc(e,t)}},St=function(){return yt},jt=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},_e=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var r=wr(s);if(!r)throw Error(i(90));K(s),X(s,r)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cc,Ee=uc;var eu={usingClientEntryPoint:!1,Events:[yr,xr,wr,Ne,Ce,cc]},tu={findFiberByHostInstance:br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!su.isDisabled&&su.supportsFiber)try{rt=su.inject(nu),it=su}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(i(200));return function(e,t,n){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==s?null:""+s,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(i(299));var n=!1,s="",r=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Fc(e,1,!1,null,0,n,0,s,r),e[pr]=t.current,Bs(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(i(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(i(405));var s=null!=n&&n.hydratedSources||null,r=!1,a="",o=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,r,0,a,o),e[pr]=t.current,Bs(e),s)for(e=0;e<s.length;e++)r=(r=(n=s[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Yc(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(i(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(i(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[pr]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!Qc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Zc(e,t,n,!1,s)},t.version="18.3.1-next-f1338f8080-20240426"},318:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Headers:()=>a,Request:()=>o,Response:()=>l,default:()=>i,fetch:()=>r});var s=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("unable to locate global object")}();const r=s.fetch,i=s.fetch.bind(s),a=s.Headers,o=s.Request,l=s.Response},340:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const r=s(n(42));t.PostgrestClient=r.default;const i=s(n(34));t.PostgrestQueryBuilder=i.default;const a=s(n(416));t.PostgrestFilterBuilder=a.default;const o=s(n(926));t.PostgrestTransformBuilder=o.default;const l=s(n(374));t.PostgrestBuilder=l.default;const c=s(n(595));t.PostgrestError=c.default,t.default={PostgrestClient:r.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default}},367:(e,t,n)=>{"use strict";var s=n(766);t.createRoot=s.createRoot,t.hydrateRoot=s.hydrateRoot},374:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(318)),i=s(n(595));t.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=r.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,s;let r=null,a=null,o=null,l=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(a="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const s=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),i=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");s&&i&&i.length>1&&(o=parseInt(i[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(a)&&(a.length>1?(r={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,o=null,l=406,c="Not Acceptable"):a=1===a.length?a[0]:null)}else{const t=await e.text();try{r=JSON.parse(t),Array.isArray(r)&&404===e.status&&(a=[],r=null,l=200,c="OK")}catch(u){404===e.status&&""===t?(l=204,c="No Content"):r={message:t}}if(r&&this.isMaybeSingle&&(null===(s=null===r||void 0===r?void 0:r.details)||void 0===s?void 0:s.includes("0 rows"))&&(r=null,l=200,c="OK"),r&&this.shouldThrowOnError)throw new i.default(r)}return{error:r,data:a,count:o,status:l,statusText:c}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,s;return{error:{message:`${null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null===e||void 0===e?void 0:e.message}`,details:`${null!==(n=null===e||void 0===e?void 0:e.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(s=null===e||void 0===e?void 0:e.code)&&void 0!==s?s:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}}},401:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_HEADERS=void 0;const s=n(72);t.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${s.version}`}},416:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(926));class i extends r.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t){let{config:n,type:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r="";"plain"===s?r="pl":"phrase"===s?r="ph":"websearch"===s&&(r="w");const i=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${r}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(e=>{let[t,n]=e;this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}t.default=i},498:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var s=n-1>>>1,r=e[s];if(!(0<i(r,t)))break e;e[s]=t,e[n]=r,n=s}}function s(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var s=0,r=e.length,a=r>>>1;s<a;){var o=2*(s+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<r&&0>i(u,l)?(e[s]=u,e[c]=n,s=c):(e[s]=l,e[o]=n,s=o);else{if(!(c<r&&0>i(u,n)))break e;e[s]=u,e[c]=n,s=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=s(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=s(u)}}function w(e){if(m=!1,x(e),!g)if(null!==s(c))g=!0,M(_);else{var t=s(u);null!==t&&I(w,t.startTime-e)}}function _(e,n){g=!1,m&&(m=!1,b(N),N=-1),p=!0;var i=f;try{for(x(n),h=s(c);null!==h&&(!(h.expirationTime>n)||e&&!E());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===s(c)&&r(c),x(n)}else r(c);h=s(c)}if(null!==h)var l=!0;else{var d=s(u);null!==d&&I(w,d.startTime-n),l=!1}return l}finally{h=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,j=null,N=-1,C=5,T=-1;function E(){return!(t.unstable_now()-T<C)}function P(){if(null!==j){var e=t.unstable_now();T=e;var n=!0;try{n=j(!0,e)}finally{n?k():(S=!1,j=null)}}else S=!1}if("function"===typeof y)k=function(){y(P)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,A=O.port2;O.port1.onmessage=P,k=function(){A.postMessage(null)}}else k=function(){v(P,0)};function M(e){j=e,S||(S=!0,k())}function I(e,n){N=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,M(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,r,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===s(c)&&e===s(u)&&(m?(b(N),N=-1):m=!0,I(w,i-a))):(e.sortIndex=o,n(c,e),g||p||(g=!0,M(_))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},507:(e,t,n)=>{"use strict";e.exports=n(241)},595:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=n},643:(e,t,n)=>{"use strict";e.exports=n(226)},662:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=662,e.exports=t},766:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(306)},926:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(374));class i extends r.default{select(e){let t=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:s,referencedTable:r=s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=r?`${r}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s="undefined"===typeof n?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t){let{foreignTable:n,referencedTable:s=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r="undefined"===typeof s?"offset":`${s}.offset`,i="undefined"===typeof s?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this.url.searchParams.set(i,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain(){let{analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:s=!1,wal:r=!1,format:i="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,s?"buffers":null,r?"wal":null].filter(Boolean).join("|"),l=null!==(a=this.headers.Accept)&&void 0!==a?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${l}"; options=${o};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}t.default=i}},t={};function n(s){var r=t[s];if(void 0!==r)return r.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,n),i.exports}n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e=n(643),t=n(367);class s extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=n}}class r extends s{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class i extends s{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class a extends s{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var o;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(o||(o={}));var l=function(e,t,n,s){return new(n||(n=Promise))(function(r,i){function a(e){try{l(s.next(e))}catch(t){i(t)}}function o(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())})};class c{constructor(e){let{headers:t={},customFetch:s,region:r=o.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=r,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(n.bind(n,318)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}})(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return l(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:l}=t;let c={},{region:u}=t;u||(u=this.region);const d=new URL(`${this.url}/${e}`);let h;u&&"any"!==u&&(c["x-region"]=u,d.searchParams.set("forceFunctionRegion",u)),l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&("undefined"!==typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=l):"string"===typeof l?(c["Content-Type"]="text/plain",h=l):"undefined"!==typeof FormData&&l instanceof FormData?h=l:(c["Content-Type"]="application/json",h=JSON.stringify(l)));const f=yield this.fetch(d.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:h}).catch(e=>{throw new r(e)}),p=f.headers.get("x-relay-error");if(p&&"true"===p)throw new i(f);if(!f.ok)throw new a(f);let g,m=(null!==(n=f.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return g="application/json"===m?yield f.json():"application/octet-stream"===m?yield f.blob():"text/event-stream"===m?f:"multipart/form-data"===m?yield f.formData():yield f.text(),{data:g,error:null,response:f}}catch(s){return{data:null,error:s,response:s instanceof a||s instanceof i?s.context:void 0}}})}}var u=n(340);const{PostgrestClient:d,PostgrestQueryBuilder:h,PostgrestFilterBuilder:f,PostgrestTransformBuilder:p,PostgrestBuilder:g,PostgrestError:m}=u;const v=class{static dynamicRequire(e){try{return"undefined"!==typeof process&&process.versions&&process.versions.node?n(662)(e):null}catch(t){return null}}static detectEnvironment(){var e,t;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof n.g&&"undefined"!==typeof n.g.WebSocket)return{type:"native",constructor:n.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof process&&process.versions&&process.versions.node){const e=parseInt(process.versions.node.split(".")[0]);if(e>=22)try{if("undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};const e=this.dynamicRequire("undici");if(e&&e.WebSocket)return{type:"native",constructor:e.WebSocket};throw new Error("undici not available")}catch(s){return{type:"unsupported",error:`Node.js ${e} detected but native WebSocket not found.`,workaround:'Install the "ws" package or check your Node.js installation.'}}try{const e=this.dynamicRequire("ws");if(e)return{type:"ws",constructor:null!==(t=e.WebSocket)&&void 0!==t?t:e};throw new Error("ws package not available")}catch(s){return{type:"unsupported",error:`Node.js ${e} detected without WebSocket support.`,workaround:'Install the "ws" package: npm install ws'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},b=1e4;var y,x,w,_,k,S;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(y||(y={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(x||(x={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(w||(w={})),function(e){e.websocket="websocket"}(_||(_={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(k||(k={}));class j{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const s=t.getUint8(1),r=t.getUint8(2);let i=this.HEADER_LENGTH+2;const a=n.decode(e.slice(i,i+s));i+=s;const o=n.decode(e.slice(i,i+r));i+=r;return{ref:null,topic:a,event:o,payload:JSON.parse(n.decode(e.slice(i,e.byteLength)))}}}class N{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(S||(S={}));const C=function(e,t){var n;const s=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce((n,r)=>(n[r]=T(r,e,t,s),n),{})},T=(e,t,n,s)=>{const r=t.find(t=>t.name===e),i=null===r||void 0===r?void 0:r.type,a=n[e];return i&&!s.includes(i)?E(i,a):P(a)},E=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return I(t,n)}switch(e){case S.bool:return O(t);case S.float4:case S.float8:case S.int2:case S.int4:case S.int8:case S.numeric:case S.oid:return A(t);case S.json:case S.jsonb:return M(t);case S.timestamp:return R(t);case S.abstime:case S.date:case S.daterange:case S.int4range:case S.int8range:case S.money:case S.reltime:case S.text:case S.time:case S.timestamptz:case S.timetz:case S.tsrange:case S.tstzrange:default:return P(t)}},P=e=>e,O=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},A=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},M=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},I=(e,t)=>{if("string"!==typeof e)return e;const n=e.length-1,s=e[n];if("{"===e[0]&&"}"===s){let s;const i=e.slice(1,n);try{s=JSON.parse("["+i+"]")}catch(r){s=i?i.split(","):[]}return s.map(e=>E(t,e))}return e},R=e=>"string"===typeof e?e.replace(" ","T"):e,L=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class D{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:b;this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var z,$,F,U;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(z||(z={}));class B{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=B.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=B.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],s()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=B.syncDiff(this.state,e,t,n),s())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,s){const r=this.cloneDeep(e),i=this.transformState(t),a={},o={};return this.map(r,(e,t)=>{i[e]||(o[e]=t)}),this.map(i,(e,t)=>{const n=r[e];if(n){const s=t.map(e=>e.presence_ref),r=n.map(e=>e.presence_ref),i=t.filter(e=>r.indexOf(e.presence_ref)<0),l=n.filter(e=>s.indexOf(e.presence_ref)<0);i.length>0&&(a[e]=i),l.length>0&&(o[e]=l)}else a[e]=t}),this.syncDiff(r,{joins:a,leaves:o},n,s)}static syncDiff(e,t,n,s){const{joins:r,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(r,(t,s)=>{var r;const i=null!==(r=e[t])&&void 0!==r?r:[];if(e[t]=this.cloneDeep(s),i.length>0){const n=e[t].map(e=>e.presence_ref),s=i.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...s)}n(t,i,s)}),this.map(i,(t,n)=>{let r=e[t];if(!r)return;const i=n.map(e=>e.presence_ref);r=r.filter(e=>i.indexOf(e.presence_ref)<0),e[t]=r,s(t,r,n),0===r.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const s=e[n];return t[n]="metas"in s?s.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}($||($={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(F||(F={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(U||(U={}));class W{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=x.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new D(this,w.join,this.params,this.timeout),this.rejoinTimer=new N(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=x.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=x.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=x.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=x.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=x.errored,this.rejoinTimer.scheduleTimeout())}),this._on(w.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new B(this),this.broadcastEndpointURL=L(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==x.closed){const{config:{broadcast:r,presence:i,private:a}}=this.params,o=null!==(s=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==s?s:[],l=!!this.bindings[F.PRESENCE]&&this.bindings[F.PRESENCE].length>0,c={},u={broadcast:r,presence:Object.assign(Object.assign({},i),{enabled:l}),postgres_changes:o,private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(U.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(U.CLOSED)),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:n}=t;var s;if(this.socket.setAuth(),void 0!==n){const t=this.bindings.postgres_changes,r=null!==(s=null===t||void 0===t?void 0:t.length)&&void 0!==s?s:0,i=[];for(let s=0;s<r;s++){const r=t[s],{filter:{event:a,schema:o,table:l,filter:c}}=r,u=n&&n[s];if(!u||u.event!==a||u.schema!==o||u.table!==l||u.filter!==c)return this.unsubscribe(),this.state=x.errored,void(null===e||void 0===e||e(U.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},r),{id:u.id}))}return this.bindings.postgres_changes=i,void(e&&e(U.SUBSCRIBED))}null===e||void 0===e||e(U.SUBSCRIBED)}).receive("error",t=>{this.state=x.errored,null===e||void 0===e||e(U.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(U.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===x.joined&&e===F.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,s;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var s,r,i;const a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(i=null===(r=null===(s=this.params)||void 0===s?void 0:s.config)||void 0===r?void 0:r.broadcast)||void 0===i?void 0:i.ack)||n("ok"),a.receive("ok",()=>n("ok")),a.receive("error",()=>n("error")),a.receive("timeout",()=>n("timed out"))});{const{event:i,payload:a}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(s=e.body)||void 0===s?void 0:s.cancel()),e.ok?"ok":"error"}catch(r){return"AbortError"===r.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=x.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(w.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new D(this,w.leave,{},e),n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null===n||void 0===n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=x.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const s=new AbortController,r=setTimeout(()=>s.abort(),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(r),i}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new D(this,e,t,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,r;const i=e.toLocaleLowerCase(),{close:a,error:o,leave:l,join:c}=w;if(n&&[a,o,l,c].indexOf(i)>=0&&n!==this._joinRef())return;let u=this._onMessage(i,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(s=this.bindings.postgres_changes)||void 0===s||s.filter(e=>{var t,n,s;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(s=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===s?void 0:s.toLocaleLowerCase())===i}).map(e=>e.callback(u,n)):null===(r=this.bindings[i])||void 0===r||r.filter(e=>{var n,s,r,a,o,l;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in e){const i=e.id,a=null===(n=e.filter)||void 0===n?void 0:n.event;return i&&(null===(s=t.ids)||void 0===s?void 0:s.includes(i))&&("*"===a||(null===a||void 0===a?void 0:a.toLocaleLowerCase())===(null===(r=t.data)||void 0===r?void 0:r.type.toLocaleLowerCase()))}{const n=null===(o=null===(a=null===e||void 0===e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===i}).map(e=>{if("object"===typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:s,type:r,errors:i}=e,a={schema:t,table:n,commit_timestamp:s,eventType:r,new:{},old:{},errors:i};u=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(u,n)})}_isClosed(){return this.state===x.closed}_isJoined(){return this.state===x.joined}_isJoining(){return this.state===x.joining}_isLeaving(){return this.state===x.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const s=e.toLocaleLowerCase(),r={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(r):this.bindings[s]=[r],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(e=>{var s;return!((null===(s=e.type)||void 0===s?void 0:s.toLocaleLowerCase())===n&&W.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(w.close,{},e)}_onError(e){this._on(w.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=x.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=C(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=C(e.columns,e.old_record)),t}}const H=()=>{},V=25e3,q=10,K=100,G=[1e3,2e3,5e3,1e4];class Y{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=b,this.transport=null,this.heartbeatIntervalMs=V,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=H,this.ref=0,this.reconnectTimer=null,this.logger=H,this.conn=null,this.sendBuffer=[],this.serializer=new j,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(n.bind(n,318)).then(e=>{let{default:n}=e;return n(...t)}).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)})}:fetch),function(){return t(...arguments)}},!(null===(s=null===t||void 0===t?void 0:t.params)||void 0===s?void 0:s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${_.websocket}`,this.httpEndpoint=L(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=v.createWebSocket(this.endpointURL())}catch(e){throw this._setConnectionState("disconnected"),new Error(`WebSocket not available: ${e.message}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case y.connecting:return k.Connecting;case y.open:return k.Open;case y.closing:return k.Closing;default:return k.Closed}}isConnected(){return this.connectionState()===k.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const n=`realtime:${e}`,s=this.getChannels().find(e=>e.topic===n);if(s)return s;{const n=new W(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:s,ref:r}=e,i=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${n} (${r})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},K);this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{"phoenix"===e.topic&&"phx_reply"===e.event&&this.heartbeatCallback("ok"===e.payload.status?"ok":"error"),e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:n,payload:s,ref:r}=e,i=r?`(${r})`:"",a=s.status||"";this.log("receive",`${a} ${t} ${n} ${i}`.trim(),s),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,s,r)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(w.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=t||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const n={access_token:e,version:"realtime-js/2.15.0"};e&&t.updateJoinPayload(n),t.joinedOnce&&t._isJoined()&&t._push(w.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new N(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},q)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,s,r,i,a,o,l;if(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(n=null===e||void 0===e?void 0:e.timeout)&&void 0!==n?n:b,this.heartbeatIntervalMs=null!==(s=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==s?s:V,this.worker=null!==(r=null===e||void 0===e?void 0:e.worker)&&void 0!==r&&r,this.accessToken=null!==(i=null===e||void 0===e?void 0:e.accessToken)&&void 0!==i?i:null,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(a=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==a?a:e=>G[e-1]||1e4,this.encode=null!==(o=null===e||void 0===e?void 0:e.encode)&&void 0!==o?o:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(l=null===e||void 0===e?void 0:e.decode)&&void 0!==l?l:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}class J extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Q(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class X extends J{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Z extends J{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var ee=function(e,t,n,s){return new(n||(n=Promise))(function(r,i){function a(e){try{l(s.next(e))}catch(t){i(t)}}function o(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())})};const te=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(n.bind(n,318)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},ne=e=>{if(Array.isArray(e))return e.map(e=>ne(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[n,s]=e;const r=n.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=ne(s)}),t};var se=function(e,t,n,s){return new(n||(n=Promise))(function(r,i){function a(e){try{l(s.next(e))}catch(t){i(t)}}function o(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())})};const re=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ie=(e,t,s)=>se(void 0,void 0,void 0,function*(){const r=yield ee(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(n.bind(n,318))).Response:Response});e instanceof r&&!(null===s||void 0===s?void 0:s.noResolveJson)?e.json().then(n=>{const s=e.status||500,r=(null===n||void 0===n?void 0:n.statusCode)||s+"";t(new X(re(n),s,r))}).catch(e=>{t(new Z(re(e),e))}):t(new Z(re(e),e))}),ae=(e,t,n,s)=>{const r={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&s?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(s)?(r.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),r.body=JSON.stringify(s)):r.body=s,Object.assign(Object.assign({},r),n)):r};function oe(e,t,n,s,r,i){return se(this,void 0,void 0,function*(){return new Promise((a,o)=>{e(n,ae(t,s,r,i)).then(e=>{if(!e.ok)throw e;return(null===s||void 0===s?void 0:s.noResolveJson)?e:e.json()}).then(e=>a(e)).catch(e=>ie(e,o,s))})})}function le(e,t,n,s){return se(this,void 0,void 0,function*(){return oe(e,"GET",t,n,s)})}function ce(e,t,n,s,r){return se(this,void 0,void 0,function*(){return oe(e,"POST",t,s,r,n)})}function ue(e,t,n,s,r){return se(this,void 0,void 0,function*(){return oe(e,"PUT",t,s,r,n)})}function de(e,t,n,s,r){return se(this,void 0,void 0,function*(){return oe(e,"DELETE",t,s,r,n)})}var he=function(e,t,n,s){return new(n||(n=Promise))(function(r,i){function a(e){try{l(s.next(e))}catch(t){i(t)}}function o(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())})};const fe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},pe={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ge{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;this.url=e,this.headers=t,this.bucketId=n,this.fetch=te(s)}uploadOrUpdate(e,t,n,s){return he(this,void 0,void 0,function*(){try{let r;const i=Object.assign(Object.assign({},pe),s);let a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(i.upsert)});const o=i.metadata;"undefined"!==typeof Blob&&n instanceof Blob?(r=new FormData,r.append("cacheControl",i.cacheControl),o&&r.append("metadata",this.encodeMetadata(o)),r.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(r=n,r.append("cacheControl",i.cacheControl),o&&r.append("metadata",this.encodeMetadata(o))):(r=n,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,o&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null===s||void 0===s?void 0:s.headers)&&(a=Object.assign(Object.assign({},a),s.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield("PUT"==e?ue:ce)(this.fetch,`${this.url}/object/${c}`,r,Object.assign({headers:a},(null===i||void 0===i?void 0:i.duplex)?{duplex:i.duplex}:{}));return{data:{path:l,id:u.Id,fullPath:u.Key},error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}})}upload(e,t,n){return he(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,s){return he(this,void 0,void 0,function*(){const r=this._removeEmptyFolders(e),i=this._getFinalPath(r),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:pe.upsert},s),i=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,i["cache-control"]=`max-age=${t.cacheControl}`,i["content-type"]=t.contentType);return{data:{path:r,fullPath:(yield ue(this.fetch,a.toString(),e,{headers:i})).Key},error:null}}catch(o){if(Q(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return he(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(s["x-upsert"]="true");const r=yield ce(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),i=new URL(this.url+r.url),a=i.searchParams.get("token");if(!a)throw new J("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:a},error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}})}update(e,t,n){return he(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return he(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Q(s))return{data:null,error:s};throw s}})}copy(e,t,n){return he(this,void 0,void 0,function*(){try{return{data:{path:(yield ce(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Q(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,n){return he(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),r=yield ce(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const i=(null===n||void 0===n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return r={signedUrl:encodeURI(`${this.url}${r.signedURL}${i}`)},{data:r,error:null}}catch(s){if(Q(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,n){return he(this,void 0,void 0,function*(){try{const s=yield ce(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),r=(null===n||void 0===n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:s.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${r}`):null})),error:null}}catch(s){if(Q(s))return{data:null,error:s};throw s}})}download(e,t){return he(this,void 0,void 0,function*(){const n="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),r=s?`?${s}`:"";try{const t=this._getFinalPath(e),s=yield le(this.fetch,`${this.url}/${n}/${t}${r}`,{headers:this.headers,noResolveJson:!0});return{data:yield s.blob(),error:null}}catch(i){if(Q(i))return{data:null,error:i};throw i}})}info(e){return he(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield le(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:ne(e),error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}})}exists(e){return he(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,s){return se(this,void 0,void 0,function*(){return oe(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Q(n)&&n instanceof Z){const e=n.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],r=(null===t||void 0===t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==r&&s.push(r);const i="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==a&&s.push(a);let o=s.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${o}`)}}}remove(e){return he(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Q(t))return{data:null,error:t};throw t}})}list(e,t,n){return he(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},fe),t),{prefix:e||""});return{data:yield ce(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Q(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const me={"X-Client-Info":"storage-js/2.10.4"};var ve=function(e,t,n,s){return new(n||(n=Promise))(function(r,i){function a(e){try{l(s.next(e))}catch(t){i(t)}}function o(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())})};class be{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;const r=new URL(e);if(null===s||void 0===s?void 0:s.useNewHostname){/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase."))}this.url=r.href,this.headers=Object.assign(Object.assign({},me),t),this.fetch=te(n)}listBuckets(){return ve(this,void 0,void 0,function*(){try{return{data:yield le(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Q(e))return{data:null,error:e};throw e}})}getBucket(e){return ve(this,void 0,void 0,function*(){try{return{data:yield le(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Q(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return ve(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return ve(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}})}emptyBucket(e){return ve(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Q(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ve(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Q(t))return{data:null,error:t};throw t}})}}class ye extends be{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new ge(this.url,this.headers,e,this.fetch)}}let xe="";xe="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const we={headers:{"X-Client-Info":`supabase-js-${xe}/2.54.0`}},_e={schema:"public"},ke={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Se={};var je=n(318),Ne=function(e,t,n,s){return new(n||(n=Promise))(function(r,i){function a(e){try{l(s.next(e))}catch(t){i(t)}}function o(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())})};const Ce=e=>{let t;return t=e||("undefined"===typeof fetch?je.default:fetch),function(){return t(...arguments)}},Te=(e,t,n)=>{const s=Ce(n),r="undefined"===typeof Headers?je.Headers:Headers;return(n,i)=>Ne(void 0,void 0,void 0,function*(){var a;const o=null!==(a=yield t())&&void 0!==a?a:e;let l=new r(null===i||void 0===i?void 0:i.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),s(n,Object.assign(Object.assign({},i),{headers:l}))})};var Ee=function(e,t,n,s){return new(n||(n=Promise))(function(r,i){function a(e){try{l(s.next(e))}catch(t){i(t)}}function o(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())})};const Pe="2.71.1",Oe=3e4,Ae=9e4,Me={"X-Client-Info":`gotrue-js/${Pe}`},Ie="X-Supabase-Api-Version",Re={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Le=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class De extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function ze(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class $e extends De{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class Fe extends De{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ue extends De{constructor(e,t,n,s){super(e,n,s),this.name=t,this.status=n}}class Be extends Ue{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class We extends Ue{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class He extends Ue{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ve extends Ue{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class qe extends Ue{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ke extends Ue{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ge(e){return ze(e)&&"AuthRetryableFetchError"===e.name}class Ye extends Ue{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Je extends Ue{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Qe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Xe=" \t\n\r=".split(""),Ze=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Xe.length;t+=1)e[Xe[t].charCodeAt(0)]=-2;for(let t=0;t<Qe.length;t+=1)e[Qe[t].charCodeAt(0)]=t;return e})();function et(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Qe[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Qe[e]),t.queuedBits-=6}}function tt(e,t,n){const s=Ze[e];if(!(s>-1)){if(-2===s)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function nt(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},s={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(0===(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,s,n)};for(let a=0;a<e.length;a+=1)tt(e.charCodeAt(a),r,i);return t.join("")}function st(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function rt(e,t){for(let n=0;n<e.length;n+=1){let s=e.charCodeAt(n);if(s>55295&&s<=56319){const t=1024*(s-55296)&65535;s=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}st(s,t)}}function it(e){const t=[],n={queue:0,queuedBits:0},s=e=>{t.push(e)};for(let r=0;r<e.length;r+=1)tt(e.charCodeAt(r),n,s);return new Uint8Array(t)}function at(e){const t=[],n={queue:0,queuedBits:0},s=e=>{t.push(e)};return e.forEach(e=>et(e,n,s)),et(null,n,s),t.join("")}const ot=()=>"undefined"!==typeof window&&"undefined"!==typeof document,lt={tested:!1,writable:!1},ct=()=>{if(!ot())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(lt.tested)return lt.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),lt.tested=!0,lt.writable=!0}catch(t){lt.tested=!0,lt.writable=!1}return lt.writable};const ut=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(n.bind(n,318)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},dt=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},ht=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(s){return n}},ft=async(e,t)=>{await e.removeItem(t)};class pt{constructor(){this.promise=new pt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function gt(e){const t=e.split(".");if(3!==t.length)throw new Je("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Le.test(t[n]))throw new Je("JWT not in base64url format");return{header:JSON.parse(nt(t[0])),payload:JSON.parse(nt(t[1])),signature:it(t[2]),raw:{header:t[0],payload:t[1]}}}function mt(e){return("0"+e.toString(16)).substr(-2)}async function vt(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function bt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let s=0;s<56;s++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,mt).join("")}();let r=s;n&&(r+="/PASSWORD_RECOVERY"),await dt(e,`${t}-code-verifier`,r);const i=await vt(s);return[i,s===i?"plain":"s256"]}pt.promiseConstructor=Promise;const yt=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const xt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wt(e){if(!xt.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function _t(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function kt(e){return JSON.parse(JSON.stringify(e))}var St=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n};const jt=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Nt=[502,503,504];async function Ct(e){var t,n;if(!("object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json))throw new Ke(jt(e),0);if(Nt.includes(e.status))throw new Ke(jt(e),e.status);let s,r;try{s=await e.json()}catch(a){throw new Fe(jt(a),a)}const i=function(e){const t=e.headers.get(Ie);if(!t)return null;if(!t.match(yt))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(a){return null}}(e);if(i&&i.getTime()>=Re.timestamp&&"object"===typeof s&&s&&"string"===typeof s.code?r=s.code:"object"===typeof s&&s&&"string"===typeof s.error_code&&(r=s.error_code),r){if("weak_password"===r)throw new Ye(jt(s),e.status,(null===(t=s.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===r)throw new Be}else if("object"===typeof s&&s&&"object"===typeof s.weak_password&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new Ye(jt(s),e.status,s.weak_password.reasons);throw new $e(jt(s),e.status||500,r)}async function Tt(e,t,n,s){var r;const i=Object.assign({},null===s||void 0===s?void 0:s.headers);i[Ie]||(i[Ie]=Re.name),(null===s||void 0===s?void 0:s.jwt)&&(i.Authorization=`Bearer ${s.jwt}`);const a=null!==(r=null===s||void 0===s?void 0:s.query)&&void 0!==r?r:{};(null===s||void 0===s?void 0:s.redirectTo)&&(a.redirect_to=s.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await async function(e,t,n,s,r,i){const a=((e,t,n,s)=>{const r={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),n))})(t,s,r,i);let o;try{o=await e(n,Object.assign({},a))}catch(l){throw console.error(l),new Ke(jt(l),0)}o.ok||await Ct(o);if(null===s||void 0===s?void 0:s.noResolveJson)return o;try{return await o.json()}catch(l){await Ct(l)}}(e,t,n+o,{headers:i,noResolveJson:null===s||void 0===s?void 0:s.noResolveJson},{},null===s||void 0===s?void 0:s.body);return(null===s||void 0===s?void 0:s.xform)?null===s||void 0===s?void 0:s.xform(l):{data:Object.assign({},l),error:null}}function Et(e){var t;let n=null;var s;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(s=e.expires_in,Math.round(Date.now()/1e3)+s)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Pt(e){const t=Et(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Ot(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function At(e){return{data:e,error:null}}function Mt(e){const{action_link:t,email_otp:n,hashed_token:s,redirect_to:r,verification_type:i}=e,a=St(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:s,redirect_to:r,verification_type:i},user:Object.assign({},a)},error:null}}function It(e){return e}const Rt=["global","local","others"];var Lt=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n};class Dt{constructor(e){let{url:t="",headers:n={},fetch:s}=e;this.url=t,this.headers=n,this.fetch=ut(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rt[0];if(Rt.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Rt.join(", ")}`);try{return await Tt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ze(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await Tt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ot})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=Lt(e,["options"]),s=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(s.new_email=null===n||void 0===n?void 0:n.newEmail,delete s.newEmail),await Tt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Mt,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(ze(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Tt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ot})}catch(t){if(ze(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,s,r,i,a,o;try{const l={nextPage:null,lastPage:0,total:0},c=await Tt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(r=null===(s=null===e||void 0===e?void 0:e.perPage)||void 0===s?void 0:s.toString())&&void 0!==r?r:""},xform:It});if(c.error)throw c.error;const u=await c.json(),d=null!==(i=c.headers.get("x-total-count"))&&void 0!==i?i:0,h=null!==(o=null===(a=c.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(ze(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){wt(e);try{return await Tt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ot})}catch(t){if(ze(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){wt(e);try{return await Tt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ot})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];wt(e);try{return await Tt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Ot})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){wt(e.userId);try{const{data:t,error:n}=await Tt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(ze(t))return{data:null,error:t};throw t}}async _deleteFactor(e){wt(e.userId),wt(e.id);try{return{data:await Tt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ze(t))return{data:null,error:t};throw t}}}function zt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const $t=!!(globalThis&&ct()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Ft extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ut extends Ft{}async function Bt(e,t,n){$t&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),$t&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async s=>{if(!s){if(0===t)throw $t&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Ut(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if($t)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(r){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",r)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}$t&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{$t&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const Wt={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Me,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ht(e,t,n){return await n()}const Vt={};class qt{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=qt.nextInstanceID,qt.nextInstanceID+=1,this.instanceID>0&&ot()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Wt),e);if(this.logDebugMessages=!!s.debug,"function"===typeof s.debug&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Dt({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=ut(s.fetch),this.lock=s.lock||Ht,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ot()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Bt:this.lock=Ht,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:ct()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=zt(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=zt(this.memoryStorage)),ot()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(r){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",r)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=Vt[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Vt[this.storageKey]=Object.assign(Object.assign({},Vt[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Vt[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Vt[this.storageKey]=Object.assign(Object.assign({},Vt[this.storageKey]),{cachedAt:e})}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger(`GoTrueClient@${this.instanceID} (${Pe}) ${(new Date).toISOString()}`,...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(s){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),ot()&&this.detectSessionInUrl&&"none"!==n){const{data:s,error:r}=await this._getSessionFromURL(t,n);if(r){if(this._debug("#_initialize()","error detecting session from URL",r),function(e){return ze(e)&&"AuthImplicitGrantRedirectError"===e.name}(r)){const t=null===(e=r.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:r}}return await this._removeSession(),{error:r}}const{session:i,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ze(t)?{error:t}:{error:new Fe("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,s;try{const r=await Tt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(n=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(s=null===e||void 0===e?void 0:e.options)||void 0===s?void 0:s.captchaToken}},xform:Et}),{data:i,error:a}=r;if(a||!i)return{data:{user:null,session:null},error:a};const o=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(ze(r))return{data:{user:null,session:null},error:r};throw r}}async signUp(e){var t,n,s;try{let r;if("email"in e){const{email:n,password:s,options:i}=e;let a=null,o=null;"pkce"===this.flowType&&([a,o]=await bt(this.storage,this.storageKey)),r=await Tt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo,body:{email:n,password:s,data:null!==(t=null===i||void 0===i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken},code_challenge:a,code_challenge_method:o},xform:Et})}else{if(!("phone"in e))throw new He("You must provide either an email or phone number and a password");{const{phone:t,password:i,options:a}=e;r=await Tt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:i,data:null!==(n=null===a||void 0===a?void 0:a.data)&&void 0!==n?n:{},channel:null!==(s=null===a||void 0===a?void 0:a.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:Et})}}const{data:i,error:a}=r;if(a||!i)return{data:{user:null,session:null},error:a};const o=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(ze(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:s,options:r}=e;t=await Tt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:s,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}},xform:Pt})}else{if(!("phone"in e))throw new He("You must provide either an email or phone number and a password");{const{phone:n,password:s,options:r}=e;t=await Tt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:s,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}},xform:Pt})}}const{data:n,error:s}=t;return s?{data:{user:null,session:null},error:s}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s}):{data:{user:null,session:null},error:new We}}catch(t){if(ze(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,s,r;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(r=e.options)||void 0===r?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,n,s,r,i,a,o,l,c,u,d,h;let f,p;if("message"in e)f=e.message,p=e.signature;else{const{chain:d,wallet:h,statement:g,options:m}=e;let v;if(ot())if("object"===typeof h)v=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!==typeof h||!(null===m||void 0===m?void 0:m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=h}const b=new URL(null!==(t=null===m||void 0===m?void 0:m.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===m||void 0===m?void 0:m.signInWithSolana),{version:"1",domain:b.host,uri:b.href}),g?{statement:g}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in v)||"function"!==typeof v.signMessage||!("publicKey"in v)||"object"!==typeof v||!v.publicKey||!("toBase58"in v.publicKey)||"function"!==typeof v.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=[`${b.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${b.href}`,`Issued At: ${null!==(s=null===(n=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==s?s:(new Date).toISOString()}`,...(null===(r=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===r?void 0:r.notBefore)?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...(null===(i=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===i?void 0:i.expirationTime)?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...(null===(a=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===a?void 0:a.chainId)?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...(null===(o=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...(null===(l=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...(null===(u=null===(c=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...m.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(f),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:n}=await Tt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:at(p)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:Et});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new We}}catch(g){if(ze(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(e){const t=await ht(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:r}=await Tt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Et});if(await ft(this.storage,`${this.storageKey}-code-verifier`),r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==s&&void 0!==s?s:null}),error:r}):{data:{user:null,session:null,redirectType:null},error:new We}}catch(r){if(ze(r))return{data:{user:null,session:null,redirectType:null},error:r};throw r}}async signInWithIdToken(e){try{const{options:t,provider:n,token:s,access_token:r,nonce:i}=e,a=await Tt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:r,nonce:i,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:Et}),{data:o,error:l}=a;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new We}}catch(t){if(ze(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,s,r,i;try{if("email"in e){const{email:s,options:r}=e;let i=null,a=null;"pkce"===this.flowType&&([i,a]=await bt(this.storage,this.storageKey));const{error:o}=await Tt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:null!==(t=null===r||void 0===r?void 0:r.data)&&void 0!==t?t:{},create_user:null===(n=null===r||void 0===r?void 0:r.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken},code_challenge:i,code_challenge_method:a},redirectTo:null===r||void 0===r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:n}=e,{data:a,error:o}=await Tt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(s=null===n||void 0===n?void 0:n.data)&&void 0!==s?s:{},create_user:null===(r=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(i=null===n||void 0===n?void 0:n.channel)&&void 0!==i?i:"sms"}});return{data:{user:null,session:null,messageId:null===a||void 0===a?void 0:a.message_id},error:o}}throw new He("You must provide either an email or phone number.")}catch(a){if(ze(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,n;try{let s,r;"options"in e&&(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo,r=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:i,error:a}=await Tt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:r}}),redirectTo:s,xform:Et});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const o=i.session,l=i.user;return(null===o||void 0===o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if(ze(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,n,s;try{let r=null,i=null;return"pkce"===this.flowType&&([r,i]=await bt(this.storage,this.storageKey)),await Tt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(s=null===e||void 0===e?void 0:e.options)||void 0===s?void 0:s.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:i}),headers:this.headers,xform:At})}catch(r){if(ze(r))return{data:null,error:r};throw r}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Be;const{error:s}=await Tt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(ze(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:r}=e,{error:i}=await Tt(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}},redirectTo:null===r||void 0===r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:n,type:s,options:r}=e,{data:i,error:a}=await Tt(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}}});return{data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:a}}throw new He("You must provide either an email or phone number and a type")}catch(t){if(ze(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await ht(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<Ae;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const t=await ht(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=_t()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,s)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,s))})}return{data:{session:e},error:null}}const{session:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await Tt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ot}):await this._useSession(async e=>{var t,n,s;const{data:r,error:i}=e;if(i)throw i;return(null===(t=r.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Tt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(s=null===(n=r.session)||void 0===n?void 0:n.access_token)&&void 0!==s?s:void 0,xform:Ot}):{data:{user:null},error:new Be}})}catch(t){if(ze(t))return function(e){return ze(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await ft(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async n=>{const{data:s,error:r}=n;if(r)throw r;if(!s.session)throw new Be;const i=s.session;let a=null,o=null;"pkce"===this.flowType&&null!=e.email&&([a,o]=await bt(this.storage,this.storageKey));const{data:l,error:c}=await Tt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:o}),jwt:i.access_token,xform:Ot});if(c)throw c;return i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Be;const t=Date.now()/1e3;let n=t,s=!0,r=null;const{payload:i}=gt(e.access_token);if(i.exp&&(n=i.exp,s=n<=t),s){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};r=t}else{const{data:s,error:i}=await this._getUser(e.access_token);if(i)throw i;r={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(t){if(ze(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:s,error:r}=t;if(r)throw r;e=null!==(n=s.session)&&void 0!==n?n:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new Be;const{session:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{user:null,session:null},error:r}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(ze(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!ot())throw new Ve("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ve(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new qe("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Ve("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new qe("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const s=new URL(window.location.href);return s.searchParams.delete("code"),window.history.replaceState(window.history.state,"",s.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:r,refresh_token:i,expires_in:a,expires_at:o,token_type:l}=e;if(!r||!a||!i||!l)throw new Ve("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(a);let d=c+u;o&&(d=parseInt(o));const h=d-c;1e3*h<=Oe&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${u}s`);const f=d-u;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,d,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,d,c);const{data:p,error:g}=await this._getUser(r);if(g)throw g;const m={provider_token:n,provider_refresh_token:s,access_token:r,expires_in:u,expires_at:d,refresh_token:i,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(n){if(ze(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ht(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var n;const{data:s,error:r}=t;if(r)return{error:r};const i=null===(n=s.session)||void 0===n?void 0:n.access_token;if(i){const{error:t}=await this.admin.signOut(i,e);if(t&&(!function(e){return ze(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await ft(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,s;try{const{data:{session:s},error:r}=t;if(r)throw r;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(r){await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",r),console.error(r)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,s=null;"pkce"===this.flowType&&([n,s]=await bt(this.storage,this.storageKey,!0));try{return await Tt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(r){if(ze(r))return{data:null,error:r};throw r}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(ze(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:s}=await this._useSession(async t=>{var n,s,r,i,a;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:!0});return await Tt(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(a=null===(i=o.session)||void 0===i?void 0:i.access_token)&&void 0!==a?a:void 0})});if(s)throw s;return ot()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),{data:{provider:e.provider,url:null===n||void 0===n?void 0:n.url},error:null}}catch(n){if(ze(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,s;const{data:r,error:i}=t;if(i)throw i;return await Tt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(s=null===(n=r.session)||void 0===n?void 0:n.access_token)&&void 0!==s?s:void 0})})}catch(t){if(ze(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await Tt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Et})),s=(e,t)=>{const n=200*Math.pow(2,e);return t&&Ge(t)&&Date.now()+n-r<Oe},new Promise((e,t)=>{(async()=>{for(let i=0;i<1/0;i++)try{const t=await n(i);if(!s(i,null,t))return void e(t)}catch(r){if(!s(i,r))return void t(r)}})()}))}catch(r){if(this._debug(t,"error",r),ze(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}var n,s}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),ot()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await ht(this.storage,this.storageKey);if(r&&this.userStorage){let t=await ht(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:r.user},await dt(this.userStorage,this.storageKey+"-user",t)),r.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:_t()}else if(r&&!r.user&&!r.user){const e=await ht(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(r.user=e.user,await ft(this.storage,this.storageKey+"-user"),await dt(this.storage,this.storageKey,r)):r.user=_t()}if(this._debug(n,"session from storage",r),!this._isValidSession(r))return this._debug(n,"session is not valid"),void(null!==r&&await this._removeSession());const i=1e3*(null!==(t=r.expires_at)&&void 0!==t?t:1/0)-Date.now()<Ae;if(this._debug(n,`session has${i?"":" not"} expired with margin of 90000s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:e}=await this._callRefreshToken(r.refresh_token);e&&(console.error(e),Ge(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(r.user&&!0===r.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(r.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(r.user=e.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(n,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){return this._debug(n,"error",r),void console.error(r)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Be;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new pt;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new Be;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const s={session:t.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(r){if(this._debug(s,"error",r),ze(r)){const e={session:null,error:r};return Ge(r)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(r),r}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],r=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(r){s.push(r)}});if(await Promise.all(r),s.length>0){for(let e=0;e<s.length;e+=1)console.error(s[e]);throw s[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await dt(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const s=kt(e);await dt(this.storage,this.storageKey,s)}else{const e=kt(t);await dt(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await ft(this.storage,this.storageKey),await ft(this.storage,this.storageKey+"-code-verifier"),await ft(this.storage,this.storageKey+"-user"),this.userStorage&&await ft(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ot()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Oe);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const s=Math.floor((1e3*n.expires_at-t)/Oe);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),s<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof Ft))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ot()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const s=[`provider=${encodeURIComponent(t)}`];if((null===n||void 0===n?void 0:n.redirectTo)&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null===n||void 0===n?void 0:n.scopes)&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const[e,t]=await bt(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});s.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);s.push(e.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:s,error:r}=t;return r?{data:null,error:r}:await Tt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null===s||void 0===s?void 0:s.session)||void 0===n?void 0:n.access_token})})}catch(t){if(ze(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,s;const{data:r,error:i}=t;if(i)return{data:null,error:i};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await Tt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(s=null===o||void 0===o?void 0:o.totp)||void 0===s?void 0:s.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(ze(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:r}=t;if(r)return{data:null,error:r};const{data:i,error:a}=await Tt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null===s||void 0===s?void 0:s.session)||void 0===n?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})})}catch(t){if(ze(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:r}=t;return r?{data:null,error:r}:await Tt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null===s||void 0===s?void 0:s.session)||void 0===n?void 0:n.access_token})})}catch(t){if(ze(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null===e||void 0===e?void 0:e.factors)||[],s=n.filter(e=>"totp"===e.factor_type&&"verified"===e.status),r=n.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:n,totp:s,phone:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:s},error:r}=e;if(r)return{data:null,error:r};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=gt(s.access_token);let a=null;i.aal&&(a=i.aal);let o=a;(null!==(n=null===(t=s.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(o="aal2");return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:i.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const n=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>n)return t;const{data:s,error:r}=await Tt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(r)throw r;return s.keys&&0!==s.keys.length?(this.jwks=s,this.jwks_cached_at=n,t=s.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:s,payload:r,signature:i,raw:{header:a,payload:o}}=gt(n);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(r.exp);const l=s.alg&&!s.alg.startsWith("HS")&&s.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(s.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:r,header:s,signature:i},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(s.alg),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,u,i,function(e){const t=[];return rt(e,e=>t.push(e)),new Uint8Array(t)}(`${a}.${o}`)))throw new Je("Invalid JWT signature");return{data:{claims:r,header:s,signature:i},error:null}}catch(n){if(ze(n))return{data:null,error:n};throw n}}}qt.nextInstanceID=0;const Kt=qt;class Gt extends Kt{constructor(e){super(e)}}var Yt=function(e,t,n,s){return new(n||(n=Promise))(function(r,i){function a(e){try{l(s.next(e))}catch(t){i(t)}}function o(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())})};class Jt{constructor(e,t,n){var s,r,i;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=(o=e).endsWith("/")?o:o+"/";var o;const l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u=function(e,t){var n,s;const{db:r,auth:i,realtime:a,global:o}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),r),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),a),storage:{},global:Object.assign(Object.assign(Object.assign({},d),o),{headers:Object.assign(Object.assign({},null!==(n=null===d||void 0===d?void 0:d.headers)&&void 0!==n?n:{}),null!==(s=null===o||void 0===o?void 0:o.headers)&&void 0!==s?s:{})}),accessToken:()=>Ee(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==n&&void 0!==n?n:{},{db:_e,realtime:Se,auth:Object.assign(Object.assign({},ke),{storageKey:c}),global:we});this.storageKey=null!==(s=u.auth.storageKey)&&void 0!==s?s:"",this.headers=null!==(r=u.global.headers)&&void 0!==r?r:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(i=u.auth)&&void 0!==i?i:{},this.headers,u.global.fetch),this.fetch=Te(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new d(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new ye(this.storageUrl.href,this.headers,this.fetch,null===n||void 0===n?void 0:n.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new c(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Yt(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:s,persistSession:r,detectSessionInUrl:i,storage:a,storageKey:o,flowType:l,lock:c,debug:u}=e;const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Gt({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),t),storageKey:o,autoRefreshToken:s,persistSession:r,detectSessionInUrl:i,storage:a,flowType:l,lock:c,debug:u,fetch:n,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Y(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}(function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof process)return!1;const e=process.version;if(void 0===e||null===e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Qt={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SUPABASE_URL,Xt={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SUPABASE_ANON_KEY;Qt&&Xt||console.error("Supabase environment variables not set. Please add REACT_APP_SUPABASE_URL and REACT_APP_SUPABASE_ANON_KEY to your environment.");const Zt=((e,t,n)=>new Jt(e,t,n))(Qt,Xt),en="/api",tn=async()=>{const{data:{session:e}}=await Zt.auth.getSession(),t=null===e||void 0===e?void 0:e.access_token;return t?{"Content-Type":"application/json",Authorization:`Bearer ${t}`}:(console.error("No auth token found for API request."),{"Content-Type":"application/json"})},nn=async e=>{try{const t=await fetch(`${en}/institutions/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){return console.error("Failed to search for institutions:",t),{data:[],pagination:{}}}},sn=async e=>{if(!e)return null;try{const t=await fetch(`${en}/institutions/${e}`);if(!t.ok){if(404===t.status)return null;throw new Error(`HTTP error! status: ${t.status}`)}return await t.json()}catch(t){return console.error(`Failed to fetch institution ${e}:`,t),null}},rn=async(e,t)=>{try{const n=await fetch(`${en}/rag/query`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:e,history:t})});if(!n.ok)throw new Error("Failed to fetch RAG results");return await n.json()}catch(n){return console.error("RAG service error:",n),{answer:"I'm sorry, but I'm having trouble connecting to my knowledge base right now."}}},an=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const n=await fetch(`${en}/scholarships/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentProfile:e,...t})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(n){return console.error("Failed to search scholarships:",n),{scholarships:[]}}},on=async()=>{try{const e=await fetch(`${en}/scholarships/stats`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){return console.error("Failed to get scholarship stats:",e),{totalScholarships:0,totalAmount:0,averageAmount:0}}},ln=async e=>{try{const t=await fetch(`${en}/scholarships/recommendations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentProfile:e})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){return console.error("Failed to get scholarship recommendations:",t),{recommendations:[]}}},cn=async()=>{try{const e=await fetch(`${en}/scholarships/categories`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){return console.error("Failed to get scholarship categories:",e),{categories:[]}}},un=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;try{const t=await fetch(`${en}/scholarships/deadlines?days=${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){return console.error("Failed to get upcoming deadlines:",t),{upcoming_deadlines:[]}}};var dn=n(507);const hn=(0,e.createContext)(null),fn=t=>{let{children:n}=t;const[s,r]=(0,e.useState)(null),[i,a]=(0,e.useState)(null),[o,l]=(0,e.useState)(!0),[c,u]=(0,e.useState)(!1);(0,e.useEffect)(()=>{(async()=>{var e;const{data:{session:t}}=await Zt.auth.getSession();r(null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:null),l(!1)})();const{data:{subscription:e}}=Zt.auth.onAuthStateChange((e,t)=>{var n;r(null!==(n=null===t||void 0===t?void 0:t.user)&&void 0!==n?n:null),l(!1)});return()=>e.unsubscribe()},[]),(0,e.useEffect)(()=>{(async()=>{if(s)try{var e;let i=await(async e=>{try{const t=await tn(),n=await fetch(`${en}/profile/${e}`,{headers:t});if(404===n.status)return null;if(!n.ok)throw new Error("Failed to fetch profile");return await n.json()}catch(t){throw console.error(t),t}})(s.id);if(!i){var t,n,r;const e={email:s.email,fullName:null===(t=s.user_metadata)||void 0===t?void 0:t.full_name,avatarUrl:null===(n=s.user_metadata)||void 0===n?void 0:n.avatar_url,provider:(null===(r=s.app_metadata)||void 0===r?void 0:r.provider)||"email"};i=await(async(e,t)=>{try{const n=await tn(),s=await fetch(`${en}/profile`,{method:"POST",headers:n,body:JSON.stringify({userId:e,profileData:t})});if(!s.ok)throw new Error("Failed to create profile");return await s.json()}catch(n){throw console.error(n),n}})(s.id,e)}a(i),u(!(null===(e=i)||void 0===e||!e.gpa))}catch(i){console.error("Error managing user profile:",i),a(null),u(!1)}else a(null),u(!1)})()},[s]);const d={user:s,profile:i,setProfile:a,isProfileComplete:c,setIsProfileComplete:u,loading:o,signIn:e=>Zt.auth.signInWithPassword(e),signUp:e=>Zt.auth.signUp(e),signOut:()=>Zt.auth.signOut(),signInWithGoogle:()=>Zt.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}})};return(0,dn.jsx)(hn.Provider,{value:d,children:!o&&n})},pn=()=>(0,e.useContext)(hn),gn=()=>{const{user:t,logout:n}=(0,e.useContext)(hn);return(0,dn.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,dn.jsx)("div",{className:"container mx-auto px-6 py-4 flex justify-end items-center",children:t&&(0,dn.jsxs)("div",{className:"flex items-center",children:[(0,dn.jsxs)("span",{className:"text-gray-600 mr-4",children:["Welcome, ",t.name]}),(0,dn.jsx)("button",{onClick:n,className:"bg-red-500 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-red-600 transition-colors",children:"Logout"})]})})})},mn=e=>{let{activeView:t,setView:n}=e;return(0,dn.jsxs)("div",{className:"w-64 bg-white shadow-md border-r border-gray-200 flex-col hidden lg:flex",children:[(0,dn.jsx)("div",{className:"p-6",children:(0,dn.jsxs)("div",{className:"flex items-center gap-2",children:[(0,dn.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:(0,dn.jsx)("span",{className:"text-white font-bold text-lg",children:"S"})}),(0,dn.jsx)("span",{className:"text-2xl font-bold text-blue-600",children:"Scholargy"})]})}),(0,dn.jsx)("nav",{className:"flex-1 px-4 py-2 space-y-2",children:[{name:"Dashboard",view:"dashboard",icon:"\ud83c\udfe0"},{name:"Student Profile",view:"studentProfile",icon:"\ud83d\udc64"},{name:"Scholarships",view:"scholarships",icon:"\ud83c\udf93"},{name:"StudentVue",view:"studentVue",icon:"\ud83d\udd17"},{name:"Compare Colleges",view:"compare",icon:"\ud83d\udcca"}].map(e=>(0,dn.jsxs)("button",{onClick:()=>n(e.view),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left transition-colors "+(t===e.view?"bg-blue-50 text-blue-600 font-semibold":"text-gray-600 hover:bg-gray-100"),children:[(0,dn.jsx)("span",{className:"text-xl",children:e.icon}),(0,dn.jsx)("span",{children:e.name})]},e.name))})]})},vn=e=>{let{children:t,activeView:n,setView:s}=e;return(0,dn.jsxs)("div",{className:"min-h-screen bg-gray-100 font-sans text-gray-800 flex",children:[(0,dn.jsx)(mn,{activeView:n,setView:s}),(0,dn.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,dn.jsx)(gn,{}),(0,dn.jsxs)("main",{className:"flex-1 p-6 lg:p-8",children:[t," "]})]})]})},bn=()=>{const[t,n]=(0,e.useState)(""),[s,r]=(0,e.useState)(""),[i,a]=(0,e.useState)(""),{login:o}=(0,e.useContext)(hn);return(0,dn.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 font-sans p-4",children:(0,dn.jsx)("div",{className:"w-full max-w-md",children:(0,dn.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-lg text-center",children:[(0,dn.jsx)("h1",{className:"text-4xl font-extrabold text-blue-600 mb-2",children:"Scholargy"}),(0,dn.jsx)("p",{className:"text-gray-500 mb-8",children:"Your Personal College & Career Advisor"}),(0,dn.jsxs)("form",{onSubmit:e=>{e.preventDefault(),"password"===s&&t?(a(""),o(t)):a('Invalid credentials. Please use any username and the password "password".')},className:"space-y-6",children:[(0,dn.jsx)("input",{type:"text",placeholder:"Username",value:t,onChange:e=>n(e.target.value),className:"w-full p-4 bg-gray-100 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),(0,dn.jsx)("input",{type:"password",placeholder:"Password",value:s,onChange:e=>r(e.target.value),className:"w-full p-4 bg-gray-100 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),i&&(0,dn.jsx)("p",{className:"text-red-500 text-sm text-left",children:i}),(0,dn.jsx)("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition-transform transform hover:scale-105",children:"Secure Login"}),(0,dn.jsx)("p",{className:"text-xs text-gray-400 pt-2",children:"Hint: The password is `password`"})]})]})})})},yn=t=>{let{onSelectCollege:n,setView:s,studentProfile:r}=t;const[i,a]=(0,e.useState)(""),[o,l]=(0,e.useState)(null),[c,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)({}),[f,p]=(0,e.useState)([]),[g,m]=(0,e.useState)(""),[v,b]=(0,e.useState)(!1),[y,x]=(0,e.useState)({}),[w,_]=(0,e.useState)([]),k=(0,e.useRef)(null);(0,e.useEffect)(()=>{k.current&&(k.current.scrollTop=k.current.scrollHeight)},[f]),(0,e.useEffect)(()=>{r&&(async()=>{try{const[e,t]=await Promise.all([on(),un(30)]);x(e.stats||{}),_(t.upcoming_deadlines||[])}catch(e){console.error("Error loading scholarship data:",e)}})()},[r]);(0,e.useEffect)(()=>{(async()=>{if(!o||0===o.length||!r)return;const e=o.map(e=>e.unitid),t=await(async(e,t)=>{try{const n=await fetch(`${en}/probability/calculate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentProfile:e,collegeIds:t})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(n){return console.error("Failed to calculate probabilities:",n),{results:[]}}})(r,e),n=(t.results||[]).reduce((e,t)=>(e[t.unitid]=t,e),{});h(n)})()},[o,r]);const S=async e=>{m(e);const t=[...f,{role:"user",content:e}];p(t),m(""),b(!0);try{const t=await rn(e);if(!t.answer)throw new Error("No answer received from RAG service");p(e=>[...e,{role:"assistant",content:t.answer}])}catch(n){console.error("Failed to get RAG answer:",n),p(e=>[...e,{role:"assistant",content:"I'm here to help with your college and scholarship questions! Try asking about scholarships, application deadlines, essay requirements, or finding the right college for you."}])}finally{b(!1)}};return(0,dn.jsxs)("div",{className:"space-y-6",children:[(0,dn.jsx)("div",{className:"bg-blue-600 text-white p-6 rounded-xl",children:(0,dn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dn.jsxs)("div",{children:[(0,dn.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Welcome to Scholargy! \ud83d\ude80"}),(0,dn.jsx)("p",{className:"text-blue-100",children:"Your gateway to discovering scholarships, college opportunities, and academic success. Let's find your perfect path!"})]}),(0,dn.jsx)("div",{className:"text-4xl",children:"\ud83c\udf93"})]})}),(0,dn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-3 gap-4",children:[(0,dn.jsx)("div",{onClick:()=>s("studentProfile"),className:"bg-white p-4 rounded-xl shadow-sm border hover:shadow-lg cursor-pointer transition-all",children:(0,dn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,dn.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,dn.jsx)("span",{className:"text-xl",children:"\ud83d\udc64"})}),(0,dn.jsxs)("div",{children:[(0,dn.jsx)("h3",{className:"font-semibold text-gray-900",children:"Student Profile"}),(0,dn.jsx)("p",{className:"text-xs text-gray-500",children:"Manage your academic info"})]})]})}),(0,dn.jsx)("div",{onClick:()=>s("studentVue"),className:"bg-white p-4 rounded-xl shadow-sm border hover:shadow-lg cursor-pointer transition-all",children:(0,dn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,dn.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:(0,dn.jsx)("span",{className:"text-xl",children:"\ud83d\udcca"})}),(0,dn.jsxs)("div",{children:[(0,dn.jsx)("h3",{className:"font-semibold text-gray-900",children:"StudentVue"}),(0,dn.jsx)("p",{className:"text-xs text-gray-500",children:"View your grades"})]})]})}),(0,dn.jsx)("div",{onClick:()=>s("compare"),className:"bg-white p-4 rounded-xl shadow-sm border hover:shadow-lg cursor-pointer transition-all",children:(0,dn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,dn.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,dn.jsx)("span",{className:"text-xl",children:"\ud83c\udfeb"})}),(0,dn.jsxs)("div",{children:[(0,dn.jsx)("h3",{className:"font-semibold text-gray-900",children:"Compare Colleges"}),(0,dn.jsx)("p",{className:"text-xs text-gray-500",children:"Find your perfect match"})]})]})})]}),(0,dn.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[(0,dn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,dn.jsxs)("div",{children:[(0,dn.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Ask Scholargy AI"}),(0,dn.jsx)("p",{className:"text-sm text-gray-500",children:"Get personalized scholarship and college guidance"})]}),(0,dn.jsxs)("div",{className:"flex space-x-4 text-sm",children:[(0,dn.jsxs)("div",{className:"text-center",children:[(0,dn.jsx)("div",{className:"font-bold text-gray-800",children:"18"}),(0,dn.jsx)("div",{className:"text-gray-500",children:"Active Apps"})]}),(0,dn.jsxs)("div",{className:"text-center",children:[(0,dn.jsx)("div",{className:"font-bold text-gray-800",children:"$45K"}),(0,dn.jsx)("div",{className:"text-gray-500",children:"Potential Aid"})]})]})]}),(0,dn.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[(0,dn.jsx)("button",{onClick:()=>S("What scholarships are available for my academic level and interests?"),className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm hover:bg-gray-200 transition-colors cursor-pointer",children:"Ask about scholarships, deadlines, or college requirements..."}),(0,dn.jsx)("button",{onClick:()=>S("Find STEM scholarships for students with my background"),className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm hover:bg-gray-200 transition-colors cursor-pointer",children:"Find STEM scholarships"}),(0,dn.jsx)("button",{onClick:()=>S("What are the upcoming application deadlines I should know about?"),className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm hover:bg-gray-200 transition-colors cursor-pointer",children:"Application deadlines"}),(0,dn.jsx)("button",{onClick:()=>S("What are the essay requirements for college applications?"),className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm hover:bg-gray-200 transition-colors cursor-pointer",children:"Essay requirements"}),(0,dn.jsx)("button",{onClick:()=>S("What merit aid opportunities are available for students like me?"),className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm hover:bg-gray-200 transition-colors cursor-pointer",children:"Merit aid opportunities"}),(0,dn.jsx)("button",{onClick:()=>m(""),className:"bg-purple-600 text-white px-4 py-1 rounded-full text-sm hover:bg-purple-700 transition-colors cursor-pointer",children:"Clear"})]}),(0,dn.jsxs)("div",{className:"space-y-4",children:[(0,dn.jsx)("div",{ref:k,className:"h-48 overflow-y-auto border border-gray-200 rounded-lg p-4 bg-gray-50",children:0===f.length?(0,dn.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,dn.jsx)("div",{className:"mb-4",children:(0,dn.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:(0,dn.jsx)("span",{className:"text-blue-600 text-xl",children:"\ud83c\udf93"})})}),(0,dn.jsx)("p",{className:"text-sm font-medium mb-2",children:"Welcome to Scholargy AI!"}),(0,dn.jsx)("p",{className:"text-xs text-gray-400 mb-4",children:"I'm here to help with your college and scholarship questions."}),(0,dn.jsxs)("div",{className:"text-xs text-gray-400 space-y-1",children:[(0,dn.jsx)("p",{children:"\u2022 Ask about scholarships and deadlines"}),(0,dn.jsx)("p",{children:"\u2022 Get college application advice"}),(0,dn.jsx)("p",{children:"\u2022 Find financial aid opportunities"})]})]}):(0,dn.jsxs)("div",{className:"space-y-3",children:[f.map((e,t)=>(0,dn.jsx)("div",{className:"flex "+("user"===e.role?"justify-end":"justify-start"),children:(0,dn.jsx)("div",{className:"max-w-xs lg:max-w-md px-3 py-2 rounded-lg text-sm "+("user"===e.role?"bg-blue-600 text-white":"bg-white border border-gray-200 text-gray-800"),children:(0,dn.jsx)("p",{children:e.content})})},t)),v&&(0,dn.jsx)("div",{className:"flex justify-start",children:(0,dn.jsxs)("div",{className:"bg-white border border-gray-200 text-gray-800 px-3 py-2 rounded-lg text-sm flex items-center space-x-2",children:[(0,dn.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),(0,dn.jsx)("p",{children:"Thinking..."})]})})]})}),(0,dn.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!g.trim())return;const t=[...f,{role:"user",content:g}];p(t),m(""),b(!0);try{const e=await rn(g);if(!e.answer)throw new Error("No answer received from RAG service");p(t=>[...t,{role:"assistant",content:e.answer}])}catch(n){console.error("Failed to get RAG answer:",n),p(e=>[...e,{role:"assistant",content:"I'm here to help with your college and scholarship questions! Try asking about scholarships, application deadlines, essay requirements, or finding the right college for you."}])}finally{b(!1)}},className:"flex space-x-2",children:[(0,dn.jsx)("input",{type:"text",value:g,onChange:e=>m(e.target.value),placeholder:"Ask about college admissions, financial aid, or finding the right school...",className:"flex-1 p-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",disabled:v}),(0,dn.jsx)("button",{type:"submit",disabled:v||!g.trim(),className:"bg-blue-600 text-white px-4 py-3 rounded-lg font-semibold hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-sm",children:v?"Sending...":"Send"})]})]})]}),(0,dn.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[(0,dn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,dn.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"AI Recommendations Summary"}),(0,dn.jsx)("button",{onClick:()=>{const e=`AI Recommendations Report\n\nGenerated on: ${(new Date).toLocaleDateString()}\n\nBased on your profile and recent interactions, here are your personalized recommendations:\n\n1. Focus on maintaining strong academic performance\n2. Consider applying to a mix of reach, target, and safety schools\n3. Highlight your extracurricular activities in applications\n\nFor detailed analysis, visit your Student Profile page.`,t=new Blob([e],{type:"text/plain"}),n=URL.createObjectURL(t),s=document.createElement("a");s.href=n,s.download="ai-recommendations.txt",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-blue-700 transition-colors",children:"Download Report"})]}),(0,dn.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg",children:(0,dn.jsx)("p",{className:"text-gray-700 text-sm",children:"Based on your current profile, our AI recommends focusing on maintaining your strong academic performance while highlighting your extracurricular activities. Consider applying to a balanced mix of reach, target, and safety schools to maximize your admission chances."})})]}),(0,dn.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[(0,dn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,dn.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Scholarship Progress"}),(0,dn.jsx)("button",{onClick:()=>s("scholarships"),className:"text-blue-600 text-sm hover:underline font-semibold",children:"View All Scholarships \u2192"})]}),(0,dn.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,dn.jsxs)("div",{className:"text-center",children:[(0,dn.jsx)("div",{className:"w-16 h-16 mx-auto mb-2 rounded-full bg-green-100 flex items-center justify-center",children:(0,dn.jsxs)("span",{className:"text-green-600 font-bold text-lg",children:["$",y.total_value?(y.total_value/1e6).toFixed(1)+"M":"0"]})}),(0,dn.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:"Total Value"}),(0,dn.jsx)("p",{className:"text-xs text-gray-500",children:"Available"})]}),(0,dn.jsxs)("div",{className:"text-center",children:[(0,dn.jsx)("div",{className:"w-16 h-16 mx-auto mb-2 rounded-full bg-blue-100 flex items-center justify-center",children:(0,dn.jsx)("span",{className:"text-blue-600 font-bold text-lg",children:y.total_scholarships||0})}),(0,dn.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:"Scholarships"}),(0,dn.jsx)("p",{className:"text-xs text-gray-500",children:"Available"})]}),(0,dn.jsxs)("div",{className:"text-center",children:[(0,dn.jsx)("div",{className:"w-16 h-16 mx-auto mb-2 rounded-full bg-red-100 flex items-center justify-center",children:(0,dn.jsx)("span",{className:"text-red-600 font-bold text-lg",children:w.filter(e=>"critical"===e.urgency_level).length})}),(0,dn.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:"Urgent"}),(0,dn.jsx)("p",{className:"text-xs text-gray-500",children:"Deadlines"})]}),(0,dn.jsxs)("div",{className:"text-center",children:[(0,dn.jsx)("div",{className:"w-16 h-16 mx-auto mb-2 rounded-full bg-purple-100 flex items-center justify-center",children:(0,dn.jsx)("span",{className:"text-purple-600 font-bold text-lg",children:y.avg_amount?Math.round(y.avg_amount):0})}),(0,dn.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:"Avg Award"}),(0,dn.jsx)("p",{className:"text-xs text-gray-500",children:"Amount"})]})]}),(0,dn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,dn.jsx)("button",{onClick:()=>s("scholarships"),className:"bg-blue-600 text-white p-4 rounded-lg hover:bg-blue-700 transition-colors",children:(0,dn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,dn.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:(0,dn.jsx)("span",{className:"text-white text-sm",children:"\ud83c\udfaf"})}),(0,dn.jsxs)("div",{className:"text-left",children:[(0,dn.jsx)("p",{className:"font-semibold",children:"Smart Matching"}),(0,dn.jsx)("p",{className:"text-xs text-blue-100",children:"Find your perfect matches"})]})]})}),(0,dn.jsx)("button",{onClick:()=>s("scholarships"),className:"bg-green-600 text-white p-4 rounded-lg hover:bg-green-700 transition-colors",children:(0,dn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,dn.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:(0,dn.jsx)("span",{className:"text-white text-sm",children:"\u23f0"})}),(0,dn.jsxs)("div",{className:"text-left",children:[(0,dn.jsx)("p",{className:"font-semibold",children:"Deadlines"}),(0,dn.jsx)("p",{className:"text-xs text-green-100",children:"Urgent applications"})]})]})}),(0,dn.jsx)("button",{onClick:()=>s("scholarships"),className:"bg-purple-600 text-white p-4 rounded-lg hover:bg-purple-700 transition-colors",children:(0,dn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,dn.jsx)("div",{className:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center",children:(0,dn.jsx)("span",{className:"text-white text-sm",children:"\ud83d\udcca"})}),(0,dn.jsxs)("div",{className:"text-left",children:[(0,dn.jsx)("p",{className:"font-semibold",children:"Categories"}),(0,dn.jsx)("p",{className:"text-xs text-purple-100",children:"Browse by type"})]})]})})]})]}),(0,dn.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[(0,dn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,dn.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"College Search"}),(0,dn.jsx)("button",{onClick:()=>s("institutions"),className:"text-blue-600 text-sm hover:underline bg-transparent border-none cursor-pointer",children:"View All"})]}),(0,dn.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),u(!0);const t=await nn({filters:{"general_info.name":{$regex:i,$options:"i"}}});l(t.data),u(!1)},className:"flex mb-6",children:[(0,dn.jsx)("input",{type:"text",value:i,onChange:e=>a(e.target.value),placeholder:"Search by name, location, or major...",className:"flex-1 p-3 bg-gray-100 border border-gray-200 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,dn.jsx)("button",{type:"submit",className:"bg-blue-600 text-white font-semibold px-6 py-3 rounded-r-lg hover:bg-blue-700 disabled:bg-gray-400",disabled:c,children:c?"Searching...":"Search"})]}),c&&(0,dn.jsx)("div",{className:"text-center py-4 text-gray-500",children:"Loading results..."}),!c&&o&&0===o.length&&(0,dn.jsx)("div",{className:"text-center text-gray-500 py-4",children:"No institutions found."}),(0,dn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o&&o.map(e=>{const t=d[e.unitid],s="safety"===(null===t||void 0===t?void 0:t.category)?"bg-green-100 text-green-800":"target"===(null===t||void 0===t?void 0:t.category)?"bg-yellow-100 text-yellow-800":"reach"===(null===t||void 0===t?void 0:t.category)?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800";return(0,dn.jsxs)("div",{className:"p-5 bg-white border rounded-xl shadow-sm hover:shadow-lg cursor-pointer transition-all",onClick:()=>n(e.unitid),children:[(0,dn.jsxs)("div",{className:"flex justify-between items-start",children:[(0,dn.jsx)("h3",{className:"font-bold text-lg text-gray-900",children:e.general_info.name}),t&&(0,dn.jsxs)("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${s}`,children:[t.probability,"%"]})]}),(0,dn.jsxs)("p",{className:"text-sm text-gray-500",children:[e.general_info.city,", ",e.general_info.state]})]},e.unitid)})})]}),(0,dn.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[(0,dn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,dn.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"AI Assistant Updates"}),(0,dn.jsx)("button",{onClick:()=>s("rag"),className:"text-blue-600 text-sm hover:underline bg-transparent border-none cursor-pointer",children:"View All"})]}),(0,dn.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,dn.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:(0,dn.jsx)("span",{className:"text-red-600 font-bold text-sm",children:"MA"})}),(0,dn.jsxs)("div",{className:"flex-1",children:[(0,dn.jsxs)("p",{className:"text-sm text-gray-800",children:[(0,dn.jsx)("span",{className:"font-semibold",children:"AI Counselor Maya:"})," Great! I just reviewed your essay draft..."]}),(0,dn.jsx)("p",{className:"text-xs text-gray-500",children:"09:34 am"})]})]})]})]})},xn=e=>{let{label:t,type:n="text",name:s,value:r,onChange:i,placeholder:a,error:o,readOnly:l=!1}=e;return(0,dn.jsxs)("div",{children:[(0,dn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,dn.jsx)("input",{type:n,name:s,value:r,onChange:i,placeholder:a,readOnly:l,className:`w-full p-3 bg-gray-100 border rounded-lg focus:outline-none focus:ring-2 ${o?"border-red-500 ring-red-500":"border-gray-200 focus:ring-blue-500"} ${l?"cursor-not-allowed bg-gray-200":""}`}),o&&(0,dn.jsx)("p",{className:"text-xs text-red-600 mt-1",children:o})]})},wn=e=>{let{label:t,name:n,value:s,onChange:r,placeholder:i,rows:a=3}=e;return(0,dn.jsxs)("div",{children:[(0,dn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,dn.jsx)("textarea",{name:n,value:s,onChange:r,placeholder:i,rows:a,className:"w-full p-3 bg-gray-100 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})},_n=()=>{const[t,n]=(0,e.useState)({gradeLevel:"12",gpa:"3.8",satScore:"1450",actScore:"",apClasses:"AP Biology, AP Calculus AB, AP US History",extracurriculars:"Debate Club president, Varsity Soccer, Robotics Team"}),[s,r]=(0,e.useState)({}),[i,a]=(0,e.useState)(""),[o,l]=(0,e.useState)(""),[c,u]=(0,e.useState)(!1);(0,e.useEffect)(()=>{a((()=>{if(!t.gradeLevel)return"";const e=(new Date).getFullYear(),n=(new Date).getMonth();return`May ${e+(12-parseInt(t.gradeLevel,10))+(n>4?1:0)}`})())},[t.gradeLevel]);const d=e=>{const{name:t,value:r}=e.target;n(e=>({...e,[t]:r})),s[t]&&h(t,r)},h=(e,t)=>{let n="";return"gpa"===e&&t&&(t<0||t>4)&&(n="GPA must be between 0.0 and 4.0."),"satScore"===e&&t&&(t<400||t>1600)&&(n="SAT score must be between 400 and 1600."),"actScore"===e&&t&&(t<1||t>36)&&(n="ACT score must be between 1 and 36."),r(t=>({...t,[e]:n})),!n};return(0,dn.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8",children:[(0,dn.jsxs)("div",{className:"text-center",children:[(0,dn.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Snapshot Readiness Assessment"}),(0,dn.jsx)("p",{className:"text-gray-500 mt-2",children:"Enter your profile details to get an AI-powered analysis."})]}),(0,dn.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,dn.jsxs)("div",{className:"space-y-6",children:[(0,dn.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[(0,dn.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"\ud83c\udf93 Academic Basics"}),(0,dn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,dn.jsxs)("div",{children:[(0,dn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grade Level"}),(0,dn.jsxs)("select",{name:"gradeLevel",value:t.gradeLevel,onChange:d,className:"w-full p-3 bg-gray-100 border border-gray-200 rounded-lg",children:[(0,dn.jsx)("option",{value:"9",children:"9th Grade"}),(0,dn.jsx)("option",{value:"10",children:"10th Grade"}),(0,dn.jsx)("option",{value:"11",children:"11th Grade"}),(0,dn.jsx)("option",{value:"12",children:"12th Grade"})]})]}),(0,dn.jsx)(xn,{label:"Expected Graduation",name:"gradDate",value:i,readOnly:!0}),(0,dn.jsx)(xn,{label:"Cumulative GPA",type:"number",name:"gpa",value:t.gpa,onChange:d,placeholder:"e.g., 3.85",error:s.gpa}),(0,dn.jsx)(xn,{label:"SAT Score",type:"number",name:"satScore",value:t.satScore,onChange:d,placeholder:"e.g., 1450",error:s.satScore}),(0,dn.jsx)(xn,{label:"ACT Score",type:"number",name:"actScore",value:t.actScore,onChange:d,placeholder:"e.g., 32",error:s.actScore})]})]}),(0,dn.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[(0,dn.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"\ud83c\udfc6 Activities & Coursework"}),(0,dn.jsx)(wn,{label:"AP Classes",name:"apClasses",value:t.apClasses,onChange:d,placeholder:"e.g., AP Biology, AP Calculus AB"}),(0,dn.jsx)("div",{className:"mt-4"}),(0,dn.jsx)(wn,{label:"Extracurriculars & Leadership",name:"extracurriculars",value:t.extracurriculars,onChange:d,placeholder:"e.g., Debate Club President, Varsity Soccer"})]}),(0,dn.jsx)("button",{onClick:async()=>{if(!["gpa","satScore","actScore"].every(e=>h(e,t[e])))return void alert("Please fix the errors before assessing.");u(!0),l("");const e=await(async e=>{try{const t=await tn(),n=await fetch(`${en}/profile/assessment/${e}`,{headers:t});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(t){return console.error("Failed to get profile assessment:",t),{assessment:null}}})(t);l(e.assessmentText),u(!1)},disabled:c,className:"w-full bg-blue-600 text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-blue-700 transition-all disabled:bg-gray-400",children:c?"Assessing...":"Assess My Readiness"})]}),(0,dn.jsx)("div",{className:"space-y-6",children:(c||o)&&(0,dn.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[(0,dn.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"AI Readiness Assessment"}),c?(0,dn.jsx)("p",{className:"text-gray-500 animate-pulse",children:"Generating your assessment..."}):(0,dn.jsx)("div",{className:"prose prose-sm max-w-none text-gray-700 whitespace-pre-wrap",children:o}),!c&&o&&(0,dn.jsx)("div",{className:"flex justify-end mt-4",children:(0,dn.jsx)("button",{onClick:()=>alert("This would generate and download a PDF report."),className:"bg-green-600 text-white font-semibold py-2 px-4 rounded-lg text-sm hover:bg-green-700",children:"Download Report"})})]})})]})]})},kn=e=>{let{scholarship:t,setSelectedScholarship:n}=e;return(0,dn.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border hover:shadow-lg transition-shadow",children:[(0,dn.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,dn.jsx)("h3",{className:"font-bold text-lg text-gray-900 line-clamp-2",children:t.title}),(0,dn.jsxs)("div",{className:"flex space-x-2",children:[t.fit_score&&(0,dn.jsxs)("span",{className:"text-xs font-semibold px-2 py-1 rounded-full "+(r=t.fit_score,r>=80?"text-green-600 bg-green-100":r>=60?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100"),children:[t.fit_score,"% Match"]}),t.urgency_level&&(0,dn.jsx)("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${(e=>{switch(e){case"critical":return"text-red-600 bg-red-100";case"urgent":return"text-orange-600 bg-orange-100";default:return"text-green-600 bg-green-100"}})(t.urgency_level)}`,children:t.urgency_level})]})]}),(0,dn.jsx)("p",{className:"text-sm text-gray-600 mb-3 line-clamp-3",children:t.description}),(0,dn.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,dn.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,dn.jsx)("span",{className:"text-gray-500",children:"Provider:"}),(0,dn.jsx)("span",{className:"font-medium",children:t.provider})]}),(0,dn.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,dn.jsx)("span",{className:"text-gray-500",children:"Amount:"}),(0,dn.jsx)("span",{className:"font-bold text-green-600",children:(s=t.amount,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(s))})]}),t.deadline&&(0,dn.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,dn.jsx)("span",{className:"text-gray-500",children:"Deadline:"}),(0,dn.jsx)("span",{className:"font-medium",children:new Date(t.deadline).toLocaleDateString()})]}),t.days_until_deadline&&(0,dn.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,dn.jsx)("span",{className:"text-gray-500",children:"Days Left:"}),(0,dn.jsxs)("span",{className:"font-medium "+(t.days_until_deadline<=7?"text-red-600":t.days_until_deadline<=30?"text-orange-600":"text-green-600"),children:[t.days_until_deadline," days"]})]})]}),t.categories&&t.categories.length>0&&(0,dn.jsx)("div",{className:"flex flex-wrap gap-1 mb-4",children:t.categories.slice(0,3).map((e,t)=>(0,dn.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:e},t))}),(0,dn.jsxs)("div",{className:"flex space-x-2",children:[(0,dn.jsx)("button",{onClick:()=>n(t),className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg text-sm font-semibold hover:bg-blue-700 transition-colors",children:"View Details"}),(0,dn.jsx)("button",{onClick:()=>t.application_url&&"#"!==t.application_url?window.open(t.application_url,"_blank"):alert("Application link not available"),className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg text-sm font-semibold hover:bg-green-700 transition-colors",children:"Apply Now"})]})]});var s,r},Sn=t=>{let{studentProfile:n,setView:s}=t;const[r,i]=(0,e.useState)([]),[a,o]=(0,e.useState)([]),[l,c]=(0,e.useState)({}),[u,d]=(0,e.useState)([]),[h,f]=(0,e.useState)([]),[p,g]=(0,e.useState)(!0),[m,v]=(0,e.useState)(""),[b,y]=(0,e.useState)(""),[x,w]=(0,e.useState)({minAmount:"",state:"",deadlineFilter:"",minScore:30}),[_,k]=(0,e.useState)("recommendations"),[S,j]=(0,e.useState)(null),N=(0,e.useCallback)(async()=>{g(!0);try{console.log("Loading scholarship data for profile:",n);const[e,t,s,r,a]=await Promise.all([an(n),ln(n),on(),cn(),un(30)]);console.log("API Results:",{searchResult:e,recommendationsResult:t,statsResult:s,categoriesResult:r,deadlinesResult:a}),i(e.scholarships||[]),o(t.recommendations||[]),c(s.stats||{}),d(r.categories||[]),f(a.upcoming_deadlines||[])}catch(e){console.error("Error loading scholarship data:",e),i([]),o([]),c({}),d([]),f([])}finally{g(!1)}},[n]);(0,e.useEffect)(()=>{N();(async()=>{try{const e=await fetch("/api/scholarships/test"),t=await e.json();console.log("Database test result:",t)}catch(e){console.error("Database test failed:",e)}})()},[N]);const C=async()=>{if(m.trim()){g(!0);try{const e=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const n=await fetch(`${en}/scholarships/search-text`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({searchTerm:e,filters:t})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(n){return console.error("Failed to search scholarships by text:",n),{scholarships:[]}}}(m);i(e.scholarships||[]),k("search")}catch(e){console.error("Error searching scholarships:",e)}finally{g(!1)}}},T=async e=>{y(e),g(!0);try{const t=await(async e=>{try{const t=await fetch(`${en}/scholarships/category/${encodeURIComponent(e)}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){return console.error("Failed to get scholarships by category:",t),{scholarships:[]}}})(e);i(t.scholarships||[]),k("category")}catch(t){console.error("Error filtering by category:",t)}finally{g(!1)}},E=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);return p&&0===r.length?(0,dn.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,dn.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,dn.jsxs)("div",{className:"space-y-6",children:[(0,dn.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 rounded-xl",children:(0,dn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dn.jsx)("div",{className:"flex items-center space-x-4",children:(0,dn.jsxs)("button",{onClick:()=>s("dashboard"),className:"flex items-center space-x-2 text-blue-100 hover:text-white transition-colors",children:[(0,dn.jsx)("span",{children:"\u2190"}),(0,dn.jsx)("span",{children:"Back to Dashboard"})]})}),(0,dn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,dn.jsxs)("div",{children:[(0,dn.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Scholarship Hub"}),(0,dn.jsx)("p",{className:"text-blue-100",children:"Discover and apply to scholarships that match your profile"})]}),(0,dn.jsx)("div",{className:"text-4xl",children:"\ud83c\udf93"})]})]})}),(0,dn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,dn.jsx)("div",{className:"bg-white p-4 rounded-xl shadow-sm border",children:(0,dn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,dn.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:(0,dn.jsx)("span",{className:"text-green-600 font-bold text-lg",children:"$"})}),(0,dn.jsxs)("div",{children:[(0,dn.jsx)("p",{className:"text-sm text-gray-500",children:"Total Value"}),(0,dn.jsx)("p",{className:"font-bold text-gray-900",children:E(l.total_value||r.reduce((e,t)=>e+(t.amount||0),0))})]})]})}),(0,dn.jsx)("div",{className:"bg-white p-4 rounded-xl shadow-sm border",children:(0,dn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,dn.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,dn.jsx)("span",{className:"text-blue-600 font-bold text-lg",children:"\ud83d\udcda"})}),(0,dn.jsxs)("div",{children:[(0,dn.jsx)("p",{className:"text-sm text-gray-500",children:"Available"}),(0,dn.jsx)("p",{className:"font-bold text-gray-900",children:l.total_scholarships||r.length})]})]})}),(0,dn.jsx)("div",{className:"bg-white p-4 rounded-xl shadow-sm border",children:(0,dn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,dn.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,dn.jsx)("span",{className:"text-purple-600 font-bold text-lg",children:"\u23f0"})}),(0,dn.jsxs)("div",{children:[(0,dn.jsx)("p",{className:"text-sm text-gray-500",children:"Urgent"}),(0,dn.jsx)("p",{className:"font-bold text-gray-900",children:h.filter(e=>"critical"===e.urgency_level).length})]})]})}),(0,dn.jsx)("div",{className:"bg-white p-4 rounded-xl shadow-sm border",children:(0,dn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,dn.jsx)("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center",children:(0,dn.jsx)("span",{className:"text-yellow-600 font-bold text-lg",children:"\ud83c\udfaf"})}),(0,dn.jsxs)("div",{children:[(0,dn.jsx)("p",{className:"text-sm text-gray-500",children:"Your Match"}),(0,dn.jsx)("p",{className:"font-bold text-gray-900",children:r.filter(e=>e.fit_score>=70).length})]})]})})]}),(0,dn.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:(0,dn.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,dn.jsx)("div",{className:"flex-1",children:(0,dn.jsx)("input",{type:"text",value:m,onChange:e=>v(e.target.value),placeholder:"Search scholarships by keywords...",className:"w-full p-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyPress:e=>"Enter"===e.key&&C()})}),(0,dn.jsx)("div",{className:"flex-1",children:(0,dn.jsxs)("select",{value:b,onChange:e=>T(e.target.value),className:"w-full p-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,dn.jsx)("option",{value:"",children:"All Categories"}),u.map((e,t)=>(0,dn.jsxs)("option",{value:e.id,children:[e.name," (",e.count,")"]},t))]})}),(0,dn.jsx)("button",{onClick:()=>k("advanced"),className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Advanced Filters"})]})}),"advanced"===_&&(0,dn.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[(0,dn.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Advanced Filters"}),(0,dn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,dn.jsxs)("div",{children:[(0,dn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Amount"}),(0,dn.jsx)("input",{type:"number",value:x.minAmount,onChange:e=>w({...x,minAmount:e.target.value}),placeholder:"e.g., 1000",className:"w-full p-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,dn.jsxs)("div",{children:[(0,dn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),(0,dn.jsxs)("select",{value:x.state,onChange:e=>w({...x,state:e.target.value}),className:"w-full p-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,dn.jsx)("option",{value:"",children:"All States"}),(0,dn.jsx)("option",{value:"AL",children:"Alabama"}),(0,dn.jsx)("option",{value:"AK",children:"Alaska"}),(0,dn.jsx)("option",{value:"AZ",children:"Arizona"}),(0,dn.jsx)("option",{value:"AR",children:"Arkansas"}),(0,dn.jsx)("option",{value:"CA",children:"California"}),(0,dn.jsx)("option",{value:"CO",children:"Colorado"}),(0,dn.jsx)("option",{value:"CT",children:"Connecticut"}),(0,dn.jsx)("option",{value:"DE",children:"Delaware"}),(0,dn.jsx)("option",{value:"FL",children:"Florida"}),(0,dn.jsx)("option",{value:"GA",children:"Georgia"}),(0,dn.jsx)("option",{value:"HI",children:"Hawaii"}),(0,dn.jsx)("option",{value:"ID",children:"Idaho"}),(0,dn.jsx)("option",{value:"IL",children:"Illinois"}),(0,dn.jsx)("option",{value:"IN",children:"Indiana"}),(0,dn.jsx)("option",{value:"IA",children:"Iowa"}),(0,dn.jsx)("option",{value:"KS",children:"Kansas"}),(0,dn.jsx)("option",{value:"KY",children:"Kentucky"}),(0,dn.jsx)("option",{value:"LA",children:"Louisiana"}),(0,dn.jsx)("option",{value:"ME",children:"Maine"}),(0,dn.jsx)("option",{value:"MD",children:"Maryland"}),(0,dn.jsx)("option",{value:"MA",children:"Massachusetts"}),(0,dn.jsx)("option",{value:"MI",children:"Michigan"}),(0,dn.jsx)("option",{value:"MN",children:"Minnesota"}),(0,dn.jsx)("option",{value:"MS",children:"Mississippi"}),(0,dn.jsx)("option",{value:"MO",children:"Missouri"}),(0,dn.jsx)("option",{value:"MT",children:"Montana"}),(0,dn.jsx)("option",{value:"NE",children:"Nebraska"}),(0,dn.jsx)("option",{value:"NV",children:"Nevada"}),(0,dn.jsx)("option",{value:"NH",children:"New Hampshire"}),(0,dn.jsx)("option",{value:"NJ",children:"New Jersey"}),(0,dn.jsx)("option",{value:"NM",children:"New Mexico"}),(0,dn.jsx)("option",{value:"NY",children:"New York"}),(0,dn.jsx)("option",{value:"NC",children:"North Carolina"}),(0,dn.jsx)("option",{value:"ND",children:"North Dakota"}),(0,dn.jsx)("option",{value:"OH",children:"Ohio"}),(0,dn.jsx)("option",{value:"OK",children:"Oklahoma"}),(0,dn.jsx)("option",{value:"OR",children:"Oregon"}),(0,dn.jsx)("option",{value:"PA",children:"Pennsylvania"}),(0,dn.jsx)("option",{value:"RI",children:"Rhode Island"}),(0,dn.jsx)("option",{value:"SC",children:"South Carolina"}),(0,dn.jsx)("option",{value:"SD",children:"South Dakota"}),(0,dn.jsx)("option",{value:"TN",children:"Tennessee"}),(0,dn.jsx)("option",{value:"TX",children:"Texas"}),(0,dn.jsx)("option",{value:"UT",children:"Utah"}),(0,dn.jsx)("option",{value:"VT",children:"Vermont"}),(0,dn.jsx)("option",{value:"VA",children:"Virginia"}),(0,dn.jsx)("option",{value:"WA",children:"Washington"}),(0,dn.jsx)("option",{value:"WV",children:"West Virginia"}),(0,dn.jsx)("option",{value:"WI",children:"Wisconsin"}),(0,dn.jsx)("option",{value:"WY",children:"Wyoming"})]})]}),(0,dn.jsxs)("div",{children:[(0,dn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deadline Within (days)"}),(0,dn.jsx)("input",{type:"number",value:x.deadlineFilter,onChange:e=>w({...x,deadlineFilter:e.target.value}),placeholder:"e.g., 30",className:"w-full p-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,dn.jsxs)("div",{children:[(0,dn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Match Score"}),(0,dn.jsx)("input",{type:"number",value:x.minScore,onChange:e=>w({...x,minScore:e.target.value}),min:"0",max:"100",className:"w-full p-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,dn.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,dn.jsx)("button",{onClick:async()=>{g(!0);try{const e=await(async e=>{try{const t=await fetch(`${en}/matching/advanced`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentProfile:e})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){return console.error("Failed to perform advanced scholarship matching:",t),{matches:[]}}})(n);i(e.scholarships||[]),k("advanced")}catch(e){console.error("Error performing advanced match:",e)}finally{g(!1)}},className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Apply Filters"}),(0,dn.jsx)("button",{onClick:()=>w({minAmount:"",state:"",deadlineFilter:"",minScore:30}),className:"bg-gray-500 text-white px-4 py-2 rounded-lg font-semibold hover:bg-gray-600 transition-colors",children:"Clear Filters"})]})]}),(0,dn.jsx)("div",{className:"bg-white p-4 rounded-xl shadow-sm border",children:(0,dn.jsxs)("div",{className:"flex space-x-4 border-b border-gray-200",children:[(0,dn.jsxs)("button",{onClick:()=>k("recommendations"),className:"pb-2 px-4 font-medium "+("recommendations"===_?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),children:["Recommendations (",a.length,")"]}),(0,dn.jsxs)("button",{onClick:()=>k("all"),className:"pb-2 px-4 font-medium "+("all"===_?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),children:["All Scholarships (",r.length,")"]}),(0,dn.jsxs)("button",{onClick:()=>k("deadlines"),className:"pb-2 px-4 font-medium "+("deadlines"===_?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),children:["Upcoming Deadlines (",h.length,")"]})]})}),(0,dn.jsx)("div",{className:"space-y-4",children:p?(0,dn.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,dn.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,dn.jsxs)(dn.Fragment,{children:["recommendations"===_&&(0,dn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(e=>(0,dn.jsx)(kn,{scholarship:e,setSelectedScholarship:j},e.id))}),"all"===_&&(0,dn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(e=>(0,dn.jsx)(kn,{scholarship:e,setSelectedScholarship:j},e.id))}),"deadlines"===_&&(0,dn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(e=>(0,dn.jsx)(kn,{scholarship:e,setSelectedScholarship:j},e.id))}),"search"===_&&(0,dn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(e=>(0,dn.jsx)(kn,{scholarship:e,setSelectedScholarship:j},e.id))}),"category"===_&&(0,dn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(e=>(0,dn.jsx)(kn,{scholarship:e,setSelectedScholarship:j},e.id))}),"advanced"===_&&(0,dn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(e=>(0,dn.jsx)(kn,{scholarship:e,setSelectedScholarship:j},e.id))})]})}),S&&(0,dn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,dn.jsxs)("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,dn.jsx)("div",{className:"sticky top-0 bg-white border-b p-6",children:(0,dn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,dn.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Scholarship Details"}),(0,dn.jsx)("button",{onClick:()=>j(null),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]})}),(0,dn.jsxs)("div",{className:"p-6 space-y-6",children:[(0,dn.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,dn.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,dn.jsxs)("div",{className:"flex-1",children:[(0,dn.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:S.title}),(0,dn.jsx)("p",{className:"text-lg text-gray-600 mb-4",children:S.description})]}),(0,dn.jsxs)("div",{className:"flex space-x-2",children:[S.fit_score&&(0,dn.jsxs)("span",{className:"text-sm font-semibold px-3 py-1 rounded-full "+(P=S.fit_score,P>=80?"text-green-600 bg-green-100":P>=60?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100"),children:[S.fit_score,"% Match"]}),S.urgency_level&&(0,dn.jsx)("span",{className:`text-sm font-semibold px-3 py-1 rounded-full ${(e=>{switch(e){case"critical":return"text-red-600 bg-red-100";case"urgent":return"text-orange-600 bg-orange-100";default:return"text-green-600 bg-green-100"}})(S.urgency_level)}`,children:S.urgency_level})]})]}),(0,dn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,dn.jsxs)("div",{className:"text-center",children:[(0,dn.jsx)("div",{className:"text-2xl font-bold text-green-600",children:E(S.amount)}),(0,dn.jsx)("div",{className:"text-sm text-gray-500",children:"Award Amount"})]}),(0,dn.jsxs)("div",{className:"text-center",children:[(0,dn.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:S.provider}),(0,dn.jsx)("div",{className:"text-sm text-gray-500",children:"Provider"})]}),(0,dn.jsxs)("div",{className:"text-center",children:[(0,dn.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:S.deadline?new Date(S.deadline).toLocaleDateString():"No deadline"}),(0,dn.jsx)("div",{className:"text-sm text-gray-500",children:"Deadline"})]})]})]}),(0,dn.jsxs)("div",{className:"space-y-6",children:[S.requirements&&S.requirements.length>0&&(0,dn.jsxs)("div",{children:[(0,dn.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Requirements"}),(0,dn.jsx)("ul",{className:"list-disc list-inside space-y-1 text-gray-700",children:S.requirements.map((e,t)=>(0,dn.jsx)("li",{children:e},t))})]}),S.categories&&S.categories.length>0&&(0,dn.jsxs)("div",{children:[(0,dn.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Categories"}),(0,dn.jsx)("div",{className:"flex flex-wrap gap-2",children:S.categories.map((e,t)=>(0,dn.jsx)("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:e},t))})]}),S.fields_of_study&&S.fields_of_study.length>0&&(0,dn.jsxs)("div",{children:[(0,dn.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Fields of Study"}),(0,dn.jsx)("div",{className:"flex flex-wrap gap-2",children:S.fields_of_study.map((e,t)=>(0,dn.jsx)("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm",children:e},t))})]}),S.academic_levels&&S.academic_levels.length>0&&(0,dn.jsxs)("div",{children:[(0,dn.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Academic Levels"}),(0,dn.jsx)("div",{className:"flex flex-wrap gap-2",children:S.academic_levels.map((e,t)=>(0,dn.jsx)("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm",children:e},t))})]}),S.demographics&&Object.keys(S.demographics).length>0&&(0,dn.jsxs)("div",{children:[(0,dn.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Demographics"}),(0,dn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(S.demographics).map(e=>{let[t,n]=e;return(0,dn.jsxs)("div",{className:"flex justify-between",children:[(0,dn.jsxs)("span",{className:"text-gray-600 capitalize",children:[t.replace(/_/g," "),":"]}),(0,dn.jsx)("span",{className:"font-medium",children:n})]},t)})})]}),S.raw_data&&Object.keys(S.raw_data).length>0&&(0,dn.jsxs)("div",{children:[(0,dn.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Additional Information"}),(0,dn.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,dn.jsx)("pre",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:JSON.stringify(S.raw_data,null,2)})})]})]}),(0,dn.jsx)("div",{className:"bg-gray-50 p-6 rounded-lg",children:(0,dn.jsxs)("div",{className:"flex space-x-4",children:[(0,dn.jsx)("button",{onClick:()=>S.application_url&&"#"!==S.application_url?window.open(S.application_url,"_blank"):alert("Application link not available"),className:"flex-1 bg-green-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-green-700 transition-colors",children:"Apply Now"}),(0,dn.jsx)("button",{onClick:()=>window.print(),className:"bg-gray-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-gray-700 transition-colors",children:"Print Details"})]})})]})]})})]});var P},jn=()=>{const{profile:t}=pn(),[n,s]=(0,e.useState)([]),[r,i]=(0,e.useState)(!1),[a,o]=(0,e.useState)("");return(0,dn.jsxs)("div",{className:"max-w-5xl mx-auto space-y-8",children:[(0,dn.jsxs)("div",{className:"text-center",children:[(0,dn.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"AI Scholarship Matcher"}),(0,dn.jsx)("p",{className:"text-gray-500 mt-2",children:"Find scholarships tailored to your unique profile using AI."})]}),(0,dn.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border text-center",children:[(0,dn.jsx)("p",{className:"mb-4",children:"Click the button below to find scholarships based on your saved student profile."}),(0,dn.jsx)("button",{onClick:async()=>{if(t){i(!0),o(""),s([]);try{const e=await fetch("/api/matching/scholarships",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentProfile:t})});if(!e.ok)throw new Error("The server could not process the matching request.");const n=await e.json();s(n.matches||[])}catch(e){o("Failed to fetch scholarship matches. Please try again later."),console.error(e)}finally{i(!1)}}else alert("Please complete your student profile first to get the best matches.")},disabled:r||!t,className:"bg-blue-600 text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-all",children:r?"Finding Matches...":"\u2728 Find My Scholarships"})]}),a&&(0,dn.jsx)("p",{className:"text-red-500 text-center",children:a}),n.length>0&&(0,dn.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border space-y-4",children:[(0,dn.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Your Top Scholarship Matches"}),n.map(e=>(0,dn.jsxs)("div",{className:"border p-4 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,dn.jsxs)("div",{className:"flex justify-between items-start",children:[(0,dn.jsxs)("div",{children:[(0,dn.jsx)("h3",{className:"font-bold text-lg text-blue-800",children:e.title}),(0,dn.jsx)("p",{className:"text-sm text-gray-600",children:e.organization})]}),(0,dn.jsxs)("div",{className:"text-right flex-shrink-0 ml-4",children:[(0,dn.jsxs)("p",{className:"font-bold text-xl text-green-600",children:["$",e.fundingAmount.toLocaleString()]}),(0,dn.jsxs)("p",{className:"text-xs text-purple-600 font-semibold",children:["Relevance: ",e.relevance]})]})]}),(0,dn.jsx)("p",{className:"text-sm text-gray-700 mt-2",children:e.description})]},e.id))]})]})},Nn=()=>{const{user:t}=pn(),[n,s]=(0,e.useState)(null),[r,i]=(0,e.useState)(!1),[a,o]=(0,e.useState)(null),[l,c]=(0,e.useState)({careerGoal:"",majorInterest:"",targetColleges:"",financialGoals:""}),u=e=>{const{name:t,value:n}=e.target;c(e=>({...e,[t]:n}))};return(0,dn.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,dn.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,dn.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Career Forecaster"}),(0,dn.jsx)("p",{className:"text-gray-600 mb-8",children:"Get AI-powered insights into your career path, including financial projections and educational recommendations."}),(0,dn.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[(0,dn.jsxs)("div",{children:[(0,dn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Career Goal *"}),(0,dn.jsx)("input",{type:"text",name:"careerGoal",value:l.careerGoal,onChange:u,placeholder:"e.g., Software Engineer, Doctor, Teacher",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,dn.jsxs)("div",{children:[(0,dn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Major Interest *"}),(0,dn.jsx)("input",{type:"text",name:"majorInterest",value:l.majorInterest,onChange:u,placeholder:"e.g., Computer Science, Biology, Education",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,dn.jsxs)("div",{children:[(0,dn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Colleges (comma-separated)"}),(0,dn.jsx)("input",{type:"text",name:"targetColleges",value:l.targetColleges,onChange:u,placeholder:"e.g., Stanford, MIT, UC Berkeley",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,dn.jsxs)("div",{children:[(0,dn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Financial Goals"}),(0,dn.jsx)("input",{type:"text",name:"financialGoals",value:l.financialGoals,onChange:u,placeholder:"e.g., $100k salary, debt-free graduation",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,dn.jsx)("button",{onClick:async()=>{if(l.careerGoal&&l.majorInterest){i(!0),o(null);try{const e=await fetch("/api/forecaster/generate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null===t||void 0===t?void 0:t.access_token}`},body:JSON.stringify({userId:null===t||void 0===t?void 0:t.id,careerGoal:l.careerGoal,majorInterest:l.majorInterest,targetColleges:l.targetColleges.split(",").map(e=>e.trim()).filter(e=>e),financialGoals:l.financialGoals})});if(!e.ok)throw new Error("Failed to generate career forecast");const n=await e.json();s(n)}catch(e){o(e.message)}finally{i(!1)}}else o("Please fill in career goal and major interest")},disabled:r,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Generating Forecast...":"Generate Career Forecast"}),a&&(0,dn.jsx)("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-md",children:(0,dn.jsx)("p",{className:"text-red-600",children:a})}),n&&(0,dn.jsx)("div",{className:"mt-8 space-y-6",children:(0,dn.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,dn.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Your Career Forecast"}),n.salaryProjections&&(0,dn.jsxs)("div",{className:"mb-6",children:[(0,dn.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Salary Projections"}),(0,dn.jsx)("div",{className:"grid md:grid-cols-3 gap-4",children:Object.entries(n.salaryProjections).map(e=>{let[t,n]=e;return(0,dn.jsxs)("div",{className:"bg-white p-4 rounded border",children:[(0,dn.jsx)("p",{className:"text-sm text-gray-600",children:t}),(0,dn.jsxs)("p",{className:"text-xl font-semibold text-green-600",children:["$",null===n||void 0===n?void 0:n.toLocaleString()]})]},t)})})]}),n.educationPath&&(0,dn.jsxs)("div",{className:"mb-6",children:[(0,dn.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Recommended Education Path"}),(0,dn.jsx)("div",{className:"bg-white p-4 rounded border",children:(0,dn.jsx)("p",{className:"text-gray-700",children:n.educationPath})})]}),n.recommendations&&(0,dn.jsxs)("div",{children:[(0,dn.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"AI Recommendations"}),(0,dn.jsx)("div",{className:"bg-white p-4 rounded border",children:(0,dn.jsx)("div",{className:"prose prose-sm max-w-none",children:n.recommendations.split("\n").map((e,t)=>(0,dn.jsx)("p",{className:"mb-2",children:e},t))})})]})]})})]})})},Cn=t=>{let{setView:n}=t;const{user:s,isProfileComplete:r,loading:i}=pn(),[a,o]=(0,e.useState)(!0),[l,c]=(0,e.useState)(null);return(0,e.useEffect)(()=>{const e=setTimeout(async()=>{try{const e=new URLSearchParams(window.location.search),t=e.get("error");e.get("code");if(t)return c(`Authentication error: ${t}`),void o(!1);i||(s?n(r?"dashboard":"studentProfile"):(c("Authentication failed. Please try again."),o(!1)))}catch(e){console.error("Auth callback error:",e),c("Authentication failed"),o(!1)}},1e3);return()=>clearTimeout(e)},[s,r,i,n]),a?(0,dn.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,dn.jsx)("div",{className:"max-w-md w-full space-y-8",children:(0,dn.jsxs)("div",{className:"text-center",children:[(0,dn.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),(0,dn.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Completing Authentication..."}),(0,dn.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Please wait while we finish setting up your account."})]})})}):l?(0,dn.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,dn.jsx)("div",{className:"max-w-md w-full space-y-8",children:(0,dn.jsxs)("div",{className:"text-center",children:[(0,dn.jsx)("div",{className:"mx-auto h-32 w-32 text-red-600",children:(0,dn.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 15.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,dn.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Authentication Error"}),(0,dn.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:l}),(0,dn.jsx)("div",{className:"mt-6",children:(0,dn.jsx)("button",{onClick:()=>n("login"),className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Return to Login"})})]})})}):(0,dn.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,dn.jsx)("div",{className:"max-w-md w-full space-y-8",children:(0,dn.jsxs)("div",{className:"text-center",children:[(0,dn.jsx)("div",{className:"mx-auto h-32 w-32 text-green-600",children:(0,dn.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,dn.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Authentication Successful!"}),(0,dn.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Redirecting you to your dashboard..."})]})})})},Tn=t=>{var n,s;let{collegeId:r,onBack:i}=t;const[a,o]=(0,e.useState)(null),[l,c]=(0,e.useState)(!0),{user:u}=(0,e.useContext)(hn),d={name:(null===u||void 0===u?void 0:u.name)||"Student",gpa:"3.85",satScore:1450,extracurriculars:"Debate Club, Varsity Soccer"};return(0,e.useEffect)(()=>{(async()=>{c(!0);const e=await sn(r);o(e),c(!1)})()},[r]),l?(0,dn.jsx)("div",{className:"text-center p-10",children:"Generating Scholargy Report..."}):a?(0,dn.jsxs)("div",{children:[(0,dn.jsx)("button",{onClick:i,className:"mb-6 bg-white text-gray-800 px-4 py-2 rounded-lg border shadow-sm hover:bg-gray-100 transition-colors",children:"\u2190 Back to Profile"}),(0,dn.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-lg border",children:[(0,dn.jsx)("h1",{className:"text-3xl font-bold text-center mb-2",children:"Scholargy Report"}),(0,dn.jsxs)("p",{className:"text-lg text-center text-gray-500 mb-8",children:["Comparing ",d.name,"'s Profile to ",a.general_info.name]}),(0,dn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,dn.jsxs)("div",{className:"bg-blue-50 p-6 rounded-lg border border-blue-200",children:[(0,dn.jsxs)("h2",{className:"font-bold text-xl mb-3 text-blue-800",children:["Your Profile (",d.name,")"]}),(0,dn.jsxs)("p",{children:[(0,dn.jsx)("strong",{children:"GPA:"})," ",d.gpa]}),(0,dn.jsxs)("p",{children:[(0,dn.jsx)("strong",{children:"SAT Score:"})," ",d.satScore]})]}),(0,dn.jsxs)("div",{className:"bg-green-50 p-6 rounded-lg border border-green-200",children:[(0,dn.jsx)("h2",{className:"font-bold text-xl mb-3 text-green-800",children:a.general_info.name}),(0,dn.jsxs)("p",{children:[(0,dn.jsx)("strong",{children:"Avg. Admitted GPA:"})," ",(null===(n=a.academics)||void 0===n?void 0:n.avgGpaAdmitted)||"N/A"]}),(0,dn.jsxs)("p",{children:[(0,dn.jsx)("strong",{children:"Avg. SAT Score (75th percentile):"})," ",null!==(s=a.admissions.sat_scores)&&void 0!==s&&s.math_75th?a.admissions.sat_scores.math_75th+a.admissions.sat_scores.verbal_75th:"N/A"]})]})]}),(0,dn.jsxs)("div",{className:"mt-8",children:[(0,dn.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Advisor Insights (AI-Generated Demo)"}),(0,dn.jsxs)("div",{className:"prose prose-sm max-w-none bg-gray-50 p-4 rounded-md border",children:[(0,dn.jsxs)("p",{children:[(0,dn.jsx)("strong",{children:"Overall Assessment:"})," ",d.name,"'s academic profile is strong and aligns well with ",a.general_info.name,"'s typical student body, particularly with a competitive SAT score."]}),(0,dn.jsxs)("ul",{children:[(0,dn.jsxs)("li",{children:[(0,dn.jsx)("strong",{children:"Academic Fit:"})," Your GPA is within the expected range for admitted students."]}),(0,dn.jsxs)("li",{children:[(0,dn.jsx)("strong",{children:"Financial Considerations:"})," The in-state tuition is competitive, but you should actively seek merit-based scholarships to reduce the overall cost."]})]})]})]})]})]}):(0,dn.jsx)("div",{className:"text-center p-10",children:"Could not load college data."})};function En(e){return e+.5|0}const Pn=(e,t,n)=>Math.max(Math.min(e,n),t);function On(e){return Pn(En(2.55*e),0,255)}function An(e){return Pn(En(255*e),0,255)}function Mn(e){return Pn(En(e/2.55)/100,0,1)}function In(e){return Pn(En(100*e),0,100)}const Rn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ln=[..."0123456789ABCDEF"],Dn=e=>Ln[15&e],zn=e=>Ln[(240&e)>>4]+Ln[15&e],$n=e=>(240&e)>>4===(15&e);function Fn(e){var t=(e=>$n(e.r)&&$n(e.g)&&$n(e.b)&&$n(e.a))(e)?Dn:zn;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const Un=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Bn(e,t,n){const s=t*Math.min(n,1-n),r=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-s*Math.max(Math.min(r-3,9-r,1),-1)};return[r(0),r(8),r(4)]}function Wn(e,t,n){const s=function(s){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(s+e/60)%6;return n-n*t*Math.max(Math.min(r,4-r,1),0)};return[s(5),s(3),s(1)]}function Hn(e,t,n){const s=Bn(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)s[r]*=1-t-n,s[r]+=t;return s}function Vn(e){const t=e.r/255,n=e.g/255,s=e.b/255,r=Math.max(t,n,s),i=Math.min(t,n,s),a=(r+i)/2;let o,l,c;return r!==i&&(c=r-i,l=a>.5?c/(2-r-i):c/(r+i),o=function(e,t,n,s,r){return e===r?(t-n)/s+(t<n?6:0):t===r?(n-e)/s+2:(e-t)/s+4}(t,n,s,c,r),o=60*o+.5),[0|o,l||0,a]}function qn(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(An)}function Kn(e,t,n){return qn(Bn,e,t,n)}function Gn(e){return(e%360+360)%360}function Yn(e){const t=Un.exec(e);let n,s=255;if(!t)return;t[5]!==n&&(s=t[6]?On(+t[5]):An(+t[5]));const r=Gn(+t[2]),i=+t[3]/100,a=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return qn(Hn,e,t,n)}(r,i,a):"hsv"===t[1]?function(e,t,n){return qn(Wn,e,t,n)}(r,i,a):Kn(r,i,a),{r:n[0],g:n[1],b:n[2],a:s}}const Jn={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Qn={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Xn;function Zn(e){Xn||(Xn=function(){const e={},t=Object.keys(Qn),n=Object.keys(Jn);let s,r,i,a,o;for(s=0;s<t.length;s++){for(a=o=t[s],r=0;r<n.length;r++)i=n[r],o=o.replace(i,Jn[i]);i=parseInt(Qn[a],16),e[o]=[i>>16&255,i>>8&255,255&i]}return e}(),Xn.transparent=[0,0,0,0]);const t=Xn[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const es=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const ts=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,ns=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function ss(e,t,n){if(e){let s=Vn(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,0===t?360:1)),s=Kn(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function rs(e,t){return e?Object.assign(t||{},e):e}function is(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=An(e[3]))):(t=rs(e,{r:0,g:0,b:0,a:1})).a=An(t.a),t}function as(e){return"r"===e.charAt(0)?function(e){const t=es.exec(e);let n,s,r,i=255;if(t){if(t[7]!==n){const e=+t[7];i=t[8]?On(e):Pn(255*e,0,255)}return n=+t[1],s=+t[3],r=+t[5],n=255&(t[2]?On(n):Pn(n,0,255)),s=255&(t[4]?On(s):Pn(s,0,255)),r=255&(t[6]?On(r):Pn(r,0,255)),{r:n,g:s,b:r,a:i}}}(e):Yn(e)}class os{constructor(e){if(e instanceof os)return e;const t=typeof e;let n;"object"===t?n=is(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*Rn[e[1]],g:255&17*Rn[e[2]],b:255&17*Rn[e[3]],a:5===n?17*Rn[e[4]]:255}:7!==n&&9!==n||(t={r:Rn[e[1]]<<4|Rn[e[2]],g:Rn[e[3]]<<4|Rn[e[4]],b:Rn[e[5]]<<4|Rn[e[6]],a:9===n?Rn[e[7]]<<4|Rn[e[8]]:255})),t}(e)||Zn(e)||as(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=rs(this._rgb);return e&&(e.a=Mn(e.a)),e}set rgb(e){this._rgb=is(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Mn(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`):void 0;var e}hexString(){return this._valid?Fn(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=Vn(e),n=t[0],s=In(t[1]),r=In(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${r}%, ${Mn(e.a)})`:`hsl(${n}, ${s}%, ${r}%)`}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,s=e.rgb;let r;const i=t===r?.5:t,a=2*i-1,o=n.a-s.a,l=((a*o===-1?a:(a+o)/(1+a*o))+1)/2;r=1-l,n.r=255&l*n.r+r*s.r+.5,n.g=255&l*n.g+r*s.g+.5,n.b=255&l*n.b+r*s.b+.5,n.a=i*n.a+(1-i)*s.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const s=ns(Mn(e.r)),r=ns(Mn(e.g)),i=ns(Mn(e.b));return{r:An(ts(s+n*(ns(Mn(t.r))-s))),g:An(ts(r+n*(ns(Mn(t.g))-r))),b:An(ts(i+n*(ns(Mn(t.b))-i))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new os(this.rgb)}alpha(e){return this._rgb.a=An(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=En(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return ss(this._rgb,2,e),this}darken(e){return ss(this._rgb,2,-e),this}saturate(e){return ss(this._rgb,1,e),this}desaturate(e){return ss(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=Vn(e);n[0]=Gn(n[0]+t),n=Kn(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function ls(){}const cs=(()=>{let e=0;return()=>e++})();function us(e){return null===e||void 0===e}function ds(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function hs(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function fs(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function ps(e,t){return fs(e)?e:t}function gs(e,t){return"undefined"===typeof e?t:e}const ms=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function vs(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function bs(e,t,n,s){let r,i,a;if(ds(e))if(i=e.length,s)for(r=i-1;r>=0;r--)t.call(n,e[r],r);else for(r=0;r<i;r++)t.call(n,e[r],r);else if(hs(e))for(a=Object.keys(e),i=a.length,r=0;r<i;r++)t.call(n,e[a[r]],a[r])}function ys(e,t){let n,s,r,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(r=e[n],i=t[n],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function xs(e){if(ds(e))return e.map(xs);if(hs(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let r=0;for(;r<s;++r)t[n[r]]=xs(e[n[r]]);return t}return e}function ws(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function _s(e,t,n,s){if(!ws(e))return;const r=t[e],i=n[e];hs(r)&&hs(i)?ks(r,i,s):t[e]=xs(i)}function ks(e,t,n){const s=ds(t)?t:[t],r=s.length;if(!hs(e))return e;const i=(n=n||{}).merger||_s;let a;for(let o=0;o<r;++o){if(a=s[o],!hs(a))continue;const t=Object.keys(a);for(let s=0,r=t.length;s<r;++s)i(t[s],e,a,n)}return e}function Ss(e,t){return ks(e,t,{merger:js})}function js(e,t,n){if(!ws(e))return;const s=t[e],r=n[e];hs(s)&&hs(r)?Ss(s,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=xs(r))}const Ns={"":e=>e,x:e=>e.x,y:e=>e.y};function Cs(e,t){const n=Ns[t]||(Ns[t]=function(e){const t=function(e){const t=e.split("."),n=[];let s="";for(const r of t)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function Ts(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Es=e=>"undefined"!==typeof e,Ps=e=>"function"===typeof e,Os=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const As=Math.PI,Ms=2*As,Is=Ms+As,Rs=Number.POSITIVE_INFINITY,Ls=As/180,Ds=As/2,zs=As/4,$s=2*As/3,Fs=Math.log10,Us=Math.sign;function Bs(e,t,n){return Math.abs(e-t)<n}function Ws(e){const t=Math.round(e);e=Bs(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Fs(e))),s=e/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function Hs(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Vs(e,t,n){let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s][n],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function qs(e){return e*(As/180)}function Ks(e){return e*(180/As)}function Gs(e){if(!fs(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function Ys(e,t){const n=t.x-e.x,s=t.y-e.y,r=Math.sqrt(n*n+s*s);let i=Math.atan2(s,n);return i<-.5*As&&(i+=Ms),{angle:i,distance:r}}function Js(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Qs(e,t){return(e-t+Is)%Ms-As}function Xs(e){return(e%Ms+Ms)%Ms}function Zs(e,t,n,s){const r=Xs(e),i=Xs(t),a=Xs(n),o=Xs(i-r),l=Xs(a-r),c=Xs(r-i),u=Xs(r-a);return r===i||r===a||s&&i===a||o>l&&c<u}function er(e,t,n){return Math.max(t,Math.min(n,e))}function tr(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}function nr(e,t,n){n=n||(n=>e[n]<t);let s,r=e.length-1,i=0;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const sr=(e,t,n,s)=>nr(e,n,s?s=>{const r=e[s][t];return r<n||r===n&&e[s+1][t]===n}:s=>e[s][t]<n),rr=(e,t,n)=>nr(e,n,s=>e[s][t]>=n);const ir=["push","pop","shift","splice","unshift"];function ar(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,r=s.indexOf(t);-1!==r&&s.splice(r,1),s.length>0||(ir.forEach(t=>{delete e[t]}),delete e._chartjs)}function or(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const lr="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function cr(e,t){let n=[],s=!1;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];n=i,s||(s=!0,lr.call(window,()=>{s=!1,e.apply(t,n)}))}}const ur=e=>"start"===e?"left":"end"===e?"right":"center",dr=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function hr(e,t,n){const s=t.length;let r=0,i=s;if(e._sorted){const{iScale:a,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=a.axis,{min:d,max:h,minDefined:f,maxDefined:p}=a.getUserBounds();if(f){if(r=Math.min(sr(l,u,d).lo,n?s:sr(t,u,a.getPixelForValue(d)).lo),c){const e=l.slice(0,r+1).reverse().findIndex(e=>!us(e[o.axis]));r-=Math.max(0,e)}r=er(r,0,s-1)}if(p){let e=Math.max(sr(l,a.axis,h,!0).hi+1,n?0:sr(t,u,a.getPixelForValue(h),!0).hi+1);if(c){const t=l.slice(e-1).findIndex(e=>!us(e[o.axis]));e+=Math.max(0,t)}i=er(e,r,s)-r}else i=s-r}return{start:r,count:i}}function fr(e){const{xScale:t,yScale:n,_scaleRanges:s}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!s)return e._scaleRanges=r,!0;const i=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,r),i}const pr=e=>0===e||1===e,gr=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*Ms/n),mr=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Ms/n)+1,vr={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*Ds),easeOutSine:e=>Math.sin(e*Ds),easeInOutSine:e=>-.5*(Math.cos(As*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>pr(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>pr(e)?e:gr(e,.075,.3),easeOutElastic:e=>pr(e)?e:mr(e,.075,.3),easeInOutElastic(e){const t=.1125;return pr(e)?e:e<.5?.5*gr(2*e,t,.45):.5+.5*mr(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-vr.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*vr.easeInBounce(2*e):.5*vr.easeOutBounce(2*e-1)+.5};function br(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function yr(e){return br(e)?e:new os(e)}function xr(e){return br(e)?e:new os(e).saturate(.5).darken(.1).hexString()}const wr=["x","y","borderWidth","radius","tension"],_r=["color","borderColor","backgroundColor"];const kr=new Map;function Sr(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let s=kr.get(n);return s||(s=new Intl.NumberFormat(e,t),kr.set(n,s)),s}(t,n).format(e)}const jr={values:e=>ds(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const s=this.chart.options.locale;let r,i=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(r="scientific"),i=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const a=Fs(Math.abs(i)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:r,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),Sr(e,s,l)},logarithmic(e,t,n){if(0===e)return"0";const s=n[t].significand||e/Math.pow(10,Math.floor(Fs(e)));return[1,2,3,5,10,15].includes(s)||t>.8*n.length?jr.numeric.call(this,e,t,n):""}};var Nr={formatters:jr};const Cr=Object.create(null),Tr=Object.create(null);function Er(e,t){if(!t)return e;const n=t.split(".");for(let s=0,r=n.length;s<r;++s){const t=n[s];e=e[t]||(e[t]=Object.create(null))}return e}function Pr(e,t,n){return"string"===typeof t?ks(Er(e,t),n):ks(Er(e,""),t)}class Or{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>xr(t.backgroundColor),this.hoverBorderColor=(e,t)=>xr(t.borderColor),this.hoverColor=(e,t)=>xr(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Pr(this,e,t)}get(e){return Er(this,e)}describe(e,t){return Pr(Tr,e,t)}override(e,t){return Pr(Cr,e,t)}route(e,t,n,s){const r=Er(this,e),i=Er(this,n),a="_"+t;Object.defineProperties(r,{[a]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[a],t=i[s];return hs(e)?Object.assign({},t,e):gs(e,t)},set(e){this[a]=e}}})}apply(e){e.forEach(e=>e(this))}}var Ar=new Or({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:_r},numbers:{type:"number",properties:wr}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Nr.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function Mr(e,t,n,s,r){let i=t[r];return i||(i=t[r]=e.measureText(r).width,n.push(r)),i>s&&(s=i),s}function Ir(e,t,n){const s=e.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((t-r)*s)/s+r}function Rr(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Lr(e,t,n,s){Dr(e,t,n,s,null)}function Dr(e,t,n,s,r){let i,a,o,l,c,u,d,h;const f=t.pointStyle,p=t.rotation,g=t.radius;let m=(p||0)*Ls;if(f&&"object"===typeof f&&(i=f.toString(),"[object HTMLImageElement]"===i||"[object HTMLCanvasElement]"===i))return e.save(),e.translate(n,s),e.rotate(m),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(g)||g<=0)){switch(e.beginPath(),f){default:r?e.ellipse(n,s,r/2,g,0,0,Ms):e.arc(n,s,g,0,Ms),e.closePath();break;case"triangle":u=r?r/2:g,e.moveTo(n+Math.sin(m)*u,s-Math.cos(m)*g),m+=$s,e.lineTo(n+Math.sin(m)*u,s-Math.cos(m)*g),m+=$s,e.lineTo(n+Math.sin(m)*u,s-Math.cos(m)*g),e.closePath();break;case"rectRounded":c=.516*g,l=g-c,a=Math.cos(m+zs)*l,d=Math.cos(m+zs)*(r?r/2-c:l),o=Math.sin(m+zs)*l,h=Math.sin(m+zs)*(r?r/2-c:l),e.arc(n-d,s-o,c,m-As,m-Ds),e.arc(n+h,s-a,c,m-Ds,m),e.arc(n+d,s+o,c,m,m+Ds),e.arc(n-h,s+a,c,m+Ds,m+As),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=r?r/2:l,e.rect(n-u,s-l,2*u,2*l);break}m+=zs;case"rectRot":d=Math.cos(m)*(r?r/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,h=Math.sin(m)*(r?r/2:g),e.moveTo(n-d,s-o),e.lineTo(n+h,s-a),e.lineTo(n+d,s+o),e.lineTo(n-h,s+a),e.closePath();break;case"crossRot":m+=zs;case"cross":d=Math.cos(m)*(r?r/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,h=Math.sin(m)*(r?r/2:g),e.moveTo(n-d,s-o),e.lineTo(n+d,s+o),e.moveTo(n+h,s-a),e.lineTo(n-h,s+a);break;case"star":d=Math.cos(m)*(r?r/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,h=Math.sin(m)*(r?r/2:g),e.moveTo(n-d,s-o),e.lineTo(n+d,s+o),e.moveTo(n+h,s-a),e.lineTo(n-h,s+a),m+=zs,d=Math.cos(m)*(r?r/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,h=Math.sin(m)*(r?r/2:g),e.moveTo(n-d,s-o),e.lineTo(n+d,s+o),e.moveTo(n+h,s-a),e.lineTo(n-h,s+a);break;case"line":a=r?r/2:Math.cos(m)*g,o=Math.sin(m)*g,e.moveTo(n-a,s-o),e.lineTo(n+a,s+o);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(m)*(r?r/2:g),s+Math.sin(m)*g);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function zr(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function $r(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Fr(e){e.restore()}function Ur(e,t,n,s,r){if(!t)return e.lineTo(n.x,n.y);if("middle"===r){const s=(t.x+n.x)/2;e.lineTo(s,t.y),e.lineTo(s,n.y)}else"after"===r!==!!s?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Br(e,t,n,s){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function Wr(e,t,n,s,r){if(r.strikethrough||r.underline){const i=e.measureText(s),a=t-i.actualBoundingBoxLeft,o=t+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(a,u),e.lineTo(o,u),e.stroke()}}function Hr(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Vr(e,t,n,s,r){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=ds(t)?t:[t],o=i.strokeWidth>0&&""!==i.strokeColor;let l,c;for(e.save(),e.font=r.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),us(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,i),l=0;l<a.length;++l)c=a[l],i.backdrop&&Hr(e,i.backdrop),o&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),us(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(c,n,s,i.maxWidth)),e.fillText(c,n,s,i.maxWidth),Wr(e,n,s,c,i),s+=Number(r.lineHeight);e.restore()}function qr(e,t){const{x:n,y:s,w:r,h:i,radius:a}=t;e.arc(n+a.topLeft,s+a.topLeft,a.topLeft,1.5*As,As,!0),e.lineTo(n,s+i-a.bottomLeft),e.arc(n+a.bottomLeft,s+i-a.bottomLeft,a.bottomLeft,As,Ds,!0),e.lineTo(n+r-a.bottomRight,s+i),e.arc(n+r-a.bottomRight,s+i-a.bottomRight,a.bottomRight,Ds,0,!0),e.lineTo(n+r,s+a.topRight),e.arc(n+r-a.topRight,s+a.topRight,a.topRight,0,-Ds,!0),e.lineTo(n+a.topLeft,s)}const Kr=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Gr=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Yr(e,t){const n=(""+e).match(Kr);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const Jr=e=>+e||0;function Qr(e,t){const n={},s=hs(t),r=s?Object.keys(t):t,i=hs(e)?s?n=>gs(e[n],e[t[n]]):t=>e[t]:()=>e;for(const a of r)n[a]=Jr(i(a));return n}function Xr(e){return Qr(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Zr(e){return Qr(e,["topLeft","topRight","bottomLeft","bottomRight"])}function ei(e){const t=Xr(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function ti(e,t){e=e||{},t=t||Ar.font;let n=gs(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let s=gs(e.style,t.style);s&&!(""+s).match(Gr)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:gs(e.family,t.family),lineHeight:Yr(gs(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:gs(e.weight,t.weight),string:""};return r.string=function(e){return!e||us(e.size)||us(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(r),r}function ni(e,t,n,s){let r,i,a,o=!0;for(r=0,i=e.length;r<i;++r)if(a=e[r],void 0!==a&&(void 0!==t&&"function"===typeof a&&(a=a(t),o=!1),void 0!==n&&ds(a)&&(a=a[n%a.length],o=!1),void 0!==a))return s&&!o&&(s.cacheable=!1),a}function si(e,t){return Object.assign(Object.create(e),t)}function ri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const r=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=gi("_fallback",e));const i={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:n,_getTarget:s,override:s=>ri([s,...e],t,r,n)};return new Proxy(i,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,s)=>ci(n,s,()=>function(e,t,n,s){let r;for(const i of t)if(r=gi(oi(i,e),n),"undefined"!==typeof r)return li(e,r)?fi(n,s,e,r):r}(s,t,e,n)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>mi(e).includes(t),ownKeys:e=>mi(e),set(e,t,n){const r=e._storage||(e._storage=s());return e[t]=r[t]=n,delete e._keys,!0}})}function ii(e,t,n,s){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:ai(e,s),setContext:t=>ii(e,t,n,s),override:r=>ii(e.override(r),t,n,s)};return new Proxy(r,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>ci(e,t,()=>function(e,t,n){const{_proxy:s,_context:r,_subProxy:i,_descriptors:a}=e;let o=s[t];Ps(o)&&a.isScriptable(t)&&(o=function(e,t,n,s){const{_proxy:r,_context:i,_subProxy:a,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(i,a||s);o.delete(e),li(e,l)&&(l=fi(r._scopes,r,e,l));return l}(t,o,e,n));ds(o)&&o.length&&(o=function(e,t,n,s){const{_proxy:r,_context:i,_subProxy:a,_descriptors:o}=n;if("undefined"!==typeof i.index&&s(e))return t[i.index%t.length];if(hs(t[0])){const n=t,s=r._scopes.filter(e=>e!==n);t=[];for(const l of n){const n=fi(s,r,e,l);t.push(ii(n,i,a&&a[e],o))}}return t}(t,o,e,a.isIndexable));li(t,o)&&(o=ii(o,r,i&&i[t],a));return o}(e,t,n)),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,s)=>(e[n]=s,delete t[n],!0)})}function ai(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:s,isScriptable:Ps(n)?n:()=>n,isIndexable:Ps(s)?s:()=>s}}const oi=(e,t)=>e?e+Ts(t):t,li=(e,t)=>hs(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function ci(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const s=n();return e[t]=s,s}function ui(e,t,n){return Ps(e)?e(t,n):e}const di=(e,t)=>!0===e?t:"string"===typeof e?Cs(t,e):void 0;function hi(e,t,n,s,r){for(const i of t){const t=di(n,i);if(t){e.add(t);const i=ui(t._fallback,n,r);if("undefined"!==typeof i&&i!==n&&i!==s)return i}else if(!1===t&&"undefined"!==typeof s&&n!==s)return null}return!1}function fi(e,t,n,s){const r=t._rootScopes,i=ui(t._fallback,n,s),a=[...e,...r],o=new Set;o.add(s);let l=pi(o,a,n,i||n,s);return null!==l&&(("undefined"===typeof i||i===n||(l=pi(o,a,i,l,s),null!==l))&&ri(Array.from(o),[""],r,i,()=>function(e,t,n){const s=e._getTarget();t in s||(s[t]={});const r=s[t];if(ds(r)&&hs(n))return n;return r||{}}(t,n,s)))}function pi(e,t,n,s,r){for(;n;)n=hi(e,t,n,s,r);return n}function gi(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function mi(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}const vi=Number.EPSILON||1e-14,bi=(e,t)=>t<e.length&&!e[t].skip&&e[t],yi=e=>"x"===e?"y":"x";function xi(e,t,n,s){const r=e.skip?t:e,i=t,a=n.skip?t:n,o=Js(i,r),l=Js(a,i);let c=o/(o+l),u=l/(o+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=s*c,h=s*u;return{previous:{x:i.x-d*(a.x-r.x),y:i.y-d*(a.y-r.y)},next:{x:i.x+h*(a.x-r.x),y:i.y+h*(a.y-r.y)}}}function wi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=yi(t),s=e.length,r=Array(s).fill(0),i=Array(s);let a,o,l,c=bi(e,0);for(a=0;a<s;++a)if(o=l,l=c,c=bi(e,a+1),l){if(c){const e=c[t]-l[t];r[a]=0!==e?(c[n]-l[n])/e:0}i[a]=o?c?Us(r[a-1])!==Us(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}!function(e,t,n){const s=e.length;let r,i,a,o,l,c=bi(e,0);for(let u=0;u<s-1;++u)l=c,c=bi(e,u+1),l&&c&&(Bs(t[u],0,vi)?n[u]=n[u+1]=0:(r=n[u]/t[u],i=n[u+1]/t[u],o=Math.pow(r,2)+Math.pow(i,2),o<=9||(a=3/Math.sqrt(o),n[u]=r*a*t[u],n[u+1]=i*a*t[u])))}(e,r,i),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const s=yi(n),r=e.length;let i,a,o,l=bi(e,0);for(let c=0;c<r;++c){if(a=o,o=l,l=bi(e,c+1),!o)continue;const r=o[n],u=o[s];a&&(i=(r-a[n])/3,o[`cp1${n}`]=r-i,o[`cp1${s}`]=u-i*t[c]),l&&(i=(l[n]-r)/3,o[`cp2${n}`]=r+i,o[`cp2${s}`]=u+i*t[c])}}(e,i,t)}function _i(e,t,n){return Math.max(Math.min(e,n),t)}function ki(e,t,n,s,r){let i,a,o,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)wi(e,r);else{let n=s?e[e.length-1]:e[0];for(i=0,a=e.length;i<a;++i)o=e[i],l=xi(n,o,e[Math.min(i+1,a-(s?0:1))%a],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}t.capBezierPoints&&function(e,t){let n,s,r,i,a,o=zr(e[0],t);for(n=0,s=e.length;n<s;++n)a=i,i=o,o=n<s-1&&zr(e[n+1],t),i&&(r=e[n],a&&(r.cp1x=_i(r.cp1x,t.left,t.right),r.cp1y=_i(r.cp1y,t.top,t.bottom)),o&&(r.cp2x=_i(r.cp2x,t.left,t.right),r.cp2y=_i(r.cp2y,t.top,t.bottom)))}(e,n)}function Si(){return"undefined"!==typeof window&&"undefined"!==typeof document}function ji(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Ni(e,t,n){let s;return"string"===typeof e?(s=parseInt(e,10),-1!==e.indexOf("%")&&(s=s/100*t.parentNode[n])):s=e,s}const Ci=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const Ti=["top","right","bottom","left"];function Ei(e,t,n){const s={};n=n?"-"+n:"";for(let r=0;r<4;r++){const i=Ti[r];s[i]=parseFloat(e[t+"-"+i+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}function Pi(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:s}=t,r=Ci(n),i="border-box"===r.boxSizing,a=Ei(r,"padding"),o=Ei(r,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,s=n&&n.length?n[0]:e,{offsetX:r,offsetY:i}=s;let a,o,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(r,i,e.target))a=r,o=i;else{const e=t.getBoundingClientRect();a=s.clientX-e.left,o=s.clientY-e.top,l=!0}return{x:a,y:o,box:l}}(e,n),d=a.left+(u&&o.left),h=a.top+(u&&o.top);let{width:f,height:p}=t;return i&&(f-=a.width+o.width,p-=a.height+o.height),{x:Math.round((l-d)/f*n.width/s),y:Math.round((c-h)/p*n.height/s)}}const Oi=e=>Math.round(10*e)/10;function Ai(e,t,n,s){const r=Ci(e),i=Ei(r,"margin"),a=Ni(r.maxWidth,e,"clientWidth")||Rs,o=Ni(r.maxHeight,e,"clientHeight")||Rs,l=function(e,t,n){let s,r;if(void 0===t||void 0===n){const i=e&&ji(e);if(i){const e=i.getBoundingClientRect(),a=Ci(i),o=Ei(a,"border","width"),l=Ei(a,"padding");t=e.width-l.width-o.width,n=e.height-l.height-o.height,s=Ni(a.maxWidth,i,"clientWidth"),r=Ni(a.maxHeight,i,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:s||Rs,maxHeight:r||Rs}}(e,t,n);let{width:c,height:u}=l;if("content-box"===r.boxSizing){const e=Ei(r,"border","width"),t=Ei(r,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-i.width),u=Math.max(0,s?c/s:u-i.height),c=Oi(Math.min(c,a,l.maxWidth)),u=Oi(Math.min(u,o,l.maxHeight)),c&&!u&&(u=Oi(c/2));return(void 0!==t||void 0!==n)&&s&&l.height&&u>l.height&&(u=l.height,c=Oi(Math.floor(u*s))),{width:c,height:u}}function Mi(e,t,n){const s=t||1,r=Math.floor(e.height*s),i=Math.floor(e.width*s);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${e.height}px`,a.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==s||a.height!==r||a.width!==i)&&(e.currentDevicePixelRatio=s,a.height=r,a.width=i,e.ctx.setTransform(s,0,0,s,0,0),!0)}const Ii=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Si()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(t){}return e}();function Ri(e,t){const n=function(e,t){return Ci(e).getPropertyValue(t)}(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Li(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function Di(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:"middle"===s?n<.5?e.y:t.y:"after"===s?n<1?e.y:t.y:n>0?t.y:e.y}}function zi(e,t,n,s){const r={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},a=Li(e,r,n),o=Li(r,i,n),l=Li(i,t,n),c=Li(a,o,n),u=Li(o,l,n);return Li(c,u,n)}function $i(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function Fi(e,t){let n,s;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function Ui(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Bi(e){return"angle"===e?{between:Zs,compare:Qs,normalize:Xs}:{between:tr,compare:(e,t)=>e-t,normalize:e=>e}}function Wi(e){let{start:t,end:n,count:s,loop:r,style:i}=e;return{start:t%s,end:n%s,loop:r&&(n-t+1)%s===0,style:i}}function Hi(e,t,n){if(!n)return[e];const{property:s,start:r,end:i}=n,a=t.length,{compare:o,between:l,normalize:c}=Bi(s),{start:u,end:d,loop:h,style:f}=function(e,t,n){const{property:s,start:r,end:i}=n,{between:a,normalize:o}=Bi(s),l=t.length;let c,u,{start:d,end:h,loop:f}=e;if(f){for(d+=l,h+=l,c=0,u=l;c<u&&a(o(t[d%l][s]),r,i);++c)d--,h--;d%=l,h%=l}return h<d&&(h+=l),{start:d,end:h,loop:f,style:e.style}}(e,t,n),p=[];let g,m,v,b=!1,y=null;const x=()=>b||l(r,v,g)&&0!==o(r,v),w=()=>!b||0===o(i,g)||l(i,v,g);for(let _=u,k=u;_<=d;++_)m=t[_%a],m.skip||(g=c(m[s]),g!==v&&(b=l(g,r,i),null===y&&x()&&(y=0===o(g,r)?_:k),null!==y&&w()&&(p.push(Wi({start:y,end:_,loop:h,count:a,style:f})),y=null),k=_,v=g));return null!==y&&p.push(Wi({start:y,end:d,loop:h,count:a,style:f})),p}function Vi(e,t){const n=[],s=e.segments;for(let r=0;r<s.length;r++){const i=Hi(s[r],e.points,t);i.length&&n.push(...i)}return n}function qi(e,t,n,s){return s&&s.setContext&&n?function(e,t,n,s){const r=e._chart.getContext(),i=Ki(e.options),{_datasetIndex:a,options:{spanGaps:o}}=e,l=n.length,c=[];let u=i,d=t[0].start,h=d;function f(e,t,s,r){const i=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=i;for(;n[t%l].skip;)t+=i;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:s,style:r}),u=r,d=t%l)}}for(const p of t){d=o?d:p.start;let e,t=n[d%l];for(h=d+1;h<=p.end;h++){const i=n[h%l];e=Ki(s.setContext(si(r,{type:"segment",p0:t,p1:i,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:a}))),Gi(e,u)&&f(d,h-1,p.loop,u),t=i,u=e}d<h-1&&f(d,h-1,p.loop,u)}return c}(e,t,n,s):t}function Ki(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Gi(e,t){if(!t)return!1;const n=[],s=function(e,t){return br(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,s)!==JSON.stringify(t,s)}function Yi(e,t,n){return e.options.clip?e[n]:t[n]}function Ji(e,t){const n=t._clip;if(n.disabled)return!1;const s=function(e,t){const{xScale:n,yScale:s}=e;return n&&s?{left:Yi(n,t,"left"),right:Yi(n,t,"right"),top:Yi(s,t,"top"),bottom:Yi(s,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:s.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:s.right+(!0===n.right?0:n.right),top:!1===n.top?0:s.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:s.bottom+(!0===n.bottom?0:n.bottom)}}class Qi{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,s){const r=t.listeners[s],i=t.duration;r.forEach(s=>s({chart:e,initial:t.initial,numSteps:i,currentStep:Math.min(n-t.start,i)}))}_refresh(){this._request||(this._running=!0,this._request=lr.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;const r=n.items;let i,a=r.length-1,o=!1;for(;a>=0;--a)i=r[a],i._active?(i._total>n.duration&&(n.duration=i._total),i.tick(e),o=!0):(r[a]=r[r.length-1],r.pop());o&&(s.draw(),this._notify(s,n,e,"progress")),r.length||(n.running=!1,this._notify(s,n,e,"complete"),n.initial=!1),t+=r.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let s=n.length-1;for(;s>=0;--s)n[s].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Xi=new Qi;const Zi="transparent",ea={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const s=yr(e||Zi),r=s.valid&&yr(t||Zi);return r&&r.valid?r.mix(s,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class ta{constructor(e,t,n,s){const r=t[n];s=ni([e.to,s,r,e.from]);const i=ni([e.from,r,s]);this._active=!0,this._fn=e.fn||ea[e.type||typeof i],this._easing=vr[e.easing]||vr.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=i,this._to=s,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const s=this._target[this._prop],r=n-this._start,i=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(i,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=ni([e.to,t,s,e.from]),this._from=ni([e.from,s,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,s=this._prop,r=this._from,i=this._loop,a=this._to;let o;if(this._active=r!==a&&(i||t<n),!this._active)return this._target[s]=a,void this._notify(!0);t<0?this._target[s]=r:(o=t/n%2,o=i&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[s]=this._fn(r,a,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][t]()}}class na{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!hs(e))return;const t=Object.keys(Ar.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const r=e[s];if(!hs(r))return;const i={};for(const e of t)i[e]=r[e];(ds(r.properties)&&r.properties||[s]).forEach(e=>{e!==s&&n.has(e)||n.set(e,i)})})}_animateOptions(e,t){const n=t.options,s=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!s)return[];const r=this._createAnimations(s,n);return n.$shared&&function(e,t){const n=[],s=Object.keys(t);for(let r=0;r<s.length;r++){const t=e[s[r]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then(()=>{e.options=n},()=>{}),r}_createAnimations(e,t){const n=this._properties,s=[],r=e.$animations||(e.$animations={}),i=Object.keys(t),a=Date.now();let o;for(o=i.length-1;o>=0;--o){const l=i[o];if("$"===l.charAt(0))continue;if("options"===l){s.push(...this._animateOptions(e,t));continue}const c=t[l];let u=r[l];const d=n.get(l);if(u){if(d&&u.active()){u.update(d,c,a);continue}u.cancel()}d&&d.duration?(r[l]=u=new ta(d,e,l,c),s.push(u)):e[l]=c}return s}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(Xi.add(this._chart,n),!0):void 0}}function sa(e,t){const n=e&&e.options||{},s=n.reverse,r=void 0===n.min?t:0,i=void 0===n.max?t:0;return{start:s?i:r,end:s?r:i}}function ra(e,t){const n=[],s=e._getSortedDatasetMetas(t);let r,i;for(r=0,i=s.length;r<i;++r)n.push(s[r].index);return n}function ia(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=e.keys,i="single"===s.mode;let a,o,l,c;if(null===t)return;let u=!1;for(a=0,o=r.length;a<o;++a){if(l=+r[a],l===n){if(u=!0,s.all)continue;break}c=e.values[l],fs(c)&&(i||0===t||Us(t)===Us(c))&&(t+=c)}return u||s.all?t:0}function aa(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function oa(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function la(e,t,n,s){for(const r of t.getMatchingVisibleMetas(s).reverse()){const t=e[r.index];if(n&&t>0||!n&&t<0)return r.index}return null}function ca(e,t){const{chart:n,_cachedMeta:s}=e,r=n._stacks||(n._stacks={}),{iScale:i,vScale:a,index:o}=s,l=i.axis,c=a.axis,u=function(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}(i,a,s),d=t.length;let h;for(let f=0;f<d;++f){const e=t[f],{[l]:n,[c]:i}=e;h=(e._stacks||(e._stacks={}))[c]=oa(r,u,n),h[o]=i,h._top=la(h,a,!0,s.type),h._bottom=la(h,a,!1,s.type);(h._visualValues||(h._visualValues={}))[o]=i}}function ua(e,t){const n=e.scales;return Object.keys(n).filter(e=>n[e].axis===t).shift()}function da(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[s]||void 0===t[s][n])return;delete t[s][n],void 0!==t[s]._visualValues&&void 0!==t[s]._visualValues[n]&&delete t[s]._visualValues[n]}}}const ha=e=>"reset"===e||"none"===e,fa=(e,t)=>t?e:Object.assign({},e);class pa{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=aa(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&da(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),s=(e,t,n,s)=>"x"===e?t:"r"===e?s:n,r=t.xAxisID=gs(n.xAxisID,ua(e,"x")),i=t.yAxisID=gs(n.yAxisID,ua(e,"y")),a=t.rAxisID=gs(n.rAxisID,ua(e,"r")),o=t.indexAxis,l=t.iAxisID=s(o,r,i,a),c=t.vAxisID=s(o,i,r,a);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(i),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&ar(this._data,this),e._stacked&&da(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(hs(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:s}=t,r="x"===n.axis?"x":"y",i="x"===s.axis?"x":"y",a=Object.keys(e),o=new Array(a.length);let l,c,u;for(l=0,c=a.length;l<c;++l)u=a[l],o[l]={[r]:u,[i]:e[u]};return o}(t,e)}else if(n!==t){if(n){ar(n,this);const e=this._cachedMeta;da(e),e._parsed=[]}t&&Object.isExtensible(t)&&(r=this,(s=t)._chartjs?s._chartjs.listeners.push(r):(Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[r]}}),ir.forEach(e=>{const t="_onData"+Ts(e),n=s[e];Object.defineProperty(s,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];const a=n.apply(this,r);return s._chartjs.listeners.forEach(e=>{"function"===typeof e[t]&&e[t](...r)}),a}})}))),this._syncList=[],this._data=t}var s,r}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let s=!1;this._dataCheck();const r=t._stacked;t._stacked=aa(t.vScale,t),t.stack!==n.stack&&(s=!0,da(t),t.stack=n.stack),this._resyncElements(e),(s||r!==t._stacked)&&(ca(this,t._parsed),t._stacked=aa(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:s}=this,{iScale:r,_stacked:i}=n,a=r.axis;let o,l,c,u=0===e&&t===s.length||n._sorted,d=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=s,n._sorted=!0,c=s;else{c=ds(s[e])?this.parseArrayData(n,s,e,t):hs(s[e])?this.parseObjectData(n,s,e,t):this.parsePrimitiveData(n,s,e,t);const r=()=>null===l[a]||d&&l[a]<d[a];for(o=0;o<t;++o)n._parsed[o+e]=l=c[o],u&&(r()&&(u=!1),d=l);n._sorted=u}i&&ca(this,c)}parsePrimitiveData(e,t,n,s){const{iScale:r,vScale:i}=e,a=r.axis,o=i.axis,l=r.getLabels(),c=r===i,u=new Array(s);let d,h,f;for(d=0,h=s;d<h;++d)f=d+n,u[d]={[a]:c||r.parse(l[f],f),[o]:i.parse(t[f],f)};return u}parseArrayData(e,t,n,s){const{xScale:r,yScale:i}=e,a=new Array(s);let o,l,c,u;for(o=0,l=s;o<l;++o)c=o+n,u=t[c],a[o]={x:r.parse(u[0],c),y:i.parse(u[1],c)};return a}parseObjectData(e,t,n,s){const{xScale:r,yScale:i}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l=new Array(s);let c,u,d,h;for(c=0,u=s;c<u;++c)d=c+n,h=t[d],l[c]={x:r.parse(Cs(h,a),d),y:i.parse(Cs(h,o),d)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const s=this.chart,r=this._cachedMeta,i=t[e.axis];return ia({keys:ra(s,!0),values:t._stacks[e.axis]._visualValues},i,r.index,{mode:n})}updateRangeFromParsed(e,t,n,s){const r=n[t.axis];let i=null===r?NaN:r;const a=s&&n._stacks[t.axis];s&&a&&(s.values=a,i=ia(s,r,this._cachedMeta.index)),e.min=Math.min(e.min,i),e.max=Math.max(e.max,i)}getMinMax(e,t){const n=this._cachedMeta,s=n._parsed,r=n._sorted&&e===n.iScale,i=s.length,a=this._getOtherScale(e),o=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:ra(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:s,maxDefined:r}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(a);let d,h;function f(){h=s[d];const t=h[a.axis];return!fs(h[e.axis])||c>t||u<t}for(d=0;d<i&&(f()||(this.updateRangeFromParsed(l,e,h,o),!r));++d);if(r)for(d=i-1;d>=0;--d)if(!f()){this.updateRangeFromParsed(l,e,h,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let s,r,i;for(s=0,r=t.length;s<r;++s)i=t[s][e.axis],fs(i)&&n.push(i);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,s=t.vScale,r=this.getParsed(e);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,s,r;return hs(e)?(t=e.top,n=e.right,s=e.bottom,r=e.left):t=n=s=r=e,{top:t,right:n,bottom:s,left:r,disabled:!1===e}}(gs(this.options.clip,function(e,t,n){if(!1===n)return!1;const s=sa(e,n),r=sa(t,n);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,s=n.data||[],r=t.chartArea,i=[],a=this._drawStart||0,o=this._drawCount||s.length-a,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,r,a,o),c=a;c<a+o;++c){const t=s[c];t.hidden||(t.active&&l?i.push(t):t.draw(e,r))}for(c=0;c<i.length;++c)i[c].draw(e,r)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const s=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];r=t.$context||(t.$context=function(e,t,n){return si(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),r.parsed=this.getParsed(e),r.raw=s.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=function(e,t){return si(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=n,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const s="active"===t,r=this._cachedDataOpts,i=e+"-"+t,a=r[i],o=this.enableOptionSharing&&Es(n);if(a)return fa(a,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=s?[`${e}Hover`,"hover",e,""]:[e,""],d=l.getOptionScopes(this.getDataset(),c),h=Object.keys(Ar.elements[e]),f=l.resolveNamedOptions(d,h,()=>this.getContext(n,s,t),u);return f.$shared&&(f.$shared=o,r[i]=Object.freeze(fa(f,o))),f}_resolveAnimations(e,t,n){const s=this.chart,r=this._cachedDataOpts,i=`animation-${t}`,a=r[i];if(a)return a;let o;if(!1!==s.options.animation){const s=this.chart.config,r=s.datasetAnimationScopeKeys(this._type,t),i=s.getOptionScopes(this.getDataset(),r);o=s.createResolver(i,this.getContext(e,n,t))}const l=new na(s,o&&o.animations);return o&&o._cacheable&&(r[i]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||ha(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),s=this._sharedOptions,r=this.getSharedOptions(n),i=this.includeOptions(t,r)||r!==s;return this.updateSharedOptions(r,t,n),{sharedOptions:r,includeOptions:i}}updateElement(e,t,n,s){ha(s)?Object.assign(e,n):this._resolveAnimations(t,s).update(e,n)}updateSharedOptions(e,t,n){e&&!ha(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,s){e.active=s;const r=this.getStyle(t,s);this._resolveAnimations(t,n,s).update(e,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[a,o,l]of this._syncList)this[a](o,l);this._syncList=[];const s=n.length,r=t.length,i=Math.min(r,s);i&&this.parse(0,i),r>s?this._insertElements(s,r-s,e):r<s&&this._removeElements(r,s-r)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const s=this._cachedMeta,r=s.data,i=e+t;let a;const o=e=>{for(e.length+=t,a=e.length-1;a>=i;a--)e[a]=e[a-t]};for(o(r),a=e;a<i;++a)r[a]=new this.dataElementType;this._parsing&&o(s._parsed),this.parse(e,t),n&&this.updateElements(r,e,t,"reset")}updateElements(e,t,n,s){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const s=n._parsed.splice(e,t);n._stacked&&da(n,s)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,s]=e;this[t](n,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class ga extends pa{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:s=[],_dataset:r}=t,i=this.chart._animationsDisabled;let{start:a,count:o}=hr(t,s,i);this._drawStart=a,this._drawCount=o,fr(t)&&(a=0,o=s.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=s;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!i,options:l},e),this.updateElements(s,a,o,e)}updateElements(e,t,n,s){const r="reset"===s,{iScale:i,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,s),d=i.axis,h=a.axis,{spanGaps:f,segment:p}=this.options,g=Hs(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||r||"none"===s,v=t+n,b=e.length;let y=t>0&&this.getParsed(t-1);for(let x=0;x<b;++x){const n=e[x],f=m?n:{};if(x<t||x>=v){f.skip=!0;continue}const b=this.getParsed(x),w=us(b[h]),_=f[d]=i.getPixelForValue(b[d],x),k=f[h]=r||w?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,b,o):b[h],x);f.skip=isNaN(_)||isNaN(k)||w,f.stop=x>0&&Math.abs(b[d]-y[d])>g,p&&(f.parsed=b,f.raw=l.data[x]),u&&(f.options=c||this.resolveDataElementOptions(x,n.active?"active":s)),m||this.updateElement(n,x,f,s),y=b}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,s=e.data||[];if(!s.length)return n;const r=s[0].size(this.resolveDataElementOptions(0)),i=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(n,r,i)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function ma(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class va{static override(e){Object.assign(va.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return ma()}parse(){return ma()}format(){return ma()}add(){return ma()}diff(){return ma()}startOf(){return ma()}endOf(){return ma()}}var ba=va;function ya(e,t,n,s){const{controller:r,data:i,_sorted:a}=e,o=r._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&a&&i.length){const a=o._reversePixels?rr:sr;if(!s){const s=a(i,t,n);if(l){const{vScale:t}=r._cachedMeta,{_parsed:n}=e,i=n.slice(0,s.lo+1).reverse().findIndex(e=>!us(e[t.axis]));s.lo-=Math.max(0,i);const a=n.slice(s.hi).findIndex(e=>!us(e[t.axis]));s.hi+=Math.max(0,a)}return s}if(r._sharedOptions){const e=i[0],s="function"===typeof e.getRange&&e.getRange(t);if(s){const e=a(i,t,n-s),r=a(i,t,n+s);return{lo:e.lo,hi:r.hi}}}}return{lo:0,hi:i.length-1}}function xa(e,t,n,s,r){const i=e.getSortedVisibleDatasetMetas(),a=n[t];for(let o=0,l=i.length;o<l;++o){const{index:e,data:n}=i[o],{lo:l,hi:c}=ya(i[o],t,a,r);for(let t=l;t<=c;++t){const r=n[t];r.skip||s(r,e,t)}}}function wa(e,t,n,s,r){const i=[];if(!r&&!e.isPointInArea(t))return i;return xa(e,n,t,function(n,a,o){(r||zr(n,e.chartArea,0))&&n.inRange(t.x,t.y,s)&&i.push({element:n,datasetIndex:a,index:o})},!0),i}function _a(e,t,n,s,r,i){let a=[];const o=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,s){const r=t?Math.abs(e.x-s.x):0,i=n?Math.abs(e.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(i,2))}}(n);let l=Number.POSITIVE_INFINITY;return xa(e,n,t,function(n,c,u){const d=n.inRange(t.x,t.y,r);if(s&&!d)return;const h=n.getCenterPoint(r);if(!(!!i||e.isPointInArea(h))&&!d)return;const f=o(t,h);f<l?(a=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&a.push({element:n,datasetIndex:c,index:u})}),a}function ka(e,t,n,s,r,i){return i||e.isPointInArea(t)?"r"!==n||s?_a(e,t,n,s,r,i):function(e,t,n,s){let r=[];return xa(e,n,t,function(e,n,i){const{startAngle:a,endAngle:o}=e.getProps(["startAngle","endAngle"],s),{angle:l}=Ys(e,{x:t.x,y:t.y});Zs(l,a,o)&&r.push({element:e,datasetIndex:n,index:i})}),r}(e,t,n,r):[]}function Sa(e,t,n,s,r){const i=[],a="x"===n?"inXRange":"inYRange";let o=!1;return xa(e,n,t,(e,s,l)=>{e[a]&&e[a](t[n],r)&&(i.push({element:e,datasetIndex:s,index:l}),o=o||e.inRange(t.x,t.y,r))}),s&&!o?[]:i}var ja={evaluateInteractionItems:xa,modes:{index(e,t,n,s){const r=Pi(t,e),i=n.axis||"x",a=n.includeInvisible||!1,o=n.intersect?wa(e,r,i,s,a):ka(e,r,i,!1,s,a),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,n,s){const r=Pi(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;let o=n.intersect?wa(e,r,i,s,a):ka(e,r,i,!1,s,a);if(o.length>0){const t=o[0].datasetIndex,n=e.getDatasetMeta(t).data;o=[];for(let e=0;e<n.length;++e)o.push({element:n[e],datasetIndex:t,index:e})}return o},point:(e,t,n,s)=>wa(e,Pi(t,e),n.axis||"xy",s,n.includeInvisible||!1),nearest(e,t,n,s){const r=Pi(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;return ka(e,r,i,n.intersect,s,a)},x:(e,t,n,s)=>Sa(e,Pi(t,e),"x",n.intersect,s),y:(e,t,n,s)=>Sa(e,Pi(t,e),"y",n.intersect,s)}};const Na=["left","top","right","bottom"];function Ca(e,t){return e.filter(e=>e.pos===t)}function Ta(e,t){return e.filter(e=>-1===Na.indexOf(e.pos)&&e.box.axis===t)}function Ea(e,t){return e.sort((e,n)=>{const s=t?n:e,r=t?e:n;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function Pa(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:s,stackWeight:r}=n;if(!e||!Na.includes(s))continue;const i=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});i.count++,i.weight+=r}return t}(e),{vBoxMaxWidth:s,hBoxMaxHeight:r}=t;let i,a,o;for(i=0,a=e.length;i<a;++i){o=e[i];const{fullSize:a}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*s:a&&t.availableWidth,o.height=r):(o.width=s,o.height=c?c*r:a&&t.availableHeight)}return n}function Oa(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function Aa(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Ma(e,t,n,s){const{pos:r,box:i}=n,a=e.maxPadding;if(!hs(r)){n.size&&(e[r]-=n.size);const t=s[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?i.height:i.width),n.size=t.size/t.count,e[r]+=n.size}i.getPadding&&Aa(a,i.getPadding());const o=Math.max(0,t.outerWidth-Oa(a,e,"left","right")),l=Math.max(0,t.outerHeight-Oa(a,e,"top","bottom")),c=o!==e.w,u=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function Ia(e,t){const n=t.maxPadding;function s(e){const s={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{s[e]=Math.max(t[e],n[e])}),s}return s(e?["left","right"]:["top","bottom"])}function Ra(e,t,n,s){const r=[];let i,a,o,l,c,u;for(i=0,a=e.length,c=0;i<a;++i){o=e[i],l=o.box,l.update(o.width||t.w,o.height||t.h,Ia(o.horizontal,t));const{same:a,other:d}=Ma(t,n,o,s);c|=a&&r.length,u=u||d,l.fullSize||r.push(o)}return c&&Ra(r,t,n,s)||u}function La(e,t,n,s,r){e.top=n,e.left=t,e.right=t+s,e.bottom=n+r,e.width=s,e.height=r}function Da(e,t,n,s){const r=n.padding;let{x:i,y:a}=t;for(const o of e){const e=o.box,l=s[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const s=t.w*c,i=l.size||e.height;Es(l.start)&&(a=l.start),e.fullSize?La(e,r.left,a,n.outerWidth-r.right-r.left,i):La(e,t.left+l.placed,a,s,i),l.start=a,l.placed+=s,a=e.bottom}else{const s=t.h*c,a=l.size||e.width;Es(l.start)&&(i=l.start),e.fullSize?La(e,i,r.top,a,n.outerHeight-r.bottom-r.top):La(e,i,t.top+l.placed,a,s),l.start=i,l.placed+=s,i=e.right}}t.x=i,t.y=a}var za={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const r=ei(e.options.layout.padding),i=Math.max(t-r.width,0),a=Math.max(n-r.height,0),o=function(e){const t=function(e){const t=[];let n,s,r,i,a,o;for(n=0,s=(e||[]).length;n<s;++n)r=e[n],({position:i,options:{stack:a,stackWeight:o=1}}=r),t.push({index:n,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&i+a,stackWeight:o});return t}(e),n=Ea(t.filter(e=>e.box.fullSize),!0),s=Ea(Ca(t,"left"),!0),r=Ea(Ca(t,"right")),i=Ea(Ca(t,"top"),!0),a=Ea(Ca(t,"bottom")),o=Ta(t,"x"),l=Ta(t,"y");return{fullSize:n,leftAndTop:s.concat(i),rightAndBottom:r.concat(l).concat(a).concat(o),chartArea:Ca(t,"chartArea"),vertical:s.concat(r).concat(l),horizontal:i.concat(a).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;bs(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const u=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:i,availableHeight:a,vBoxMaxWidth:i/2/u,hBoxMaxHeight:a/2}),h=Object.assign({},r);Aa(h,ei(s));const f=Object.assign({maxPadding:h,w:i,h:a,x:r.left,y:r.top},r),p=Pa(l.concat(c),d);Ra(o.fullSize,f,d,p),Ra(l,f,d,p),Ra(c,f,d,p)&&Ra(l,f,d,p),function(e){const t=e.maxPadding;function n(n){const s=Math.max(t[n]-e[n],0);return e[n]+=s,s}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),Da(o.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,Da(o.rightAndBottom,f,d,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},bs(o.chartArea,t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class $a{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,s){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,s?Math.floor(t/s):n)}}isAttached(e){return!0}updateConfig(e){}}class Fa extends $a{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ua="$chartjs",Ba={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Wa=e=>null===e||""===e;const Ha=!!Ii&&{passive:!0};function Va(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,Ha)}function qa(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function Ka(e,t,n){const s=e.canvas,r=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||qa(n.addedNodes,s),t=t&&!qa(n.removedNodes,s);t&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function Ga(e,t,n){const s=e.canvas,r=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||qa(n.removedNodes,s),t=t&&!qa(n.addedNodes,s);t&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Ya=new Map;let Ja=0;function Qa(){const e=window.devicePixelRatio;e!==Ja&&(Ja=e,Ya.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function Xa(e,t,n){const s=e.canvas,r=s&&ji(s);if(!r)return;const i=cr((e,t)=>{const s=r.clientWidth;n(e,t),s<r.clientWidth&&n()},window),a=new ResizeObserver(e=>{const t=e[0],n=t.contentRect.width,s=t.contentRect.height;0===n&&0===s||i(n,s)});return a.observe(r),function(e,t){Ya.size||window.addEventListener("resize",Qa),Ya.set(e,t)}(e,i),a}function Za(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){Ya.delete(e),Ya.size||window.removeEventListener("resize",Qa)}(e)}function eo(e,t,n){const s=e.canvas,r=cr(t=>{null!==e.ctx&&n(function(e,t){const n=Ba[e.type]||e.type,{x:s,y:r}=Pi(e,t);return{type:n,chart:t,native:e,x:void 0!==s?s:null,y:void 0!==r?r:null}}(t,e))},e);return function(e,t,n){e&&e.addEventListener(t,n,Ha)}(s,t,r),r}class to extends $a{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,s=e.getAttribute("height"),r=e.getAttribute("width");if(e[Ua]={initial:{height:s,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Wa(r)){const t=Ri(e,"width");void 0!==t&&(e.width=t)}if(Wa(s))if(""===e.style.height)e.height=e.width/(t||2);else{const t=Ri(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[Ua])return!1;const n=t[Ua].initial;["height","width"].forEach(e=>{const s=n[e];us(s)?t.removeAttribute(e):t.setAttribute(e,s)});const s=n.style||{};return Object.keys(s).forEach(e=>{t.style[e]=s[e]}),t.width=t.width,delete t[Ua],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const s=e.$proxies||(e.$proxies={}),r={attach:Ka,detach:Ga,resize:Xa}[t]||eo;s[t]=r(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),s=n[t];if(!s)return;({attach:Za,detach:Za,resize:Za}[t]||Va)(e,t,s),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,s){return Ai(e,t,n,s)}isAttached(e){const t=e&&ji(e);return!(!t||!t.isConnected)}}class no{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return Hs(this.x)&&Hs(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const s={};return e.forEach(e=>{s[e]=n[e]&&n[e].active()?n[e]._to:this[e]}),s}}function so(e,t){const n=e.options.ticks,s=function(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(s,r))}(e),r=Math.min(n.maxTicksLimit||s,s),i=n.major.enabled?function(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}(t):[],a=i.length,o=i[0],l=i[a-1],c=[];if(a>r)return function(e,t,n,s){let r,i=0,a=n[0];for(s=Math.ceil(s),r=0;r<e.length;r++)r===a&&(t.push(e[r]),i++,a=n[i*s])}(t,c,i,a/r),c;const u=function(e,t,n){const s=function(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}(e),r=t.length/n;if(!s)return Math.max(r,1);const i=function(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(0|n)&&t.push(n),t.sort((e,t)=>e-t).pop(),t}(s);for(let a=0,o=i.length-1;a<o;a++){const e=i[a];if(e>r)return e}return Math.max(r,1)}(i,t,r);if(a>0){let e,n;const s=a>1?Math.round((l-o)/(a-1)):null;for(ro(t,c,u,us(s)?0:o-s,o),e=0,n=a-1;e<n;e++)ro(t,c,u,i[e],i[e+1]);return ro(t,c,u,l,us(s)?t.length:l+s),c}return ro(t,c,u),c}function ro(e,t,n,s,r){const i=gs(s,0),a=Math.min(gs(r,e.length),e.length);let o,l,c,u=0;for(n=Math.ceil(n),r&&(o=r-s,n=o/Math.floor(o/n)),c=i;c<0;)u++,c=Math.round(i+u*n);for(l=Math.max(i,0);l<a;l++)l===c&&(t.push(e[l]),u++,c=Math.round(i+u*n))}const io=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,ao=(e,t)=>Math.min(t||e,e);function oo(e,t){const n=[],s=e.length/t,r=e.length;let i=0;for(;i<r;i+=s)n.push(e[Math.floor(i)]);return n}function lo(e,t,n){const s=e.ticks.length,r=Math.min(t,s-1),i=e._startPixel,a=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(r);if(!(n&&(l=1===s?Math.max(c-i,a-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(r-1))/2,c+=r<t?l:-l,c<i-o||c>a+o)))return c}function co(e){return e.drawTicks?e.tickLength:0}function uo(e,t){if(!e.display)return 0;const n=ti(e.font,t),s=ei(e.padding);return(ds(e.text)?e.text.length:1)*n.lineHeight+s.height}function ho(e,t,n){let s=ur(e);return(n&&"right"!==t||!n&&"right"===t)&&(s=(e=>"left"===e?"right":"right"===e?"left":e)(s)),s}class fo extends no{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:s}=this;return e=ps(e,Number.POSITIVE_INFINITY),t=ps(t,Number.NEGATIVE_INFINITY),n=ps(n,Number.POSITIVE_INFINITY),s=ps(s,Number.NEGATIVE_INFINITY),{min:ps(e,n),max:ps(t,s),minDefined:fs(e),maxDefined:fs(t)}}getMinMax(e){let t,{min:n,max:s,minDefined:r,maxDefined:i}=this.getUserBounds();if(r&&i)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let o=0,l=a.length;o<l;++o)t=a[o].controller.getMinMax(this,e),r||(n=Math.min(n,t.min)),i||(s=Math.max(s,t.max));return n=i&&n>s?s:n,s=r&&n>s?n:s,{min:ps(n,ps(s,n)),max:ps(s,ps(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){vs(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:s,grace:r,ticks:i}=this.options,a=i.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:s,max:r}=e,i=ms(t,(r-s)/2),a=(e,t)=>n&&0===e?0:e+t;return{min:a(s,-Math.abs(i)),max:a(r,i)}}(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=a<this.ticks.length;this._convertTicksToLabels(o?oo(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),i.display&&(i.autoSkip||"auto"===i.source)&&(this.ticks=so(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){vs(this.options.afterUpdate,[this])}beforeSetDimensions(){vs(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){vs(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),vs(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){vs(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,s,r;for(n=0,s=e.length;n<s;n++)r=e[n],r.label=vs(t.callback,[r.value,n,e],this)}afterTickToLabelConversion(){vs(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){vs(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=ao(this.ticks.length,e.ticks.maxTicksLimit),s=t.minRotation||0,r=t.maxRotation;let i,a,o,l=s;if(!this._isVisible()||!t.display||s>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=s);const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,h=er(this.chart.width-u,0,this.maxWidth);i=e.offset?this.maxWidth/n:h/(n-1),u+6>i&&(i=h/(n-(e.offset?.5:1)),a=this.maxHeight-co(e.grid)-t.padding-uo(e.title,this.chart.options.font),o=Math.sqrt(u*u+d*d),l=Ks(Math.min(Math.asin(er((c.highest.height+6)/i,-1,1)),Math.asin(er(a/o,-1,1))-Math.asin(er(d/o,-1,1)))),l=Math.max(s,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){vs(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){vs(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:s,grid:r}}=this,i=this._isVisible(),a=this.isHorizontal();if(i){const i=uo(s,t.options.font);if(a?(e.width=this.maxWidth,e.height=co(r)+i):(e.height=this.maxHeight,e.width=co(r)+i),n.display&&this.ticks.length){const{first:t,last:s,widest:r,highest:i}=this._getLabelSizes(),o=2*n.padding,l=qs(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(a){const t=n.mirror?0:u*r.width+c*i.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=n.mirror?0:c*r.width+u*i.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,s,u,c)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,s){const{ticks:{align:r,padding:i},position:a}=this.options,o=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,d=0;o?l?(u=s*e.width,d=n*t.height):(u=n*e.height,d=s*t.width):"start"===r?d=t.width:"end"===r?u=e.width:"inner"!==r&&(u=e.width/2,d=t.width/2),this.paddingLeft=Math.max((u-a+i)*this.width/(this.width-a),0),this.paddingRight=Math.max((d-c+i)*this.width/(this.width-c),0)}else{let n=t.height/2,s=e.height/2;"start"===r?(n=0,s=e.height):"end"===r&&(n=t.height,s=0),this.paddingTop=n+i,this.paddingBottom=s+i}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){vs(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)us(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=oo(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:s,_longestTextCache:r}=this,i=[],a=[],o=Math.floor(t/ao(t,n));let l,c,u,d,h,f,p,g,m,v,b,y=0,x=0;for(l=0;l<t;l+=o){if(d=e[l].label,h=this._resolveTickFontOptions(l),s.font=f=h.string,p=r[f]=r[f]||{data:{},gc:[]},g=h.lineHeight,m=v=0,us(d)||ds(d)){if(ds(d))for(c=0,u=d.length;c<u;++c)b=d[c],us(b)||ds(b)||(m=Mr(s,p.data,p.gc,m,b),v+=g)}else m=Mr(s,p.data,p.gc,m,d),v=g;i.push(m),a.push(v),y=Math.max(m,y),x=Math.max(v,x)}!function(e,t){bs(e,e=>{const n=e.gc,s=n.length/2;let r;if(s>t){for(r=0;r<s;++r)delete e.data[n[r]];n.splice(0,s)}})}(r,t);const w=i.indexOf(y),_=a.indexOf(x),k=e=>({width:i[e]||0,height:a[e]||0});return{first:k(0),last:k(t-1),widest:k(w),highest:k(_),widths:i,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return er(this._alignToPixels?Ir(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return si(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=si(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=qs(this.labelRotation),n=Math.abs(Math.cos(t)),s=Math.abs(Math.sin(t)),r=this._getLabelSizes(),i=e.autoSkipPadding||0,a=r?r.widest.width+i:0,o=r?r.highest.height+i:0;return this.isHorizontal()?o*n>a*s?a/n:o/s:o*s<a*n?o/n:a/s}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,s=this.options,{grid:r,position:i,border:a}=s,o=r.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),u=co(r),d=[],h=a.setContext(this.getContext()),f=h.display?h.width:0,p=f/2,g=function(e){return Ir(n,e,f)};let m,v,b,y,x,w,_,k,S,j,N,C;if("top"===i)m=g(this.bottom),w=this.bottom-u,k=m-p,j=g(e.top)+p,C=e.bottom;else if("bottom"===i)m=g(this.top),j=e.top,C=g(e.bottom)-p,w=m+p,k=this.top+u;else if("left"===i)m=g(this.right),x=this.right-u,_=m-p,S=g(e.left)+p,N=e.right;else if("right"===i)m=g(this.left),S=e.left,N=g(e.right)-p,x=m+p,_=this.left+u;else if("x"===t){if("center"===i)m=g((e.top+e.bottom)/2+.5);else if(hs(i)){const e=Object.keys(i)[0],t=i[e];m=g(this.chart.scales[e].getPixelForValue(t))}j=e.top,C=e.bottom,w=m+p,k=w+u}else if("y"===t){if("center"===i)m=g((e.left+e.right)/2);else if(hs(i)){const e=Object.keys(i)[0],t=i[e];m=g(this.chart.scales[e].getPixelForValue(t))}x=m-p,_=x-u,S=e.left,N=e.right}const T=gs(s.ticks.maxTicksLimit,c),E=Math.max(1,Math.ceil(c/T));for(v=0;v<c;v+=E){const e=this.getContext(v),t=r.setContext(e),s=a.setContext(e),i=t.lineWidth,c=t.color,u=s.dash||[],h=s.dashOffset,f=t.tickWidth,p=t.tickColor,g=t.tickBorderDash||[],m=t.tickBorderDashOffset;b=lo(this,v,o),void 0!==b&&(y=Ir(n,b,i),l?x=_=S=N=y:w=k=j=C=y,d.push({tx1:x,ty1:w,tx2:_,ty2:k,x1:S,y1:j,x2:N,y2:C,width:i,color:c,borderDash:u,borderDashOffset:h,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,d}_computeLabelItems(e){const t=this.axis,n=this.options,{position:s,ticks:r}=n,i=this.isHorizontal(),a=this.ticks,{align:o,crossAlign:l,padding:c,mirror:u}=r,d=co(n.grid),h=d+c,f=u?-c:h,p=-qs(this.labelRotation),g=[];let m,v,b,y,x,w,_,k,S,j,N,C,T="middle";if("top"===s)w=this.bottom-f,_=this._getXAxisLabelAlignment();else if("bottom"===s)w=this.top+f,_=this._getXAxisLabelAlignment();else if("left"===s){const e=this._getYAxisLabelAlignment(d);_=e.textAlign,x=e.x}else if("right"===s){const e=this._getYAxisLabelAlignment(d);_=e.textAlign,x=e.x}else if("x"===t){if("center"===s)w=(e.top+e.bottom)/2+h;else if(hs(s)){const e=Object.keys(s)[0],t=s[e];w=this.chart.scales[e].getPixelForValue(t)+h}_=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===s)x=(e.left+e.right)/2-h;else if(hs(s)){const e=Object.keys(s)[0],t=s[e];x=this.chart.scales[e].getPixelForValue(t)}_=this._getYAxisLabelAlignment(d).textAlign}"y"===t&&("start"===o?T="top":"end"===o&&(T="bottom"));const E=this._getLabelSizes();for(m=0,v=a.length;m<v;++m){b=a[m],y=b.label;const e=r.setContext(this.getContext(m));k=this.getPixelForTick(m)+r.labelOffset,S=this._resolveTickFontOptions(m),j=S.lineHeight,N=ds(y)?y.length:1;const t=N/2,n=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let d,h=_;if(i?(x=k,"inner"===_&&(h=m===v-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),C="top"===s?"near"===l||0!==p?-N*j+j/2:"center"===l?-E.highest.height/2-t*j+j:-E.highest.height+j/2:"near"===l||0!==p?j/2:"center"===l?E.highest.height/2-t*j:E.highest.height-N*j,u&&(C*=-1),0===p||e.showLabelBackdrop||(x+=j/2*Math.sin(p))):(w=k,C=(1-N)*j/2),e.showLabelBackdrop){const t=ei(e.backdropPadding),n=E.heights[m],s=E.widths[m];let r=C-t.top,i=0-t.left;switch(T){case"middle":r-=n/2;break;case"bottom":r-=n}switch(_){case"center":i-=s/2;break;case"right":i-=s;break;case"inner":m===v-1?i-=s:m>0&&(i-=s/2)}d={left:i,top:r,width:s+t.width,height:n+t.height,color:e.backdropColor}}g.push({label:y,font:S,textOffset:C,options:{rotation:p,color:n,strokeColor:o,strokeWidth:c,textAlign:h,textBaseline:T,translation:[x,w],backdrop:d}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-qs(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:s,padding:r}}=this.options,i=e+r,a=this._getLabelSizes().widest.width;let o,l;return"left"===t?s?(l=this.right+r,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l+=a)):(l=this.right-i,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l=this.left)):"right"===t?s?(l=this.left+r,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l-=a)):(l=this.left+i,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:s,width:r,height:i}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,s,r,i),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(t=>t.value===e);if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,i;const a=(e,t,s)=>{s.width&&s.color&&(n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.setLineDash(s.borderDash||[]),n.lineDashOffset=s.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(r=0,i=s.length;r<i;++r){const e=s[r];t.drawOnChartArea&&a({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&a({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:s}}=this,r=n.setContext(this.getContext()),i=n.display?r.width:0;if(!i)return;const a=s.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,u,d;this.isHorizontal()?(l=Ir(e,this.left,i)-i/2,c=Ir(e,this.right,a)+a/2,u=d=o):(u=Ir(e,this.top,i)-i/2,d=Ir(e,this.bottom,a)+a/2,l=c=o),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&$r(t,n);const s=this.getLabelItems(e);for(const r of s){const e=r.options,n=r.font;Vr(t,r.label,0,r.textOffset,n,e)}n&&Fr(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:s}}=this;if(!n.display)return;const r=ti(n.font),i=ei(n.padding),a=n.align;let o=r.lineHeight/2;"bottom"===t||"center"===t||hs(t)?(o+=i.bottom,ds(n.text)&&(o+=r.lineHeight*(n.text.length-1))):o+=i.top;const{titleX:l,titleY:c,maxWidth:u,rotation:d}=function(e,t,n,s){const{top:r,left:i,bottom:a,right:o,chart:l}=e,{chartArea:c,scales:u}=l;let d,h,f,p=0;const g=a-r,m=o-i;if(e.isHorizontal()){if(h=dr(s,i,o),hs(n)){const e=Object.keys(n)[0],s=n[e];f=u[e].getPixelForValue(s)+g-t}else f="center"===n?(c.bottom+c.top)/2+g-t:io(e,n,t);d=o-i}else{if(hs(n)){const e=Object.keys(n)[0],s=n[e];h=u[e].getPixelForValue(s)-m+t}else h="center"===n?(c.left+c.right)/2-m+t:io(e,n,t);f=dr(s,a,r),p="left"===n?-Ds:Ds}return{titleX:h,titleY:f,maxWidth:d,rotation:p}}(this,o,t,a);Vr(e,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:d,textAlign:ho(a,t,s),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=gs(e.grid&&e.grid.z,-1),s=gs(e.border&&e.border.z,0);return this._isVisible()&&this.draw===fo.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[];let r,i;for(r=0,i=t.length;r<i;++r){const i=t[r];i[n]!==this.id||e&&i.type!==e||s.push(i)}return s}_resolveTickFontOptions(e){return ti(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class po{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const s=this.items,r=e.id,i=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in s||(s[r]=e,function(e,t,n){const s=ks(Object.create(null),[n?Ar.get(n):{},Ar.get(t),e.defaults]);Ar.set(t,s),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),r=s.pop(),i=[e].concat(s).join("."),a=t[n].split("."),o=a.pop(),l=a.join(".");Ar.route(i,r,l,o)})}(t,e.defaultRoutes);e.descriptors&&Ar.describe(t,e.descriptors)}(e,i,n),this.override&&Ar.override(e.id,e.overrides)),i}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,s=this.scope;n in t&&delete t[n],s&&n in Ar[s]&&(delete Ar[s][n],this.override&&delete Cr[n])}}class go{constructor(){this.controllers=new po(pa,"datasets",!0),this.elements=new po(no,"elements"),this.plugins=new po(Object,"plugins"),this.scales=new po(fo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach(t=>{const s=n||this._getRegistryForType(t);n||s.isForType(t)||s===this.plugins&&t.id?this._exec(e,s,t):bs(t,t=>{const s=n||this._getRegistryForType(t);this._exec(e,s,t)})})}_exec(e,t,n){const s=Ts(e);vs(n["before"+s],[],n),t[e](n),vs(n["after"+s],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const s=t.get(e);if(void 0===s)throw new Error('"'+e+'" is not a registered '+n+".");return s}}var mo=new go;class vo{constructor(){this._init=[]}notify(e,t,n,s){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=s?this._descriptors(e).filter(s):this._descriptors(e),i=this._notify(r,e,t,n);return"afterDestroy"===t&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),i}_notify(e,t,n,s){s=s||{};for(const r of e){const e=r.plugin;if(!1===vs(e[n],[t,s,r.options],e)&&s.cancelable)return!1}return!0}invalidate(){us(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,s=gs(n.options&&n.options.plugins,{}),r=function(e){const t={},n=[],s=Object.keys(mo.plugins.items);for(let i=0;i<s.length;i++)n.push(mo.getPlugin(s[i]));const r=e.plugins||[];for(let i=0;i<r.length;i++){const e=r[i];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==s||t?function(e,t,n,s){let{plugins:r,localIds:i}=t;const a=[],o=e.getContext();for(const l of r){const t=l.id,r=bo(n[t],s);null!==r&&a.push({plugin:l,options:yo(e.config,{plugin:l,local:i[t]},r,o)})}return a}(e,r,s,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,s=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(s(t,n),e,"stop"),this._notify(s(n,t),e,"start")}}function bo(e,t){return t||!1!==e?!0===e?{}:e:null}function yo(e,t,n,s){let{plugin:r,local:i}=t;const a=e.pluginScopeKeys(r),o=e.getOptionScopes(n,a);return i&&r.defaults&&o.push(r.defaults),e.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function xo(e,t){const n=Ar.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function wo(e){if("x"===e||"y"===e||"r"===e)return e}function _o(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function ko(e){if(wo(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];for(const r of n){const t=r.axis||_o(r.position)||e.length>1&&wo(e[0].toLowerCase());if(t)return t}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function So(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function jo(e,t){const n=Cr[e.type]||{scales:{}},s=t.scales||{},r=xo(e.type,t),i=Object.create(null);return Object.keys(s).forEach(t=>{const a=s[t];if(!hs(a))return console.error(`Invalid scale configuration for scale: ${t}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const o=ko(t,a,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(n.length)return So(e,"x",n[0])||So(e,"y",n[0])}return{}}(t,e),Ar.scales[a.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,r),c=n.scales||{};i[t]=Ss(Object.create(null),[{axis:o},a,c[o],c[l]])}),e.data.datasets.forEach(n=>{const r=n.type||e.type,a=n.indexAxis||xo(r,t),o=(Cr[r]||{}).scales||{};Object.keys(o).forEach(e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,a),r=n[t+"AxisID"]||t;i[r]=i[r]||Object.create(null),Ss(i[r],[{axis:t},s[r],o[e]])})}),Object.keys(i).forEach(e=>{const t=i[e];Ss(t,[Ar.scales[t.type],Ar.scale])}),i}function No(e){const t=e.options||(e.options={});t.plugins=gs(t.plugins,{}),t.scales=jo(e,t)}function Co(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const To=new Map,Eo=new Set;function Po(e,t){let n=To.get(e);return n||(n=t(),To.set(e,n),Eo.add(n)),n}const Oo=(e,t,n)=>{const s=Cs(t,n);void 0!==s&&e.add(s)};class Ao{constructor(e){this._config=function(e){return(e=e||{}).data=Co(e.data),No(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Co(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),No(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Po(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Po(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Po(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id;return Po(`${this.type}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let s=n.get(e);return s&&!t||(s=new Map,n.set(e,s)),s}getOptionScopes(e,t,n){const{options:s,type:r}=this,i=this._cachedScopes(e,n),a=i.get(t);if(a)return a;const o=new Set;t.forEach(t=>{e&&(o.add(e),t.forEach(t=>Oo(o,e,t))),t.forEach(e=>Oo(o,s,e)),t.forEach(e=>Oo(o,Cr[r]||{},e)),t.forEach(e=>Oo(o,Ar,e)),t.forEach(e=>Oo(o,Tr,e))});const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),Eo.has(t)&&i.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,Cr[t]||{},Ar.datasets[t]||{},{type:t},Ar,Tr]}resolveNamedOptions(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const r={$shared:!0},{resolver:i,subPrefixes:a}=Mo(this._resolverCache,e,s);let o=i;if(function(e,t){const{isScriptable:n,isIndexable:s}=ai(e);for(const r of t){const t=n(r),i=s(r),a=(i||t)&&e[r];if(t&&(Ps(a)||Io(a))||i&&ds(a))return!0}return!1}(i,t)){r.$shared=!1;o=ii(i,n=Ps(n)?n():n,this.createResolver(e,n,a))}for(const l of t)r[l]=o[l];return r}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],s=arguments.length>3?arguments[3]:void 0;const{resolver:r}=Mo(this._resolverCache,e,n);return hs(t)?ii(r,t,void 0,s):r}}function Mo(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const r=n.join();let i=s.get(r);if(!i){i={resolver:ri(t,n),subPrefixes:n.filter(e=>!e.toLowerCase().includes("hover"))},s.set(r,i)}return i}const Io=e=>hs(e)&&Object.getOwnPropertyNames(e).some(t=>Ps(e[t]));const Ro=["top","bottom","left","right","chartArea"];function Lo(e,t){return"top"===e||"bottom"===e||-1===Ro.indexOf(e)&&"x"===t}function Do(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function zo(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),vs(n&&n.onComplete,[e],t)}function $o(e){const t=e.chart,n=t.options.animation;vs(n&&n.onProgress,[e],t)}function Fo(e){return Si()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Uo={},Bo=e=>{const t=Fo(e);return Object.values(Uo).filter(e=>e.canvas===t).pop()};function Wo(e,t,n){const s=Object.keys(e);for(const r of s){const s=+r;if(s>=t){const i=e[r];delete e[r],(n>0||s>t)&&(e[s+n]=i)}}}class Ho{static defaults=(()=>Ar)();static instances=(()=>Uo)();static overrides=(()=>Cr)();static registry=(()=>mo)();static version="4.5.0";static getChart=(()=>Bo)();static register(){mo.add(...arguments),Vo()}static unregister(){mo.remove(...arguments),Vo()}constructor(e,t){const n=this.config=new Ao(t),s=Fo(e),r=Bo(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const i=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!Si()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?Fa:to}(s)),this.platform.updateConfig(n);const a=this.platform.acquireContext(s,i.aspectRatio),o=a&&a.canvas,l=o&&o.height,c=o&&o.width;this.id=cs(),this.ctx=a,this.canvas=o,this.width=c,this.height=l,this._options=i,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new vo,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}(e=>this.update(e),i.resizeDelay||0),this._dataChanges=[],Uo[this.id]=this,a&&o?(Xi.listen(this,"complete",zo),Xi.listen(this,"progress",$o),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:s,_aspectRatio:r}=this;return us(e)?t&&r?r:s?n/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return mo}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Mi(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Rr(this.canvas,this.ctx),this}stop(){return Xi.stop(this),this}resize(e,t){Xi.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,s=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,i=this.platform.getMaximumSize(s,e,t,r),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=i.width,this.height=i.height,this._aspectRatio=this.aspectRatio,Mi(this,a,!0)&&(this.notifyPlugins("resize",{size:i}),vs(n.onResize,[this,i],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){bs(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,s=Object.keys(n).reduce((e,t)=>(e[t]=!1,e),{});let r=[];t&&(r=r.concat(Object.keys(t).map(e=>{const n=t[e],s=ko(e,n),r="r"===s,i="x"===s;return{options:n,dposition:r?"chartArea":i?"bottom":"left",dtype:r?"radialLinear":i?"category":"linear"}}))),bs(r,t=>{const r=t.options,i=r.id,a=ko(i,r),o=gs(r.type,t.dtype);void 0!==r.position&&Lo(r.position,a)===Lo(t.dposition)||(r.position=t.dposition),s[i]=!0;let l=null;if(i in n&&n[i].type===o)l=n[i];else{l=new(mo.getScale(o))({id:i,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(r,e)}),bs(s,(e,t)=>{e||delete n[t]}),bs(n,e=>{za.configure(this,e,e.options),za.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((e,t)=>e.index-t.index),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(Do("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,n)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,s;for(this._removeUnreferencedMetasets(),n=0,s=t.length;n<s;n++){const s=t[n];let r=this.getDatasetMeta(n);const i=s.type||this.config.type;if(r.type&&r.type!==i&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=i,r.indexAxis=s.indexAxis||xo(i,this.options),r.order=s.order||0,r.index=n,r.label=""+s.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const t=mo.getController(i),{datasetElementType:s,dataElementType:a}=Ar.datasets[i];Object.assign(t,{dataElementType:mo.getElement(a),datasetElementType:s&&mo.getElement(s)}),r.controller=new t(this,n),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){bs(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let i=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!s&&-1===r.indexOf(e);e.buildOrUpdateElements(t),i=Math.max(+e.getMaxOverflow(),i)}i=this._minPadding=n.layout.autoPadding?i:0,this._updateLayout(i),s||bs(r,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Do("z","_idx"));const{_active:a,_lastEvent:o}=this;o?this._eventHandler(o,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){bs(this.scales,e=>{za.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);Os(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:s,count:r}of t){Wo(e,s,"_removeElements"===n?-r:r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),s=n(0);for(let r=1;r<t;r++)if(!Os(s,n(r)))return;return Array.from(s).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;za.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],bs(this.boxes,e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Ps(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),s={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",s)&&(n.controller._update(t),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Xi.has(this)?this.attached&&!Xi.running(this)&&Xi.start(this):(this.draw(),zo({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let s,r;for(s=0,r=t.length;s<r;++s){const r=t[s];e&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},s=Ji(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(s&&$r(t,s),e.controller.draw(),s&&Fr(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return zr(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,s){const r=ja.modes[t];return"function"===typeof r?r(this,e,n,s):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let s=n.filter(e=>e&&e._dataset===t).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(s)),s}getContext(){return this.$context||(this.$context=si(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const s=n?"show":"hide",r=this.getDatasetMeta(e),i=r.controller._resolveAnimations(void 0,s);Es(t)?(r.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),i.update(r,{visible:n}),this.update(t=>t.datasetIndex===e?s:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Xi.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Rr(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Uo[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,s)=>{t.addEventListener(this,n,s),e[n]=s},s=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};bs(this.options.events,e=>n(e,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,s)=>{t.addEventListener(this,n,s),e[n]=s},s=(n,s)=>{e[n]&&(t.removeEventListener(this,n,s),delete e[n])},r=(e,t)=>{this.canvas&&this.resize(e,t)};let i;const a=()=>{s("attach",a),this.attached=!0,this.resize(),n("resize",r),n("detach",i)};i=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),n("attach",a)},t.isAttached(this.canvas)?a():i()}unbindEvents(){bs(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},bs(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const s=n?"set":"remove";let r,i,a,o;for("dataset"===t&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,o=e.length;a<o;++a){i=e[a];const t=i&&this.getDatasetMeta(i.datasetIndex).controller;t&&t[s+"HoverStyle"](i.element,i.datasetIndex,i.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(e=>{let{datasetIndex:t,index:n}=e;const s=this.getDatasetMeta(t);if(!s)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:s.data[n],index:n}});!ys(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,n){const s=this.options.hover,r=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),i=r(t,e),a=n?e:r(e,t);i.length&&this.updateHoverStyle(i,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},s=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,s))return;const r=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,s),(r||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:s=[],options:r}=this,i=t,a=this._getActiveElements(e,s,n,i),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,s){return n&&"mouseout"!==e.type?s?t:e:null}(e,this._lastEvent,n,o);n&&(this._lastEvent=null,vs(r.onHover,[e,a,this],this),o&&vs(r.onClick,[e,a,this],this));const c=!ys(a,s);return(c||t)&&(this._active=a,this._updateHoverStyles(a,s,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,s){if("mouseout"===e.type)return[];if(!n)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,s)}}function Vo(){return bs(Ho.instances,e=>e._plugins.invalidate())}function qo(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=gs(n.borderCapStyle,t.borderCapStyle),e.setLineDash(gs(n.borderDash,t.borderDash)),e.lineDashOffset=gs(n.borderDashOffset,t.borderDashOffset),e.lineJoin=gs(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=gs(n.borderWidth,t.borderWidth),e.strokeStyle=gs(n.borderColor,t.borderColor)}function Ko(e,t,n){e.lineTo(n.x,n.y)}function Go(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=e.length,{start:r=0,end:i=s-1}=n,{start:a,end:o}=t,l=Math.max(r,a),c=Math.min(i,o),u=r<a&&i<a||r>o&&i>o;return{count:s,start:l,loop:t.loop,ilen:c<l&&!u?s+c-l:c-l}}function Yo(e,t,n,s){const{points:r,options:i}=t,{count:a,start:o,loop:l,ilen:c}=Go(r,n,s),u=function(e){return e.stepped?Ur:e.tension||"monotone"===e.cubicInterpolationMode?Br:Ko}(i);let d,h,f,{move:p=!0,reverse:g}=s||{};for(d=0;d<=c;++d)h=r[(o+(g?c-d:d))%a],h.skip||(p?(e.moveTo(h.x,h.y),p=!1):u(e,f,h,g,i.stepped),f=h);return l&&(h=r[(o+(g?c:0))%a],u(e,f,h,g,i.stepped)),!!l}function Jo(e,t,n,s){const r=t.points,{count:i,start:a,ilen:o}=Go(r,n,s),{move:l=!0,reverse:c}=s||{};let u,d,h,f,p,g,m=0,v=0;const b=e=>(a+(c?o-e:e))%i,y=()=>{f!==p&&(e.lineTo(m,p),e.lineTo(m,f),e.lineTo(m,g))};for(l&&(d=r[b(0)],e.moveTo(d.x,d.y)),u=0;u<=o;++u){if(d=r[b(u)],d.skip)continue;const t=d.x,n=d.y,s=0|t;s===h?(n<f?f=n:n>p&&(p=n),m=(v*m+t)/++v):(y(),e.lineTo(t,n),h=s,v=0,f=p=n),g=n}y()}function Qo(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?Jo:Yo}const Xo="function"===typeof Path2D;function Zo(e,t,n,s){Xo&&!t.options.segment?function(e,t,n,s){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,s)&&r.closePath()),qo(e,t.options),e.stroke(r)}(e,t,n,s):function(e,t,n,s){const{segments:r,options:i}=t,a=Qo(t);for(const o of r)qo(e,i,o.style),e.beginPath(),a(e,t,o,{start:n,end:n+s-1})&&e.closePath(),e.stroke()}(e,t,n,s)}class el extends no{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const s=n.spanGaps?this._loop:this._fullLoop;ki(this._points,n,e,s,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,s=e.options.spanGaps,r=n.length;if(!r)return[];const i=!!e._loop,{start:a,end:o}=function(e,t,n,s){let r=0,i=t-1;if(n&&!s)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(i+=r);i>r&&e[i%t].skip;)i--;return i%=t,{start:r,end:i}}(n,r,i,s);return qi(e,!0===s?[{start:a,end:o,loop:i}]:function(e,t,n,s){const r=e.length,i=[];let a,o=t,l=e[t];for(a=t+1;a<=n;++a){const n=e[a%r];n.skip||n.stop?l.skip||(s=!1,i.push({start:t%r,end:(a-1)%r,loop:s}),t=o=n.stop?a:null):(o=a,l.skip&&(t=a)),l=n}return null!==o&&i.push({start:t%r,end:o%r,loop:s}),i}(n,a,o<a?o+r:o,!!e._fullLoop&&0===a&&o===r-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,s=e[t],r=this.points,i=Vi(this,{property:t,start:s,end:s});if(!i.length)return;const a=[],o=function(e){return e.stepped?Di:e.tension||"monotone"===e.cubicInterpolationMode?zi:Li}(n);let l,c;for(l=0,c=i.length;l<c;++l){const{start:c,end:u}=i[l],d=r[c],h=r[u];if(d===h){a.push(d);continue}const f=o(d,h,Math.abs((s-d[t])/(h[t]-d[t])),n.stepped);f[t]=e[t],a.push(f)}return 1===a.length?a[0]:a}pathSegment(e,t,n){return Qo(this)(e,this,t,n)}path(e,t,n){const s=this.segments,r=Qo(this);let i=this._loop;t=t||0,n=n||this.points.length-t;for(const a of s)i&=r(e,this,a,{start:t,end:t+n-1});return!!i}draw(e,t,n,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),Zo(e,this,n,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function tl(e,t,n,s){const r=e.options,{[n]:i}=e.getProps([n],s);return Math.abs(t-i)<r.radius+r.hitRadius}class nl extends no{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const s=this.options,{x:r,y:i}=this.getProps(["x","y"],n);return Math.pow(e-r,2)+Math.pow(t-i,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,t){return tl(this,e,"x",t)}inYRange(e,t){return tl(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!zr(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Lr(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}const sl=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}};class rl extends no{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=vs(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,n)=>e.sort(t,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,s=ti(n.font),r=s.size,i=this._computeTitleHeight(),{boxWidth:a,itemHeight:o}=sl(n,r);let l,c;t.font=s.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(i,r,a,o)+10):(c=this.maxHeight,l=this._fitCols(i,s,a,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,s){const{ctx:r,maxWidth:i,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=s+a;let u=e;r.textAlign="left",r.textBaseline="middle";let d=-1,h=-c;return this.legendItems.forEach((e,f)=>{const p=n+t/2+r.measureText(e.text).width;(0===f||l[l.length-1]+p+2*a>i)&&(u+=c,l[l.length-(f>0?0:1)]=0,h+=c,d++),o[f]={left:0,top:h,row:d,width:p,height:s},l[l.length-1]+=p+a}),u}_fitCols(e,t,n,s){const{ctx:r,maxHeight:i,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=i-e;let u=a,d=0,h=0,f=0,p=0;return this.legendItems.forEach((e,i)=>{const{itemWidth:g,itemHeight:m}=function(e,t,n,s,r){const i=function(e,t,n,s){let r=e.text;r&&"string"!==typeof r&&(r=r.reduce((e,t)=>e.length>t.length?e:t));return t+n.size/2+s.measureText(r).width}(s,e,t,n),a=function(e,t,n){let s=e;"string"!==typeof t.text&&(s=il(t,n));return s}(r,s,t.lineHeight);return{itemWidth:i,itemHeight:a}}(n,t,r,e,s);i>0&&h+m+2*a>c&&(u+=d+a,l.push({width:d,height:h}),f+=d+a,p++,d=h=0),o[i]={left:f,top:h,col:p,width:g,height:m},d=Math.max(d,g),h+=m+a}),u+=d,l.push({width:d,height:h}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:s},rtl:r}}=this,i=$i(r,this.left,this.width);if(this.isHorizontal()){let r=0,a=dr(n,this.left+s,this.right-this.lineWidths[r]);for(const o of t)r!==o.row&&(r=o.row,a=dr(n,this.left+s,this.right-this.lineWidths[r])),o.top+=this.top+e+s,o.left=i.leftForLtr(i.x(a),o.width),a+=o.width+s}else{let r=0,a=dr(n,this.top+e+s,this.bottom-this.columnSizes[r].height);for(const o of t)o.col!==r&&(r=o.col,a=dr(n,this.top+e+s,this.bottom-this.columnSizes[r].height)),o.top=a,o.left+=this.left+s,o.left=i.leftForLtr(i.x(o.left),o.width),a+=o.height+s}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;$r(e,this),this._draw(),Fr(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:s}=this,{align:r,labels:i}=e,a=Ar.color,o=$i(e.rtl,this.left,this.width),l=ti(i.font),{padding:c}=i,u=l.size,d=u/2;let h;this.drawTitle(),s.textAlign=o.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:g}=sl(i,u),m=this.isHorizontal(),v=this._computeTitleHeight();h=m?{x:dr(r,this.left+c,this.right-n[0]),y:this.top+c+v,line:0}:{x:this.left+c,y:dr(r,this.top+v+c,this.bottom-t[0].height),line:0},Fi(this.ctx,e.textDirection);const b=g+c;this.legendItems.forEach((y,x)=>{s.strokeStyle=y.fontColor,s.fillStyle=y.fontColor;const w=s.measureText(y.text).width,_=o.textAlign(y.textAlign||(y.textAlign=i.textAlign)),k=f+d+w;let S=h.x,j=h.y;o.setWidth(this.width),m?x>0&&S+k+c>this.right&&(j=h.y+=b,h.line++,S=h.x=dr(r,this.left+c,this.right-n[h.line])):x>0&&j+b>this.bottom&&(S=h.x=S+t[h.line].width+c,h.line++,j=h.y=dr(r,this.top+v+c,this.bottom-t[h.line].height));if(function(e,t,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;s.save();const r=gs(n.lineWidth,1);if(s.fillStyle=gs(n.fillStyle,a),s.lineCap=gs(n.lineCap,"butt"),s.lineDashOffset=gs(n.lineDashOffset,0),s.lineJoin=gs(n.lineJoin,"miter"),s.lineWidth=r,s.strokeStyle=gs(n.strokeStyle,a),s.setLineDash(gs(n.lineDash,[])),i.usePointStyle){const a={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},l=o.xPlus(e,f/2);Dr(s,a,l,t+d,i.pointStyleWidth&&f)}else{const i=t+Math.max((u-p)/2,0),a=o.leftForLtr(e,f),l=Zr(n.borderRadius);s.beginPath(),Object.values(l).some(e=>0!==e)?qr(s,{x:a,y:i,w:f,h:p,radius:l}):s.rect(a,i,f,p),s.fill(),0!==r&&s.stroke()}s.restore()}(o.x(S),j,y),S=((e,t,n,s)=>e===(s?"left":"right")?n:"center"===e?(t+n)/2:t)(_,S+f+d,m?S+k:this.right,e.rtl),function(e,t,n){Vr(s,n.text,e,t+g/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(S),j,y),m)h.x+=k+c;else if("string"!==typeof y.text){const e=l.lineHeight;h.y+=il(y,e)+c}else h.y+=b}),Ui(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=ti(t.font),s=ei(t.padding);if(!t.display)return;const r=$i(e.rtl,this.left,this.width),i=this.ctx,a=t.position,o=n.size/2,l=s.top+o;let c,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+l,u=dr(e.align,u,this.right-d);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+dr(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=dr(a,u,u+d);i.textAlign=r.textAlign(ur(a)),i.textBaseline="middle",i.strokeStyle=t.color,i.fillStyle=t.color,i.font=n.string,Vr(i,t.text,h,c,n)}_computeTitleHeight(){const e=this.options.title,t=ti(e.font),n=ei(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,s,r;if(tr(e,this.left,this.right)&&tr(t,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(s=r[n],tr(e,s.left,s.left+s.width)&&tr(t,s.top,s.top+s.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const i=this._hoveredItem,a=(r=n,null!==(s=i)&&null!==r&&s.datasetIndex===r.datasetIndex&&s.index===r.index);i&&!a&&vs(t.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!a&&vs(t.onHover,[e,n,this],this)}else n&&vs(t.onClick,[e,n,this],this);var s,r}}function il(e,t){return t*(e.text?e.text.length:0)}var al={id:"legend",_element:rl,start(e,t,n){const s=e.legend=new rl({ctx:e.ctx,options:n,chart:e});za.configure(e,s,n),za.addBox(e,s)},stop(e){za.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;za.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,r=n.chart;r.isDatasetVisible(s)?(r.hide(s),t.hidden=!0):(r.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:r,color:i,useBorderRadius:a,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(n?0:void 0),c=ei(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:i,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:s||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:a&&(o||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class ol extends no{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const s=ds(n.text)?n.text.length:1;this._padding=ei(n.padding);const r=s*ti(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:s,right:r,options:i}=this,a=i.align;let o,l,c,u=0;return this.isHorizontal()?(l=dr(a,n,r),c=t+e,o=r-n):("left"===i.position?(l=n+e,c=dr(a,s,t),u=-.5*As):(l=r-e,c=dr(a,t,s),u=.5*As),o=s-t),{titleX:l,titleY:c,maxWidth:o,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=ti(t.font),s=n.lineHeight/2+this._padding.top,{titleX:r,titleY:i,maxWidth:a,rotation:o}=this._drawArgs(s);Vr(e,t.text,0,0,n,{color:t.color,maxWidth:a,rotation:o,textAlign:ur(t.align),textBaseline:"middle",translation:[r,i]})}}var ll={id:"title",_element:ol,start(e,t,n){!function(e,t){const n=new ol({ctx:e.ctx,options:t,chart:e});za.configure(e,n,t),za.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;za.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const s=e.titleBlock;za.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const cl={average(e){if(!e.length)return!1;let t,n,s=new Set,r=0,i=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();s.add(e.x),r+=e.y,++i}}if(0===i||0===s.size)return!1;return{x:[...s].reduce((e,t)=>e+t)/s.size,y:r/i}},nearest(e,t){if(!e.length)return!1;let n,s,r,i=t.x,a=t.y,o=Number.POSITIVE_INFINITY;for(n=0,s=e.length;n<s;++n){const s=e[n].element;if(s&&s.hasValue()){const e=Js(t,s.getCenterPoint());e<o&&(o=e,r=s)}}if(r){const e=r.tooltipPosition();i=e.x,a=e.y}return{x:i,y:a}}};function ul(e,t){return t&&(ds(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function dl(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function hl(e,t){const{element:n,datasetIndex:s,index:r}=t,i=e.getDatasetMeta(s).controller,{label:a,value:o}=i.getLabelAndValue(r);return{chart:e,label:a,parsed:i.getParsed(r),raw:e.data.datasets[s].data[r],formattedValue:o,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:n}}function fl(e,t){const n=e.chart.ctx,{body:s,footer:r,title:i}=e,{boxWidth:a,boxHeight:o}=t,l=ti(t.bodyFont),c=ti(t.titleFont),u=ti(t.footerFont),d=i.length,h=r.length,f=s.length,p=ei(t.padding);let g=p.height,m=0,v=s.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(v+=e.beforeBody.length+e.afterBody.length,d&&(g+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),v){g+=f*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(v-f)*l.lineHeight+(v-1)*t.bodySpacing}h&&(g+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let b=0;const y=function(e){m=Math.max(m,n.measureText(e).width+b)};return n.save(),n.font=c.string,bs(e.title,y),n.font=l.string,bs(e.beforeBody.concat(e.afterBody),y),b=t.displayColors?a+2+t.boxPadding:0,bs(s,e=>{bs(e.before,y),bs(e.lines,y),bs(e.after,y)}),b=0,n.font=u.string,bs(e.footer,y),n.restore(),m+=p.width,{width:m,height:g}}function pl(e,t,n,s){const{x:r,width:i}=n,{width:a,chartArea:{left:o,right:l}}=e;let c="center";return"center"===s?c=r<=(o+l)/2?"left":"right":r<=i/2?c="left":r>=a-i/2&&(c="right"),function(e,t,n,s){const{x:r,width:i}=s,a=n.caretSize+n.caretPadding;return"left"===e&&r+i+a>t.width||"right"===e&&r-i-a<0||void 0}(c,e,t,n)&&(c="center"),c}function gl(e,t,n){const s=n.yAlign||t.yAlign||function(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||pl(e,t,n,s),yAlign:s}}function ml(e,t,n,s){const{caretSize:r,caretPadding:i,cornerRadius:a}=e,{xAlign:o,yAlign:l}=n,c=r+i,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=Zr(a);let p=function(e,t){let{x:n,width:s}=e;return"right"===t?n-=s:"center"===t&&(n-=s/2),n}(t,o);const g=function(e,t,n){let{y:s,height:r}=e;return"top"===t?s+=n:s-="bottom"===t?r+n:r/2,s}(t,l,c);return"center"===l?"left"===o?p+=c:"right"===o&&(p-=c):"left"===o?p-=Math.max(u,h)+r:"right"===o&&(p+=Math.max(d,f)+r),{x:er(p,0,s.width-t.width),y:er(g,0,s.height-t.height)}}function vl(e,t,n){const s=ei(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-s.right:e.x+s.left}function bl(e){return ul([],dl(e))}function yl(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const xl={beforeTitle:ls,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:ls,beforeBody:ls,beforeLabel:ls,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return us(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:ls,afterBody:ls,beforeFooter:ls,footer:ls,afterFooter:ls};function wl(e,t,n,s){const r=e[t].call(n,s);return"undefined"===typeof r?xl[t].call(n,s):r}class _l extends no{static positioners=(()=>cl)();constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),s=n.enabled&&t.options.animation&&n.animations,r=new na(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,si(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,s=wl(n,"beforeTitle",this,e),r=wl(n,"title",this,e),i=wl(n,"afterTitle",this,e);let a=[];return a=ul(a,dl(s)),a=ul(a,dl(r)),a=ul(a,dl(i)),a}getBeforeBody(e,t){return bl(wl(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,s=[];return bs(e,e=>{const t={before:[],lines:[],after:[]},r=yl(n,e);ul(t.before,dl(wl(r,"beforeLabel",this,e))),ul(t.lines,wl(r,"label",this,e)),ul(t.after,dl(wl(r,"afterLabel",this,e))),s.push(t)}),s}getAfterBody(e,t){return bl(wl(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,s=wl(n,"beforeFooter",this,e),r=wl(n,"footer",this,e),i=wl(n,"afterFooter",this,e);let a=[];return a=ul(a,dl(s)),a=ul(a,dl(r)),a=ul(a,dl(i)),a}_createItems(e){const t=this._active,n=this.chart.data,s=[],r=[],i=[];let a,o,l=[];for(a=0,o=t.length;a<o;++a)l.push(hl(this.chart,t[a]));return e.filter&&(l=l.filter((t,s,r)=>e.filter(t,s,r,n))),e.itemSort&&(l=l.sort((t,s)=>e.itemSort(t,s,n))),bs(l,t=>{const n=yl(e.callbacks,t);s.push(wl(n,"labelColor",this,t)),r.push(wl(n,"labelPointStyle",this,t)),i.push(wl(n,"labelTextColor",this,t))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=i,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),s=this._active;let r,i=[];if(s.length){const e=cl[n.position].call(this,s,this._eventPosition);i=this._createItems(n),this.title=this.getTitle(i,n),this.beforeBody=this.getBeforeBody(i,n),this.body=this.getBody(i,n),this.afterBody=this.getAfterBody(i,n),this.footer=this.getFooter(i,n);const t=this._size=fl(this,n),a=Object.assign({},e,t),o=gl(this.chart,n,a),l=ml(n,a,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,r={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=i,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,s){const r=this.getCaretPosition(e,n,s);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,n){const{xAlign:s,yAlign:r}=this,{caretSize:i,cornerRadius:a}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:u}=Zr(a),{x:d,y:h}=e,{width:f,height:p}=t;let g,m,v,b,y,x;return"center"===r?(y=h+p/2,"left"===s?(g=d,m=g-i,b=y+i,x=y-i):(g=d+f,m=g+i,b=y-i,x=y+i),v=g):(m="left"===s?d+Math.max(o,c)+i:"right"===s?d+f-Math.max(l,u)-i:this.caretX,"top"===r?(b=h,y=b-i,g=m-i,v=m+i):(b=h+p,y=b+i,g=m+i,v=m-i),x=b),{x1:g,x2:m,x3:v,y1:b,y2:y,y3:x}}drawTitle(e,t,n){const s=this.title,r=s.length;let i,a,o;if(r){const l=$i(n.rtl,this.x,this.width);for(e.x=vl(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",i=ti(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=i.string,o=0;o<r;++o)t.fillText(s[o],l.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+a,o+1===r&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,t,n,s,r){const i=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=r,c=ti(r.bodyFont),u=vl(this,"left",r),d=s.x(u),h=o<c.lineHeight?(c.lineHeight-o)/2:0,f=t.y+h;if(r.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=s.leftForLtr(d,l)+l/2,c=f+o/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,Lr(e,t,n,c),e.strokeStyle=i.borderColor,e.fillStyle=i.backgroundColor,Lr(e,t,n,c)}else{e.lineWidth=hs(i.borderWidth)?Math.max(...Object.values(i.borderWidth)):i.borderWidth||1,e.strokeStyle=i.borderColor,e.setLineDash(i.borderDash||[]),e.lineDashOffset=i.borderDashOffset||0;const t=s.leftForLtr(d,l),n=s.leftForLtr(s.xPlus(d,1),l-2),a=Zr(i.borderRadius);Object.values(a).some(e=>0!==e)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,qr(e,{x:t,y:f,w:l,h:o,radius:a}),e.fill(),e.stroke(),e.fillStyle=i.backgroundColor,e.beginPath(),qr(e,{x:n,y:f+1,w:l-2,h:o-2,radius:a}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(t,f,l,o),e.strokeRect(t,f,l,o),e.fillStyle=i.backgroundColor,e.fillRect(n,f+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:s}=this,{bodySpacing:r,bodyAlign:i,displayColors:a,boxHeight:o,boxWidth:l,boxPadding:c}=n,u=ti(n.bodyFont);let d=u.lineHeight,h=0;const f=$i(n.rtl,this.x,this.width),p=function(n){t.fillText(n,f.x(e.x+h),e.y+d/2),e.y+=d+r},g=f.textAlign(i);let m,v,b,y,x,w,_;for(t.textAlign=i,t.textBaseline="middle",t.font=u.string,e.x=vl(this,g,n),t.fillStyle=n.bodyColor,bs(this.beforeBody,p),h=a&&"right"!==g?"center"===i?l/2+c:l+2+c:0,y=0,w=s.length;y<w;++y){for(m=s[y],v=this.labelTextColors[y],t.fillStyle=v,bs(m.before,p),b=m.lines,a&&b.length&&(this._drawColorBox(t,e,y,f,n),d=Math.max(u.lineHeight,o)),x=0,_=b.length;x<_;++x)p(b[x]),d=u.lineHeight;bs(m.after,p)}h=0,d=u.lineHeight,bs(this.afterBody,p),e.y-=r}drawFooter(e,t,n){const s=this.footer,r=s.length;let i,a;if(r){const o=$i(n.rtl,this.x,this.width);for(e.x=vl(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",i=ti(n.footerFont),t.fillStyle=n.footerColor,t.font=i.string,a=0;a<r;++a)t.fillText(s[a],o.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+n.footerSpacing}}drawBackground(e,t,n,s){const{xAlign:r,yAlign:i}=this,{x:a,y:o}=e,{width:l,height:c}=n,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=Zr(s.cornerRadius);t.fillStyle=s.backgroundColor,t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.beginPath(),t.moveTo(a+u,o),"top"===i&&this.drawCaret(e,t,n,s),t.lineTo(a+l-d,o),t.quadraticCurveTo(a+l,o,a+l,o+d),"center"===i&&"right"===r&&this.drawCaret(e,t,n,s),t.lineTo(a+l,o+c-f),t.quadraticCurveTo(a+l,o+c,a+l-f,o+c),"bottom"===i&&this.drawCaret(e,t,n,s),t.lineTo(a+h,o+c),t.quadraticCurveTo(a,o+c,a,o+c-h),"center"===i&&"left"===r&&this.drawCaret(e,t,n,s),t.lineTo(a,o+u),t.quadraticCurveTo(a,o,a+u,o),t.closePath(),t.fill(),s.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,s=n&&n.x,r=n&&n.y;if(s||r){const n=cl[e.position].call(this,this._active,this._eventPosition);if(!n)return;const i=this._size=fl(this,e),a=Object.assign({},n,this._size),o=gl(t,e,a),l=ml(e,a,o,t);s._to===l.x&&r._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=i.width,this.height=i.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const i=ei(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(r,e,s,t),Fi(e,t.textDirection),r.y+=i.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),Ui(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,s=e.map(e=>{let{datasetIndex:t,index:n}=e;const s=this.chart.getDatasetMeta(t);if(!s)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:s.data[n],index:n}}),r=!ys(n,s),i=this._positionChanged(s,t);(r||i)&&(this._active=s,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],i=this._getActiveElements(e,r,t,n),a=this._positionChanged(i,e),o=t||!ys(i,r)||a;return o&&(this._active=i,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,n,s){const r=this.options;if("mouseout"===e.type)return[];if(!s)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const i=this.chart.getElementsAtEventForMode(e,r.mode,r,n);return r.reverse&&i.reverse(),i}_positionChanged(e,t){const{caretX:n,caretY:s,options:r}=this,i=cl[r.position].call(this,e,t);return!1!==i&&(n!==i.x||s!==i.y)}}var kl={id:"tooltip",_element:_l,positioners:cl,afterInit(e,t,n){n&&(e.tooltip=new _l({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:xl},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function Sl(e,t,n,s){const r=e.indexOf(t);if(-1===r)return((e,t,n,s)=>("string"===typeof t?(n=e.push(t)-1,s.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,s);return r!==e.lastIndexOf(t)?n:r}function jl(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Nl extends fo{static id="category";static defaults=(()=>({ticks:{callback:jl}}))();constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:s}of t)e[n]===s&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(us(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:er(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:Sl(n,e,gs(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:s}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(s=this.getLabels().length-1)),this.min=n,this.max=s}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,s=[];let r=this.getLabels();r=0===e&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let i=e;i<=t;i++)s.push({value:i});return s}getLabelForValue(e){return jl.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Cl(e,t){const n=[],{bounds:s,step:r,min:i,max:a,precision:o,count:l,maxTicks:c,maxDigits:u,includeBounds:d}=e,h=r||1,f=c-1,{min:p,max:g}=t,m=!us(i),v=!us(a),b=!us(l),y=(g-p)/(u+1);let x,w,_,k,S=Ws((g-p)/f/h)*h;if(S<1e-14&&!m&&!v)return[{value:p},{value:g}];k=Math.ceil(g/S)-Math.floor(p/S),k>f&&(S=Ws(k*S/f/h)*h),us(o)||(x=Math.pow(10,o),S=Math.ceil(S*x)/x),"ticks"===s?(w=Math.floor(p/S)*S,_=Math.ceil(g/S)*S):(w=p,_=g),m&&v&&r&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((a-i)/r,S/1e3)?(k=Math.round(Math.min((a-i)/S,c)),S=(a-i)/k,w=i,_=a):b?(w=m?i:w,_=v?a:_,k=l-1,S=(_-w)/k):(k=(_-w)/S,k=Bs(k,Math.round(k),S/1e3)?Math.round(k):Math.ceil(k));const j=Math.max(Gs(S),Gs(w));x=Math.pow(10,us(o)?j:o),w=Math.round(w*x)/x,_=Math.round(_*x)/x;let N=0;for(m&&(d&&w!==i?(n.push({value:i}),w<i&&N++,Bs(Math.round((w+N*S)*x)/x,i,Tl(i,y,e))&&N++):w<i&&N++);N<k;++N){const e=Math.round((w+N*S)*x)/x;if(v&&e>a)break;n.push({value:e})}return v&&d&&_!==a?n.length&&Bs(n[n.length-1].value,a,Tl(a,y,e))?n[n.length-1].value=a:n.push({value:a}):v&&_!==a||n.push({value:_}),n}function Tl(e,t,n){let{horizontal:s,minRotation:r}=n;const i=qs(r),a=(s?Math.sin(i):Math.cos(i))||.001,o=.75*t*(""+e).length;return Math.min(t/a,o)}class El extends fo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return us(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this;const i=e=>s=t?s:e,a=e=>r=n?r:e;if(e){const e=Us(s),t=Us(r);e<0&&t<0?a(0):e>0&&t>0&&i(0)}if(s===r){let t=0===r?1:Math.abs(.05*r);a(r+t),e||i(s-t)}this.min=s,this.max=r}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:s}=e;return s?(t=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,t>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const s=Cl({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&Vs(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const s=(n-t)/Math.max(e.length-1,1)/2;t-=s,n+=s}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return Sr(e,this.chart.options.locale,this.options.ticks.format)}}class Pl extends El{static id="linear";static defaults=(()=>({ticks:{callback:Nr.formatters.numeric}}))();determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=fs(e)?e:0,this.max=fs(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=qs(this.options.ticks.minRotation),s=(e?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/s))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Nr.formatters.logarithmic;Nr.formatters.numeric;const Ol={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Al=Object.keys(Ol);function Ml(e,t){return e-t}function Il(e,t){if(us(t))return null;const n=e._adapter,{parser:s,round:r,isoWeekday:i}=e._parseOpts;let a=t;return"function"===typeof s&&s(a),fs(a)||("string"===typeof s?n.parse(a,s):n.parse(a)),null===a?null:(r&&("week"!==r||!Hs(i)&&!0!==i?n.startOf(a,r):n.startOf(a,"isoWeek",i)),+a)}function Rl(e,t,n,s){const r=Al.length;for(let i=Al.indexOf(e);i<r-1;++i){const e=Ol[Al[i]],r=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(r*e.size))<=s)return Al[i]}return Al[r-1]}function Ll(e,t,n){if(n){if(n.length){const{lo:s,hi:r}=nr(n,t);e[n[s]>=t?n[s]:n[r]]=!0}}else e[t]=!0}function Dl(e,t,n){const s=[],r={},i=t.length;let a,o;for(0;a<i;++a)t[a],r[o]=a,s.push({value:o,major:!1});return 0!==i&&n?function(e,t,n,s){const r=e._adapter,i=+r.startOf(t[0].value,s),a=t[t.length-1].value;let o,l;for(i;o<=a;+r.add(o,1,s))n[o],l>=0&&(t[l].major=!0);return t}(e,s,r,n):s}class zl extends fo{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),s=this._adapter=new ba(e.adapters.date);s.init(t),Ss(n.displayFormats,s.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:Il(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:s,max:r,minDefined:i,maxDefined:a}=this.getUserBounds();function o(e){i||isNaN(e.min)||Math.min(s,e.min),a||isNaN(e.max)||Math.max(r,e.max)}i&&a||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),fs(s)&&!isNaN(s)?s:+t.startOf(Date.now(),n),fs(r)&&!isNaN(r)?r:+t.endOf(Date.now(),n)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(e[0],e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,s="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,i=function(e,t,n){let s=0,r=e.length;for(;s<r&&e[s]<t;)0;for(;r>s&&e[r-1]>n;)0;return s>0||r<e.length?e.slice(s,r):e}(s,r,this.max);return this._unit=t.unit||(n.autoSkip?Rl(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(e,t,n,s,r){for(let i=Al.length-1;i>=Al.indexOf(n);i--){const n=Al[i];if(Ol[n].common&&e._adapter.diff(r,s,n)>=t-1)return n}return Al[n?Al.indexOf(n):0]}(this,i.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=Al.indexOf(e)+1,n=Al.length;t<n;++t)if(Ol[Al[t]].common)return Al[t]}(this._unit):void 0,this.initOffsets(s),e.reverse&&i.reverse(),Dl(this,i,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=0,r=0;this.options.offset&&n.length&&(this.getDecimalForValue(n[0]),1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,this.getDecimalForValue(n[n.length-1]),1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const i=n.length<3?.5:.25;er(s,0,i),er(r,0,i),this._offsets={start:s,end:r,factor:1/(s+1+r)}}_generate(){const e=this._adapter,t=this.min,n=this.max,s=this.options,r=s.time,i=r.unit||Rl(r.minUnit,t,n,this._getLabelCapacity(t)),a=gs(s.ticks.stepSize,1),o="week"===i&&r.isoWeekday,l=Hs(o)||!0===o,c={};let u,d,h=t;if(l&&+e.startOf(h,"isoWeek",o),+e.startOf(h,l?"day":i),e.diff(n,t,i)>1e5*a)throw new Error(t+" and "+n+" are too far apart with stepSize of "+a+" "+i);const f="data"===s.ticks.source&&this.getDataTimestamps();for(0;u<n;+e.add(u,a,i),d++)Ll(c,u,f);return u!==n&&"ticks"!==s.bounds&&1!==d||Ll(c,u,f),Object.keys(c).sort(Ml).map(e=>+e)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,s=this._unit,r=t||n[s];return this._adapter.format(e,r)}_tickFormatFunction(e,t,n,s){const r=this.options,i=r.ticks.callback;if(i)return vs(i,[e,t,n],this);const a=r.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&a[o],u=l&&a[l],d=n[t],h=l&&u&&d&&d.major;return this._adapter.format(e,s||(h?u:c))}generateTickLabels(e){let t,n,s;for(e.length;t<n;++t)e[t],s.label=this._tickFormatFunction(s.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,s=qs(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(s),i=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:n*r+a*i,h:n*i+a*r}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,s=n[t.unit]||n.millisecond,r=this._tickFormatFunction(e,0,Dl(this,[e],this._majorUnit),s),i=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/i.w:this.height/i.h)-1;return a>0?a:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(s.length;e<t;++e)n.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const s=this.getLabels();for(s.length;t<n;++t)e.push(Il(this,s[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return or(e.sort(Ml))}}const $l="label";function Fl(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function Ul(e,t){e.labels=t}function Bl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$l;const s=[];e.datasets=t.map(t=>{const r=e.datasets.find(e=>e[n]===t[n]);return r&&t.data&&!s.includes(r)?(s.push(r),Object.assign(r,t),r):{...t}})}function Wl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$l;const n={labels:[],datasets:[]};return Ul(n,e.labels),Bl(n,e.datasets,t),n}function Hl(t,n){const{height:s=150,width:r=300,redraw:i=!1,datasetIdKey:a,type:o,data:l,options:c,plugins:u=[],fallbackContent:d,updateMode:h,...f}=t,p=(0,e.useRef)(null),g=(0,e.useRef)(null),m=()=>{p.current&&(g.current=new Ho(p.current,{type:o,data:Wl(l,a),options:c&&{...c},plugins:u}),Fl(n,g.current))},v=()=>{Fl(n,null),g.current&&(g.current.destroy(),g.current=null)};return(0,e.useEffect)(()=>{!i&&g.current&&c&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(g.current,c)},[i,c]),(0,e.useEffect)(()=>{!i&&g.current&&Ul(g.current.config.data,l.labels)},[i,l.labels]),(0,e.useEffect)(()=>{!i&&g.current&&l.datasets&&Bl(g.current.config.data,l.datasets,a)},[i,l.datasets]),(0,e.useEffect)(()=>{g.current&&(i?(v(),setTimeout(m)):g.current.update(h))},[i,c,l.labels,l.datasets,h]),(0,e.useEffect)(()=>{g.current&&(v(),setTimeout(m))},[o]),(0,e.useEffect)(()=>(m(),()=>v()),[]),e.createElement("canvas",{ref:p,role:"img",height:s,width:r,...f},d)}const Vl=(0,e.forwardRef)(Hl);function ql(t,n){return Ho.register(n),(0,e.forwardRef)((n,s)=>e.createElement(Vl,{...n,ref:s,type:t}))}const Kl=ql("line",ga);Ho.register(Nl,Pl,nl,el,ll,kl,al);const Gl={gradebook:{Courses:{Course:[{"@Title":"AP Calculus AB","@Grade":"94.5%","@Teacher":"Mr. Davison",Assignments:{Assignment:[{"@Measure":"Homework 5.1","@Score":"10/10","@Notes":"Excellent work!"},{"@Measure":"Quiz Chapter 5","@Score":"85/100","@Notes":"Needs to review derivatives."},{"@Measure":"Project: Real World Calculus","@Score":"98/100","@Notes":""},{"@Measure":"Midterm Exam","@Score":"92/100","@Notes":"Strong performance."}]}},{"@Title":"English Literature","@Grade":"88.0%","@Teacher":"Ms. Gable",Assignments:{Assignment:[{"@Measure":"Essay: The Great Gatsby","@Score":"85/100","@Notes":"Good analysis, but check for grammar."},{"@Measure":"Reading Quiz","@Score":"9/10","@Notes":""},{"@Measure":"Presentation","@Score":"92/100","@Notes":"Very confident and well-researched."}]}},{"@Title":"US History","@Grade":"91.2%","@Teacher":"Mrs. Rodriguez",Assignments:{Assignment:[{"@Measure":"Homework 3.2","@Score":"20/20","@Notes":""},{"@Measure":"Map Quiz","@Score":"18/20","@Notes":""},{"@Measure":"Research Paper Outline","@Score":"10/10","@Notes":"Excellent thesis statement."}]}}]}},attendance:{Absences:{Absence:[{"@AbsenceDate":"2025-05-10","@Reason":"Excused"},{"@AbsenceDate":"2025-04-22","@Reason":"Unexcused"}]}}},Yl=e=>{var t;let{course:n}=e;if(null===n||void 0===n||null===(t=n.Assignments)||void 0===t||!t.Assignment)return null;const s={labels:n.Assignments.Assignment.map(e=>e["@Measure"]),datasets:[{label:"Assignment Score (%)",data:n.Assignments.Assignment.map(e=>{const t=e["@Score"].split("/");if(2!==t.length)return null;const n=parseFloat(t[0]),s=parseFloat(t[1]);return isNaN(n)||isNaN(s)||0===s?null:n/s*100}).filter(e=>null!==e),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.5)",tension:.1}]},r={responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:`Grade Trajectory for ${n["@Title"]}`}},scales:{y:{min:0,max:100}}};return(0,dn.jsx)(Kl,{options:r,data:s})},Jl=()=>{const[t,n]=(0,e.useState)({districtUrl:"",username:"",password:""}),[s,r]=(0,e.useState)(null),[i,a]=(0,e.useState)(!1),[o,l]=(0,e.useState)(""),[c,u]=(0,e.useState)(null),d=e=>{n({...t,[e.target.name]:e.target.value})};return(0,dn.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8",children:[(0,dn.jsxs)("div",{className:"text-center",children:[(0,dn.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"StudentVue Connect"}),(0,dn.jsx)("p",{className:"text-gray-500 mt-2",children:"Monitor your student's academic progress in real-time."})]}),(0,dn.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:(0,dn.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),a(!0),l(""),r(null),u(null),setTimeout(()=>{t.username&&t.password&&t.districtUrl?(r(Gl),u(Gl.gradebook.Courses.Course[0])):l("Please fill in all fields."),a(!1)},1500)},className:"space-y-4",children:[(0,dn.jsx)("input",{name:"districtUrl",value:t.districtUrl,onChange:d,placeholder:"District URL (e.g., https://portal.yourschool.edu)",className:"w-full p-3 bg-gray-100 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,dn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,dn.jsx)("input",{name:"username",value:t.username,onChange:d,placeholder:"Username",className:"w-full p-3 bg-gray-100 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,dn.jsx)("input",{name:"password",type:"password",value:t.password,onChange:d,placeholder:"Password",className:"w-full p-3 bg-gray-100 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o&&(0,dn.jsx)("p",{className:"text-red-500 text-sm",children:o}),(0,dn.jsx)("button",{type:"submit",disabled:i,className:"w-full bg-blue-600 text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-blue-700 transition-all disabled:bg-gray-400",children:i?"Connecting...":"Fetch Student Data"})]})}),s&&(0,dn.jsxs)("div",{className:"space-y-6",children:[c&&(0,dn.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[(0,dn.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Grade Point Trajectory"}),(0,dn.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Visualize assignment performance over time for a selected course."}),(0,dn.jsx)(Yl,{course:c})]}),(0,dn.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[(0,dn.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Course Details & Progress"}),(0,dn.jsx)("ul",{className:"space-y-4",children:s.gradebook.Courses.Course.map(e=>{var t,n,s,r;const i=(null===(t=e.Assignments)||void 0===t||null===(n=t.Assignment)||void 0===n?void 0:n.length)||0,a=i>0?i/i*100:0;return(0,dn.jsxs)("li",{className:"p-4 bg-gray-50 rounded-lg border",children:[(0,dn.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,dn.jsxs)("div",{children:[(0,dn.jsx)("p",{className:"font-semibold text-lg",children:e["@Title"]}),(0,dn.jsx)("p",{className:"text-sm text-gray-500",children:e["@Teacher"]})]}),(0,dn.jsxs)("div",{className:"text-right",children:[(0,dn.jsx)("span",{className:"font-bold text-2xl text-green-600",children:e["@Grade"]}),(0,dn.jsx)("button",{onClick:()=>u(e),className:"text-xs text-blue-500 hover:underline ml-2",children:"Show Trend"})]})]}),(0,dn.jsxs)("div",{children:[(0,dn.jsxs)("div",{className:"flex justify-between mb-1 text-xs text-gray-500",children:[(0,dn.jsx)("span",{children:"Course Progress"}),(0,dn.jsxs)("span",{children:[a.toFixed(0),"%"]})]}),(0,dn.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,dn.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${a}%`}})})]}),(0,dn.jsxs)("div",{className:"mt-4",children:[(0,dn.jsx)("h4",{className:"font-semibold text-sm mb-2",children:"Recent Assignments:"}),(0,dn.jsx)("ul",{className:"space-y-2 text-sm",children:null===(s=e.Assignments)||void 0===s||null===(r=s.Assignment)||void 0===r?void 0:r.map(e=>(0,dn.jsxs)("li",{className:"border-t pt-2",children:[(0,dn.jsxs)("div",{className:"flex justify-between",children:[(0,dn.jsx)("span",{children:e["@Measure"]}),(0,dn.jsx)("span",{className:"font-medium",children:e["@Score"]})]}),e["@Notes"]&&(0,dn.jsxs)("p",{className:"text-xs text-gray-500 mt-1 italic",children:['Teacher Comment: "',e["@Notes"],'"']})]},e["@Measure"]))})]})]},e["@Title"])})})]})]})]})},Ql=()=>{const{profile:t}=pn(),[n,s]=(0,e.useState)(""),[r,i]=(0,e.useState)(""),[a,o]=(0,e.useState)([]),[l,c]=(0,e.useState)([]),[u,d]=(0,e.useState)(null),[h,f]=(0,e.useState)(null),[p,g]=(0,e.useState)(""),[m,v]=(0,e.useState)(!1),[b,y]=(0,e.useState)("");return(0,dn.jsxs)("div",{className:"max-w-5xl mx-auto space-y-6",children:[(0,dn.jsx)("h1",{className:"text-3xl font-bold text-center",children:"Career & ROI Forecaster"}),(0,dn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,dn.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border space-y-4",children:[(0,dn.jsx)("h2",{className:"font-bold text-lg",children:"1. Explore a Career Path"}),(0,dn.jsxs)("div",{className:"flex gap-2",children:[(0,dn.jsx)("input",{value:n,onChange:e=>s(e.target.value),placeholder:"e.g., 'Data Science'",className:"w-full p-2 border rounded"}),(0,dn.jsx)("button",{onClick:async()=>{if(n.trim()){v(!0),y("");try{const e=await fetch("/api/forecaster/find-careers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:n})});if(!e.ok)throw new Error("Failed to fetch career data.");const t=await e.json();o(t.careers||[])}catch(e){y("Could not retrieve career data at this time.")}finally{v(!1)}}},disabled:m,className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Search"})]}),(0,dn.jsx)("div",{className:"space-y-2",children:a.map(e=>(0,dn.jsx)("div",{onClick:()=>d(e),className:"p-2 border rounded cursor-pointer "+((null===u||void 0===u?void 0:u._id)===e._id?"bg-blue-100 border-blue-400":""),children:e.title},e._id))})]}),(0,dn.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border space-y-4",children:[(0,dn.jsx)("h2",{className:"font-bold text-lg",children:"2. Select a College"}),(0,dn.jsxs)("div",{className:"flex gap-2",children:[(0,dn.jsx)("input",{value:r,onChange:e=>i(e.target.value),placeholder:"Search for a college...",className:"w-full p-2 border rounded"}),(0,dn.jsx)("button",{onClick:async()=>{if(r.trim()){v(!0);try{const e=await nn({filters:{"general_info.name":{$regex:r,$options:"i"}},pagination:{limit:5}});c(e.data||[])}catch(e){y("Could not search for colleges.")}finally{v(!1)}}},disabled:m,className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Search"})]}),(0,dn.jsx)("div",{className:"space-y-2",children:l.map(e=>(0,dn.jsx)("div",{onClick:()=>f(e),className:"p-2 border rounded cursor-pointer "+((null===h||void 0===h?void 0:h.unitid)===e.unitid?"bg-blue-100 border-blue-400":""),children:e.general_info.name},e.unitid))})]})]}),(0,dn.jsx)("div",{className:"text-center",children:(0,dn.jsx)("button",{onClick:async()=>{if(u&&h){v(!0),y("");try{const e=await fetch("/api/forecaster/generate-forecast",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentProfile:t,career:u,college:h})});if(!e.ok)throw new Error("Failed to generate forecast.");const n=await e.json();g(n.forecast)}catch(e){y("Could not generate the forecast at this time.")}finally{v(!1)}}else alert("Please select a career and a college.")},disabled:!u||!h||m,className:"bg-green-600 text-white font-bold py-3 px-8 rounded-lg disabled:bg-gray-400",children:m?"Forecasting...":"Generate Forecast"})}),b&&(0,dn.jsx)("p",{className:"text-red-500 text-center",children:b}),p&&(0,dn.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[(0,dn.jsx)("h2",{className:"text-xl font-bold mb-4",children:"AI-Powered Forecast"}),(0,dn.jsx)("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:p.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n/g,"<br />")}})]})]})},Xl=e=>{let{title:t,children:n,icon:s}=e;return(0,dn.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[(0,dn.jsxs)("div",{className:"flex items-center mb-4",children:[s,(0,dn.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:t})]}),(0,dn.jsx)("div",{className:"space-y-3 text-gray-600",children:n})]})},Zl=e=>{let{min:t,max:n,label:s,range:r=1600}=e;if("number"!==typeof t||"number"!==typeof n)return null;const i=t/r*100,a=(n-t)/r*100;return(0,dn.jsxs)("div",{children:[(0,dn.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[(0,dn.jsx)("span",{children:t}),(0,dn.jsx)("span",{children:n})]}),(0,dn.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,dn.jsx)("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{marginLeft:`${i}%`,width:`${a}%`}})}),(0,dn.jsx)("p",{className:"text-sm text-center mt-1 font-medium",children:s})]})},ec=t=>{var n,s,r,i,a,o,l,c,u,d,h,f,p;let{collegeId:g,onBack:m,onGenerateReport:v,studentProfile:b}=t;const[y,x]=(0,e.useState)(null),[w,_]=(0,e.useState)(!0);if((0,e.useEffect)(()=>{(async()=>{_(!0);const e=await sn(g);x(e),_(!1)})()},[g]),w)return(0,dn.jsx)("div",{className:"text-center p-10",children:"Loading College Profile..."});if(!y)return(0,dn.jsx)("div",{className:"text-center p-10",children:"Could not find college data."});const{general_info:k,cost_and_aid:S,admissions:j,outcomes:N,derivedData:C}=y;return(0,dn.jsxs)("div",{children:[(0,dn.jsx)("button",{onClick:m,className:"mb-6 bg-white text-gray-800 px-4 py-2 rounded-lg border shadow-sm hover:bg-gray-100 transition-colors",children:"\u2190 Back to Dashboard"}),(0,dn.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-lg border mb-8",children:[(0,dn.jsx)("h1",{className:"text-4xl font-extrabold text-gray-900",children:k.name}),(0,dn.jsxs)("p",{className:"text-xl text-gray-500 mt-1",children:[k.city,", ",k.state]})]}),(0,dn.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,dn.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,dn.jsxs)(Xl,{title:"Admissions",icon:(0,dn.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-3 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,dn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),children:[(0,dn.jsxs)("p",{children:[(0,dn.jsx)("strong",{children:"Admission Rate:"})," ",(0,dn.jsx)("span",{className:"font-bold text-blue-600",children:j.admission_rate?`${(100*j.admission_rate).toFixed(1)}%`:"N/A"})]}),(0,dn.jsx)(Zl,{min:null===(n=j.sat_scores)||void 0===n?void 0:n.verbal_25th,max:null===(s=j.sat_scores)||void 0===s?void 0:s.verbal_75th,label:"SAT Evidence-Based Reading and Writing",range:800}),(0,dn.jsx)(Zl,{min:null===(r=j.sat_scores)||void 0===r?void 0:r.math_25th,max:null===(i=j.sat_scores)||void 0===i?void 0:i.math_75th,label:"SAT Math",range:800}),(0,dn.jsx)(Zl,{min:null===(a=j.act_scores)||void 0===a?void 0:a.composite_25th,max:null===(o=j.act_scores)||void 0===o?void 0:o.composite_75th,label:"ACT Composite",range:36})]}),C&&(0,dn.jsxs)(Xl,{title:"Finance & Staffing",icon:(0,dn.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-3 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,dn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),children:[(0,dn.jsxs)("p",{children:[(0,dn.jsx)("strong",{children:"Total Revenue:"})," $",(null===(l=C.total_revenue)||void 0===l?void 0:l.toLocaleString())||"N/A"]}),(0,dn.jsxs)("p",{children:[(0,dn.jsx)("strong",{children:"Total Expenses:"})," $",(null===(c=C.total_expenses)||void 0===c?void 0:c.toLocaleString())||"N/A"]}),(0,dn.jsxs)("p",{children:[(0,dn.jsx)("strong",{children:"Average Faculty Salary:"})," $",(null===(u=C.avg_faculty_salary)||void 0===u?void 0:u.toLocaleString())||"N/A"]})]})]}),(0,dn.jsxs)("div",{className:"space-y-6",children:[(0,dn.jsxs)(Xl,{title:"Student Charges",icon:(0,dn.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-3 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,dn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v.01"})}),children:[(0,dn.jsxs)("p",{children:[(0,dn.jsx)("strong",{children:"In-State Tuition:"})," $",(null===(d=S.tuition_in_state)||void 0===d?void 0:d.toLocaleString())||"N/A"]}),(0,dn.jsxs)("p",{children:[(0,dn.jsx)("strong",{children:"Out-of-State Tuition:"})," $",(null===(h=S.tuition_out_of_state)||void 0===h?void 0:h.toLocaleString())||"N/A"]}),(0,dn.jsxs)("p",{children:[(0,dn.jsx)("strong",{children:"% Receiving Pell Grant:"})," ",S.percent_pell_grant||"N/A","%"]})]}),(0,dn.jsxs)(Xl,{title:"Outcomes",icon:(0,dn.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-3 text-purple-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,dn.jsx)("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),(0,dn.jsx)("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-9.998 12.078 12.078 0 01.665-6.479L12 14z"}),(0,dn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-9.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222 4 2.222V20"})]}),children:[(0,dn.jsxs)("p",{children:[(0,dn.jsx)("strong",{children:"Total Enrollment:"})," ",(null===(f=y.enrollment)||void 0===f||null===(p=f.total)||void 0===p?void 0:p.toLocaleString())||"N/A"]}),(0,dn.jsxs)("p",{children:[(0,dn.jsx)("strong",{children:"Graduation Rate:"})," ",N.grad_rate_total||"N/A","%"]}),(0,dn.jsxs)("p",{children:[(0,dn.jsx)("strong",{children:"Derived Grad Rate (150%):"})," ",(null===C||void 0===C?void 0:C.grad_rate_150_percent_total)||"N/A","%"]})]}),(0,dn.jsx)("button",{onClick:v,className:"w-full bg-green-600 text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-green-700 transition-all transform hover:scale-105",children:"Generate Scholargy Report"})]})]})]})};class tc extends e.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}render(){return this.state.hasError?(0,dn.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,dn.jsxs)("div",{className:"text-center",children:[(0,dn.jsx)("h1",{className:"text-2xl font-bold",children:"Something went wrong."}),(0,dn.jsx)("p",{className:"text-gray-600",children:"Please try refreshing the page."})]})}):this.props.children}}const nc=tc;const sc=()=>{const{user:t,profile:n,setProfile:s,isProfileComplete:r,loading:i}=pn(),[a,o]=(0,e.useState)("dashboard"),[l,c]=(0,e.useState)(null);(0,e.useEffect)(()=>{if("/auth/callback"===window.location.pathname)return void o("authCallback");const e=window.location.pathname;"/dashboard"===e?o("dashboard"):"/scholarships"===e?o("scholarships"):"/matching"===e?o("matching"):"/forecaster"===e?o("forecaster"):"/compare"===e?o("compare"):"/studentvue"===e?o("studentVue"):"/profile"===e?o("profile"):"/report"===e&&o("report")},[]);const u=e=>{c(e),o("profile")},d=()=>{o("report")};if(i)return(0,dn.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."});if(!t)return(0,dn.jsx)(bn,{});if(!r&&"studentProfile"!==a&&"authCallback"!==a)return(0,dn.jsx)(vn,{activeView:"studentProfile",setView:o,children:(0,dn.jsx)(_n,{})});return(0,dn.jsx)(vn,{activeView:a,setView:o,children:(()=>{switch(a){case"authCallback":return(0,dn.jsx)(Cn,{setView:o});case"studentProfile":return(0,dn.jsx)(_n,{});case"scholarships":return(0,dn.jsx)(Sn,{studentProfile:n,setView:o});case"matching":return(0,dn.jsx)(jn,{});case"forecaster":return(0,dn.jsx)(Nn,{});case"compare":return(0,dn.jsx)(Ql,{studentProfile:n,setView:o});case"studentVue":return(0,dn.jsx)(Jl,{});case"report":return(0,dn.jsx)(Tn,{collegeId:l,onBack:()=>o("profile")});case"profile":return(0,dn.jsx)(ec,{collegeId:l,onBack:()=>o("dashboard"),onGenerateReport:d});default:return(0,dn.jsx)(yn,{setView:o,onSelectCollege:u,studentProfile:n})}})()})},rc=function(){return(0,dn.jsx)(nc,{children:(0,dn.jsx)(fn,{children:(0,dn.jsx)(sc,{})})})};t.createRoot(document.getElementById("root")).render((0,dn.jsx)(e.StrictMode,{children:(0,dn.jsx)(rc,{})}))})()})();
//# sourceMappingURL=main.23654e70.js.map